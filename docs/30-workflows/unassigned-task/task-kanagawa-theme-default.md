# Kanagawa配色テーマのデフォルト設定 - タスク指示書

## メタ情報

| 項目             | 内容                               |
| ---------------- | ---------------------------------- |
| タスクID         | TASK-THEME-KANAGAWA-001            |
| タスク名         | Kanagawa配色テーマのデフォルト設定 |
| 分類             | 改善                               |
| 対象機能         | エディター・UI全体                 |
| 優先度           | 中                                 |
| 見積もり規模     | 中規模                             |
| ステータス       | 未実施                             |
| 発見元           | ユーザー要望                       |
| 発見日           | 2025-12-11                         |
| 発見エージェント | .claude/agents/product-manager.md                   |

---

## 1. なぜこのタスクが必要か（Why）

### 1.1 背景

Kanagawaは、Neovim発祥の人気配色テーマで、日本の浮世絵画家・葛飾北斎の「神奈川沖浪裏」にインスピレーションを受けた美しい配色が特徴。落ち着いた色調で長時間のコーディングでも目に優しく、多くの開発者に支持されている。このテーマをデフォルト配色として採用することで、エディターの視認性と美しさを向上させる。

### 1.2 問題点・課題

- 現在のデフォルト配色が最適化されていない可能性
- エディターの視認性を向上させたい
- 統一感のある美しいUIを提供したい
- 長時間作業時の目の疲労軽減

### 1.3 放置した場合の影響

- ユーザー体験（UX）の向上機会を逃す
- エディターの視認性が改善されない
- プロダクトの見た目の魅力が低下

---

## 2. 何を達成するか（What）

### 2.1 目的

Kanagawa配色テーマをアプリケーションのデフォルトテーマとして実装し、エディターやUI全体の視認性と美しさを向上させる。

### 2.2 最終ゴール

- Kanagawaテーマ（Wave/Dragon/Lotus）の実装
- デフォルトテーマとしてKanagawa Waveを設定
- エディターのシンタックスハイライト対応
- UIコンポーネント全体への配色適用
- テーマ切り替え機能（将来の拡張用）

### 2.3 スコープ

#### 含むもの

**Kanagawaテーマバリエーション**

- **Wave（デフォルト）**: 涼しい青系のダークテーマ
- **Dragon**: より濃い色調のダークテーマ
- **Lotus**: ライトテーマ

**適用対象**

- エディター背景・テキスト
- シンタックスハイライト（各言語対応）
- サイドバー・ファイルツリー
- タブバー
- ステータスバー
- ダイアログ・モーダル
- ボタン・フォーム要素
- スクロールバー

**カラーパレット（Kanagawa Wave参考値）**

| 用途               | 色名         | Hex値   |
| ------------------ | ------------ | ------- |
| 背景               | sumiInk0     | #16161D |
| 背景（メイン）     | sumiInk1     | #1F1F28 |
| 背景（ハイライト） | sumiInk2     | #2A2A37 |
| 前景テキスト       | fujiWhite    | #DCD7BA |
| コメント           | fujiGray     | #727169 |
| キーワード         | oniViolet    | #957FB8 |
| 関数               | crystalBlue  | #7E9CD8 |
| 文字列             | springGreen  | #98BB6C |
| 数値               | sakuraPink   | #D27E99 |
| 定数               | surimiOrange | #FFA066 |
| 型                 | waveAqua2    | #7AA89F |
| エラー             | samuraiRed   | #E82424 |
| 警告               | roninYellow  | #FF9E3B |
| 情報               | springBlue   | #7FB4CA |
| 選択               | waveBlue2    | #2D4F67 |

#### 含まないもの

- カスタムテーマ作成機能
- テーマのインポート/エクスポート
- ユーザー定義の配色カスタマイズ（将来対応）

### 2.4 成果物

- Kanagawaテーマ定義ファイル（Wave/Dragon/Lotus）
- テーマ適用ロジック
- Tailwind CSS変数の拡張
- シンタックスハイライト設定
- テーマ選択UI（設定画面）
- 関連するユニットテスト
- 技術ドキュメント

---

## 3. どのように実行するか（How）

### 3.1 前提条件

- プロジェクトの開発環境がセットアップ済み
- Tailwind CSSが設定済み
- エディターコンポーネントが実装済み

### 3.2 依存タスク

- なし（独立したタスク）

### 3.3 必要な知識・スキル

- React/TypeScript
- CSS/Tailwind CSS
- CSS変数（カスタムプロパティ）
- シンタックスハイライト（Monaco Editor/CodeMirror）
- カラーシステム設計

### 3.4 推奨アプローチ

1. Kanagawaテーマのカラーパレット定義
2. CSS変数としてテーマカラーを設定
3. Tailwind CSS設定の拡張
4. コンポーネントへのテーマ適用
5. エディターのシンタックスハイライト設定
6. テーマ切り替えロジックの実装
7. 設定UIの実装

**参考リソース**

- [Kanagawa VSCode Theme](https://github.com/metapho-re/kanagawa-vscode-theme)
- [Kanagawa Neovim Original](https://github.com/rebelot/kanagawa.nvim)

---

## 4. 実行手順

### Phase構成

```
Phase 0: 要件定義（カラーパレットの確定）
Phase 1: 設計
  - T-01-1: テーマシステムアーキテクチャ設計
  - T-01-2: カラーパレット定義
  - T-01-3: コンポーネント別テーマ適用設計
Phase 2: 設計レビューゲート
Phase 3: テスト作成（TDD: Red）
Phase 4: 実装（TDD: Green）
  - T-04-1: CSS変数・Tailwind設定
  - T-04-2: UIコンポーネントへのテーマ適用
  - T-04-3: エディターシンタックスハイライト設定
  - T-04-4: テーマ切り替えロジック
  - T-04-5: 設定UI実装
Phase 5: リファクタリング（TDD: Refactor）
Phase 6: 品質保証
Phase 7: 最終レビューゲート
Phase 8: 手動テスト検証
Phase 9: ドキュメント更新
```

### 主要な使用エージェント

- **.claude/agents/ui-designer.md**: テーマ設計・UI適用
- **.claude/agents/arch-police.md**: テーマシステムのアーキテクチャ設計
- **.claude/agents/frontend-tester.md**: UIコンポーネントのテスト
- **.claude/agents/code-quality.md**: CSSの品質検証

---

## 5. 手動テストケース

| No  | カテゴリ     | テスト項目           | 操作手順                   | 期待結果                    |
| --- | ------------ | -------------------- | -------------------------- | --------------------------- |
| 1   | 背景         | エディター背景色     | エディターを開く           | Kanagawa背景色が適用        |
| 2   | シンタックス | キーワードハイライト | コードを表示               | キーワードがoniVioletで表示 |
| 3   | シンタックス | 文字列ハイライト     | 文字列を含むコードを表示   | 文字列がspringGreenで表示   |
| 4   | シンタックス | コメントハイライト   | コメントを含むコードを表示 | コメントがfujiGrayで表示    |
| 5   | UI           | サイドバー配色       | サイドバーを確認           | テーマに沿った配色          |
| 6   | UI           | タブバー配色         | 複数タブを開く             | テーマに沿った配色          |
| 7   | UI           | ボタン配色           | ボタンを確認               | テーマに沿った配色          |
| 8   | テーマ切替   | Wave → Dragon        | 設定でDragonに切替         | Dragon配色に変更            |
| 9   | テーマ切替   | Wave → Lotus         | 設定でLotusに切替          | Lotus（ライト）配色に変更   |
| 10  | 視認性       | 長時間表示           | エディターを長時間使用     | 目の疲労が軽減される        |
| 11  | 選択         | テキスト選択         | テキストを選択             | 選択範囲がwaveBlue2で表示   |
| 12  | エラー       | エラー表示           | エラーを発生させる         | エラーがsamuraiRedで表示    |

---

## 6. 完了条件チェックリスト

### 機能要件

- [ ] Kanagawa Waveがデフォルトテーマとして適用される
- [ ] Dragon、Lotusバリエーションが選択可能
- [ ] エディター背景・テキストに配色が適用される
- [ ] シンタックスハイライトが正しく動作する
- [ ] UIコンポーネント全体に配色が適用される
- [ ] テーマ切り替えが設定から可能
- [ ] 選択したテーマが永続化される

### 品質要件

- [ ] 全テストがPASS
- [ ] Lintエラーなし
- [ ] 型エラーなし
- [ ] コントラスト比がWCAG基準を満たす
- [ ] 視認性が向上している

### デザイン要件

- [ ] オリジナルKanagawaテーマと配色が一致
- [ ] 全画面で統一感のある配色
- [ ] ダークモード/ライトモードの切り替えがスムーズ

---

## 7. リスクと対策

| リスク                     | 影響度 | 発生確率 | 対策                         |
| -------------------------- | ------ | -------- | ---------------------------- |
| コントラスト不足           | 高     | 中       | WCAGガイドラインに基づく検証 |
| 既存UIとの整合性問題       | 中     | 中       | 段階的な適用、レビュー       |
| シンタックスハイライト不備 | 中     | 中       | 主要言語を優先して対応       |
| パフォーマンス低下         | 低     | 低       | CSS変数の効率的な使用        |

---

## 8. 参照情報

### 関連ドキュメント

- `docs/00-requirements/16-ui-ux-guidelines.md` - UI/UXガイドライン
- `tailwind.config.js` - Tailwind CSS設定

### 参考資料

- [Kanagawa VSCode Theme](https://github.com/metapho-re/kanagawa-vscode-theme)
- [Kanagawa Neovim](https://github.com/rebelot/kanagawa.nvim)
- [WCAG Color Contrast](https://www.w3.org/WAI/WCAG21/Understanding/contrast-minimum.html)

---

## 9. 備考

### レビュー指摘の原文

```
Kanagawa Flavors 配色テーマ設定をデフォルトで設定するようにしてほしいです。
VS Codeなどであるこの配色をデフォルト設定としてほしいです。
エディターなど見やすくしてほしいです。
https://github.com/metapho-re/kanagawa-vscode-theme
```

### 補足事項

- Kanagawaテーマは日本の浮世絵「神奈川沖浪裏」にインスピレーションを受けた配色
- Wave（ダーク/デフォルト）、Dragon（濃いダーク）、Lotus（ライト）の3バリエーション
- オリジナルはNeovim用で、VS Code版は移植版
- 落ち着いた配色で長時間作業に適している
- 将来的にユーザーカスタムテーマ機能を追加する際の基盤となる
