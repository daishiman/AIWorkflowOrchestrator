# Workspace Manager 改善タスク

## 概要

**作成日時**: 2025-12-11
**対象機能**: Workspace Manager
**発見フェーズ**: Phase 6-8 品質検証

---

## 1. テストカバレッジ改善

### 1.1 全体カバレッジ向上

| 項目       | 現状 | 目標 | 優先度 |
| ---------- | ---- | ---- | ------ |
| Statements | 62%  | 80%  | 中     |
| Functions  | 80%  | 80%  | 達成済 |
| Lines      | 62%  | 80%  | 中     |

**対象コンポーネント（未テスト）**:

- KnowledgeGraph
- MobileDrawer
- 他の非Workspace関連コンポーネント

**備考**: Workspace Manager関連コンポーネントは80%以上達成済み

---

## 2. セキュリティ改善（将来対応）

### 2.1 IPC チャンネル許可リスト拡張

| 項目       | 内容                           |
| ---------- | ------------------------------ |
| 現状       | 基本的なホワイトリスト実装済み |
| 改善案     | チャンネル別の詳細な権限制御   |
| 優先度     | 低                             |
| 関連コード | `preload/channels.ts`          |

### 2.2 CSP ヘッダー強化

| 項目       | 内容                        |
| ---------- | --------------------------- |
| 現状       | 基本CSP実装済み             |
| 改善案     | より厳格なCSPポリシーの適用 |
| 優先度     | 低                          |
| 関連コード | `main/index.ts:13-43`       |

---

## 3. E2E テスト環境

### 3.1 Playwright テスト実行環境

| 項目   | 内容                            |
| ------ | ------------------------------- |
| 現状   | Node.js 20.0.0 環境（要件未満） |
| 要件   | Node.js 18.19+ または 22+       |
| 対応   | CI環境でのE2Eテスト実行を検討   |
| 優先度 | 低                              |

**テストスクリプト**: `apps/desktop/e2e/workspace.spec.ts`

---

## 4. パフォーマンス最適化（将来対応）

### 4.1 大規模ディレクトリ対応

| 項目       | 内容                            |
| ---------- | ------------------------------- |
| 現状       | 全ファイル一括読み込み          |
| 改善案     | 遅延読み込み、仮想スクロール    |
| 優先度     | 中                              |
| 関連タスク | `task-nfr001-virtual-scroll.md` |

---

## 5. 完了条件

- [ ] 関連タスクとして記録済み
- [ ] 優先度付け完了
- [ ] Phase 10 以降で対応予定

---

## 変更履歴

| 日付       | バージョン | 変更内容                         |
| ---------- | ---------- | -------------------------------- |
| 2025-12-11 | 1.0        | 初版作成（Phase 8 完了後の記録） |
