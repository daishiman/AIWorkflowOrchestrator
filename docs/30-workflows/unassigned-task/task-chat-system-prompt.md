# チャット用システムプロンプト設定機能 - タスク指示書

## メタ情報

| 項目             | 内容                                 |
| ---------------- | ------------------------------------ |
| タスクID         | TASK-CHAT-SYSPROMPT-001              |
| タスク名         | チャット用システムプロンプト設定機能 |
| 分類             | 新規機能                             |
| 対象機能         | チャット                             |
| 優先度           | 高                                   |
| 見積もり規模     | 小規模                               |
| ステータス       | 未実施                               |
| 発見元           | ユーザー要望                         |
| 発見日           | 2025-12-11                           |
| 発見エージェント | @product-manager                     |

---

## 1. なぜこのタスクが必要か（Why）

### 1.1 背景

LLMとのチャットにおいて、システムプロンプトはAIの振る舞いや専門性を定義する重要な要素である。ユーザーがカスタムのシステムプロンプトを設定できることで、特定の用途に最適化されたAIアシスタントを構築できる。

### 1.2 問題点・課題

- システムプロンプトをカスタマイズできない
- 用途に応じたAIの振る舞い調整ができない
- プロンプトエンジニアリングの柔軟性が低い

### 1.3 放置した場合の影響

- AIの回答品質が最適化されない
- ユーザーの多様なニーズに対応できない
- 競合製品と比較して機能的に劣る

---

## 2. 何を達成するか（What）

### 2.1 目的

チャット機能にシステムプロンプトを設定できるUIを実装し、ユーザーがAIの振る舞いをカスタマイズできるようにする。

### 2.2 最終ゴール

- システムプロンプトの入力・編集UI
- プロンプトテンプレートの保存・読み込み
- チャットセッションごとのシステムプロンプト管理
- LLM切り替え時もシステムプロンプトを維持

### 2.3 スコープ

#### 含むもの

- システムプロンプト入力テキストエリア
- プロンプトテンプレートのプリセット
- カスタムテンプレートの保存
- チャットセッションへの関連付け
- Markdown形式でのプロンプト記述

#### 含まないもの

- プロンプトの自動生成
- プロンプトの品質評価
- 外部プロンプトライブラリとの連携

### 2.4 成果物

- システムプロンプト設定UI
- プロンプトテンプレート管理機能
- 関連するユニットテスト

---

## 3. 主要な使用エージェント

- **@ui-designer**: 設定UIの設計
- **@state-manager**: プロンプト状態管理
- **@logic-dev**: テンプレート管理ロジック

---

## 4. 完了条件チェックリスト

- [ ] システムプロンプトを入力・編集できる
- [ ] プロンプトテンプレートを保存・読み込みできる
- [ ] チャットセッションにシステムプロンプトが適用される
- [ ] LLM切り替え時もシステムプロンプトが維持される

---

## 5. 備考

### レビュー指摘の原文

```
チャットの方でシステムプロンプトを入れれるようにしておいてほしいです。
```
