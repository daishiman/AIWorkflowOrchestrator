# 画面分割LLM比較機能 - タスク指示書

## メタ情報

| 項目             | 内容                        |
| ---------------- | --------------------------- |
| タスクID         | TASK-CHAT-SPLIT-COMPARE-001 |
| タスク名         | 画面分割LLM比較機能         |
| 分類             | 新規機能                    |
| 対象機能         | チャット                    |
| 優先度           | 中                          |
| 見積もり規模     | 大規模                      |
| ステータス       | 未実施                      |
| 発見元           | ユーザー要望                |
| 発見日           | 2025-12-11                  |
| 発見エージェント | .claude/agents/product-manager.md            |

---

## 1. なぜこのタスクが必要か（Why）

### 1.1 背景

LLMの選定や回答品質の比較において、同じプロンプトを複数のLLMに同時に送信し、結果を並べて比較できることは非常に有用。プロンプトエンジニアリングや最適なLLM選定の意思決定を支援する。

### 1.2 問題点・課題

- 複数LLMの回答を比較するのに手間がかかる
- 同じプロンプトを複数回送信する必要がある
- LLMの特性を把握しにくい

### 1.3 放置した場合の影響

- 最適なLLM選定ができない
- プロンプトの品質検証が困難
- 開発・検証効率が低下

---

## 2. 何を達成するか（What）

### 2.1 目的

画面を分割して複数のLLMに同時にプロンプトを送信し、出力結果を並べて比較できる機能を実装する。

### 2.2 最終ゴール

- 画面分割UI（2分割、3分割、4分割）
- 各ペインに異なるLLMを割り当て
- 一つのプロンプトを複数LLMに同時送信
- 結果の並列表示・比較
- 比較結果の保存・エクスポート

### 2.3 スコープ

#### 含むもの

**画面分割**

- 水平分割（上下）
- 垂直分割（左右）
- グリッド分割（2x2）
- 分割数の動的変更（2〜4分割）

**LLM割り当て**

- 各ペインにLLMを個別設定
- システムプロンプトの共有/個別設定
- パラメータ（temperature等）の個別設定

**同時送信**

- 一つの入力欄から全ペインに送信
- 各ペインでの個別送信も可能
- ストリーミング表示

**比較機能**

- 並列表示での目視比較
- レスポンス時間の表示
- トークン使用量の表示
- 差分ハイライト（オプション）

#### 含まないもの

- 自動評価・スコアリング
- 5分割以上の画面分割
- 比較結果の自動分析

### 2.4 成果物

- 画面分割UIコンポーネント
- マルチLLM同時送信ロジック
- 比較表示コンポーネント
- 関連するユニットテスト

---

## 3. 主要な使用エージェント

- **.claude/agents/ui-designer.md**: 分割UI・比較表示の設計
- **.claude/agents/electron-architect.md**: マルチペインアーキテクチャ
- **.claude/agents/gateway-dev.md**: 複数LLM同時通信
- **.claude/agents/state-manager.md**: 複数チャット状態の管理

---

## 4. 完了条件チェックリスト

- [ ] 画面を2〜4分割できる
- [ ] 各ペインにLLMを割り当てできる
- [ ] 一つのプロンプトを複数LLMに同時送信できる
- [ ] 結果が並列表示される
- [ ] レスポンス時間・トークン数が表示される
- [ ] 比較結果を保存できる

---

## 5. 備考

### レビュー指摘の原文

```
一つのプロンプトで複数のエージェント画面を分割して複数のLLMで同じ検証をできるようにしてほしいです。
一つの画面で画面分割をして、その分割ごとにLLMを切り替えたりして出力結果を比較できるというような機能が欲しいです。
```

### 関連タスク

- TASK-CHAT-LLM-SWITCH-001: LLMモデル切り替え機能
