# Knowledge Studio - UI機能要件定義書

> **ドキュメントID**: REQ-KS-UI-001
> **バージョン**: 1.0.0
> **作成日**: 2024-12-08
> **ステータス**: Draft

---

## 1. 概要

### 1.1 目的

本ドキュメントは、Knowledge Studio UIの5つのビュー（Dashboard、Editor、Chat、Graph、Settings）の機能要件を定義する。
HTMLプロトタイプからElectronデスクトップアプリケーションへの変換に必要な仕様を明確化する。

### 1.2 スコープ

| 含む                    | 含まない                |
| ----------------------- | ----------------------- |
| 5つのビューのUI機能要件 | バックエンドAPI実装詳細 |
| インタラクション仕様    | データベーススキーマ    |
| レスポンシブ対応        | AI処理アルゴリズム      |
| Electron固有のUI要件    | 外部サービス連携詳細    |

### 1.3 用語定義

| 用語               | 定義                                                    |
| ------------------ | ------------------------------------------------------- |
| **View**           | アプリケーション内の主要画面単位（Dashboard、Editor等） |
| **Dynamic Island** | 画面上部に表示されるステータス通知コンポーネント        |
| **Glass Panel**    | 半透明のガラス風背景を持つコンテナコンポーネント        |
| **App Dock**       | ナビゲーション用のサイドバー/ボトムバーコンポーネント   |
| **RAG**            | Retrieval-Augmented Generation（検索拡張生成）          |

---

## 2. 共通コンポーネント要件

### 2.1 App Dock (ナビゲーション)

#### FR-DOCK-001: ナビゲーション表示

| 項目             | 内容                                                                                                                                            |
| ---------------- | ----------------------------------------------------------------------------------------------------------------------------------------------- |
| **要件**         | アプリケーション内の5つのビュー間を切り替えるナビゲーションを提供する                                                                           |
| **優先度**       | Must                                                                                                                                            |
| **受け入れ基準** | Given: アプリが起動している<br>When: ユーザーがナビゲーションアイコンをクリック<br>Then: 対応するビューに遷移し、アイコンがアクティブ状態になる |

#### FR-DOCK-002: レスポンシブレイアウト

| 項目             | 内容                                                                                                                                                                         |
| ---------------- | ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| **要件**         | ウィンドウ幅に応じてDockの配置を変更する                                                                                                                                     |
| **優先度**       | Must                                                                                                                                                                         |
| **受け入れ基準** | Given: アプリが起動している<br>When: ウィンドウ幅 >= 768px<br>Then: 左サイドバーとして縦に配置（80px幅）<br>When: ウィンドウ幅 < 768px<br>Then: 画面下部に横に配置（70px高） |

#### FR-DOCK-003: ナビゲーション項目

| 項目       | 内容                                    |
| ---------- | --------------------------------------- |
| **要件**   | 以下の5つのナビゲーション項目を表示する |
| **優先度** | Must                                    |

| アイコン       | ビュー名  | ツールチップ   | キーボードショートカット |
| -------------- | --------- | -------------- | ------------------------ |
| layout-grid    | Dashboard | ダッシュボード | Cmd/Ctrl + 1             |
| folder-tree    | Editor    | ファイル管理   | Cmd/Ctrl + 2             |
| message-circle | Chat      | AIチャット     | Cmd/Ctrl + 3             |
| network        | Graph     | グラフ         | Cmd/Ctrl + 4             |
| user-avatar    | Settings  | 設定           | Cmd/Ctrl + ,             |

#### FR-DOCK-004: ロゴ表示

| 項目             | 内容                                                                                                                                       |
| ---------------- | ------------------------------------------------------------------------------------------------------------------------------------------ |
| **要件**         | デスクトップ表示時のみ、Dock上部にアプリロゴを表示する                                                                                     |
| **優先度**       | Should                                                                                                                                     |
| **受け入れ基準** | Given: ウィンドウ幅 >= 768px<br>When: App Dockが表示される<br>Then: 上部にapertureアイコンが表示され、ホバー時にスケールアニメーションする |

---

### 2.2 Dynamic Island (ステータス通知)

#### FR-ISLAND-001: ステータス表示

| 項目             | 内容                                                                                                              |
| ---------------- | ----------------------------------------------------------------------------------------------------------------- |
| **要件**         | 処理中および完了状態をDynamic Island形式で通知する                                                                |
| **優先度**       | Must                                                                                                              |
| **受け入れ基準** | Given: バックグラウンド処理が開始される<br>When: 処理状態が変化<br>Then: 画面上部中央にDynamic Islandが表示される |

#### FR-ISLAND-002: 表示状態

| 項目       | 内容                                               |
| ---------- | -------------------------------------------------- |
| **要件**   | 処理中と完了で異なる視覚的フィードバックを提供する |
| **優先度** | Must                                               |

| 状態   | アイコン | アニメーション | 自動非表示 |
| ------ | -------- | -------------- | ---------- |
| 処理中 | loader-2 | スピン（回転） | なし       |
| 完了   | check    | なし           | 2秒後      |

---

### 2.3 Glass Panel (コンテナ)

#### FR-GLASS-001: ビジュアルスタイル

| 項目       | 内容                                                              |
| ---------- | ----------------------------------------------------------------- |
| **要件**   | Spatial Design Systemに準拠した半透明ガラス風のコンテナを提供する |
| **優先度** | Must                                                              |

| プロパティ | 値                                  |
| ---------- | ----------------------------------- |
| 背景色     | rgba(30, 30, 30, 0.6)               |
| ボーダー   | 1px solid rgba(255, 255, 255, 0.1)  |
| ブラー     | backdrop-filter: blur(40px)         |
| シャドウ   | 0 20px 60px rgba(0,0,0,0.6)         |
| 角丸       | 24px（デスクトップ）/ 0（モバイル） |

---

## 3. Dashboard ビュー要件

### 3.1 概要

**目的**: システム全体の稼働状況とRAGステータスを一覧表示する

**レイアウト**: スクロール可能なグリッドレイアウト

### 3.2 機能要件

#### FR-DASH-001: ヘッダー表示

| 項目             | 内容                                                                                                                                                 |
| ---------------- | ---------------------------------------------------------------------------------------------------------------------------------------------------- |
| **要件**         | ダッシュボードのタイトルと説明を表示する                                                                                                             |
| **優先度**       | Must                                                                                                                                                 |
| **受け入れ基準** | Given: Dashboardビューが表示される<br>When: 画面がロードされる<br>Then: 「Dashboard」タイトルと「システム稼働状況とRAGステータス」の説明が表示される |

#### FR-DASH-002: 統計カード表示

| 項目       | 内容                                    |
| ---------- | --------------------------------------- |
| **要件**   | 4つの統計カードを水平グリッドで表示する |
| **優先度** | Must                                    |

| カード名    | 表示内容                               | カラー     |
| ----------- | -------------------------------------- | ---------- |
| Total Docs  | 総ドキュメント数                       | white      |
| RAG Indexed | インデックス済み数                     | green-400  |
| Pending     | 保留中の数                             | orange-400 |
| Storage     | ストレージ使用率（プログレスバー付き） | -          |

**レスポンシブ**:

- 1カラム: < 640px
- 2カラム: >= 640px, < 1024px
- 4カラム: >= 1024px

#### FR-DASH-003: アクティビティフィード

| 項目             | 内容                                                                                                                                                                       |
| ---------------- | -------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| **要件**         | 最近のアクティビティをリスト形式で表示する                                                                                                                                 |
| **優先度**       | Must                                                                                                                                                                       |
| **受け入れ基準** | Given: アクティビティデータが存在する<br>When: Dashboardビューが表示される<br>Then: アクティビティが時系列で表示され、各項目にドットインジケータ、テキスト、時刻が含まれる |

#### FR-DASH-004: モバイル設定アクセス

| 項目             | 内容                                                                                                           |
| ---------------- | -------------------------------------------------------------------------------------------------------------- |
| **要件**         | モバイル表示時、ヘッダーに設定へのショートカットボタンを表示する                                               |
| **優先度**       | Should                                                                                                         |
| **受け入れ基準** | Given: ウィンドウ幅 < 768px<br>When: Dashboardビューが表示される<br>Then: 右上に設定アイコンボタンが表示される |

---

## 4. Editor ビュー要件

### 4.1 概要

**目的**: ファイルシステムのナビゲーションとドキュメント編集機能を提供する

**レイアウト**: サイドバー + メインエディタの2カラム構成

### 4.2 機能要件

#### FR-EDIT-001: ファイルツリー表示

| 項目             | 内容                                                                                                                                                             |
| ---------------- | ---------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| **要件**         | 階層構造のファイルツリーをサイドバーに表示する                                                                                                                   |
| **優先度**       | Must                                                                                                                                                             |
| **受け入れ基準** | Given: ファイルシステムデータが存在する<br>When: Editorビューが表示される<br>Then: フォルダとファイルがインデント付きで表示され、フォルダは展開/折りたたみが可能 |

#### FR-EDIT-002: ファイル選択

| 項目             | 内容                                                                                                                                            |
| ---------------- | ----------------------------------------------------------------------------------------------------------------------------------------------- |
| **要件**         | ファイルをクリックして選択し、エディタに内容を表示する                                                                                          |
| **優先度**       | Must                                                                                                                                            |
| **受け入れ基準** | Given: ファイルツリーが表示されている<br>When: ファイルをクリック<br>Then: 選択されたファイルがハイライトされ、右側のエディタに内容が表示される |

#### FR-EDIT-003: フォルダ展開/折りたたみ

| 項目             | 内容                                                                                                                                                  |
| ---------------- | ----------------------------------------------------------------------------------------------------------------------------------------------------- |
| **要件**         | フォルダをクリックして子要素の表示/非表示を切り替える                                                                                                 |
| **優先度**       | Must                                                                                                                                                  |
| **受け入れ基準** | Given: フォルダがファイルツリーに表示されている<br>When: フォルダをクリック<br>Then: 子要素の表示が切り替わり、アイコンがfolder/folder-openに変化する |

#### FR-EDIT-004: テキストエディタ

| 項目       | 内容                                                         |
| ---------- | ------------------------------------------------------------ |
| **要件**   | 選択されたファイルの内容を編集可能なテキストエリアで表示する |
| **優先度** | Must                                                         |

| プロパティ       | 値                    |
| ---------------- | --------------------- |
| フォント         | monospace             |
| 背景             | 透明                  |
| 行間             | relaxed               |
| プレースホルダー | 「ファイルを選択...」 |

#### FR-EDIT-005: 自動保存

| 項目             | 内容                                                                                                                                     |
| ---------------- | ---------------------------------------------------------------------------------------------------------------------------------------- |
| **要件**         | エディタ内容の変更を検知し、デバウンス付きで自動保存する                                                                                 |
| **優先度**       | Must                                                                                                                                     |
| **受け入れ基準** | Given: ファイルが編集されている<br>When: 入力が停止してから800ms経過<br>Then: 自動保存が実行され、Dynamic Islandに「Synced」と表示される |

#### FR-EDIT-006: ドキュメントタイトル表示

| 項目             | 内容                                                                                                                      |
| ---------------- | ------------------------------------------------------------------------------------------------------------------------- |
| **要件**         | 選択中のファイル名をエディタヘッダーに表示する                                                                            |
| **優先度**       | Must                                                                                                                      |
| **受け入れ基準** | Given: ファイルが選択されている<br>When: エディタが表示される<br>Then: ヘッダーにファイルアイコンとファイル名が表示される |

#### FR-EDIT-007: モバイルドロワー

| 項目             | 内容                                                                                                                              |
| ---------------- | --------------------------------------------------------------------------------------------------------------------------------- |
| **要件**         | モバイル表示時、ファイルツリーをスライドインドロワーとして表示する                                                                |
| **優先度**       | Must                                                                                                                              |
| **受け入れ基準** | Given: ウィンドウ幅 < 768px<br>When: ハンバーガーメニューをクリック<br>Then: 左からファイルツリードロワーがスライドイン表示される |

#### FR-EDIT-008: ドロワーオーバーレイ

| 項目             | 内容                                                                                              |
| ---------------- | ------------------------------------------------------------------------------------------------- |
| **要件**         | ドロワー表示時、背景にオーバーレイを表示し、クリックで閉じる                                      |
| **優先度**       | Must                                                                                              |
| **受け入れ基準** | Given: モバイルドロワーが開いている<br>When: オーバーレイ部分をクリック<br>Then: ドロワーが閉じる |

#### FR-EDIT-009: AIアシスタントボタン

| 項目             | 内容                                                                                                        |
| ---------------- | ----------------------------------------------------------------------------------------------------------- |
| **要件**         | エディタヘッダーにAIチャットへのショートカットボタンを表示する                                              |
| **優先度**       | Should                                                                                                      |
| **受け入れ基準** | Given: Editorビューが表示されている<br>When: sparklesアイコンボタンをクリック<br>Then: Chatビューに遷移する |

#### FR-EDIT-010: RAGステータス表示

| 項目             | 内容                                                                                                                         |
| ---------------- | ---------------------------------------------------------------------------------------------------------------------------- |
| **要件**         | フォルダがRAGインデックス済みの場合、アイコンの色を変更する                                                                  |
| **優先度**       | Should                                                                                                                       |
| **受け入れ基準** | Given: フォルダにRAGフラグがtrue<br>When: ファイルツリーが表示される<br>Then: フォルダアイコンが青色（blue-400）で表示される |

---

## 5. Chat ビュー要件

### 5.1 概要

**目的**: RAGデータベースと連携したAIチャットインターフェースを提供する

**レイアウト**: チャット履歴 + 入力フィールドの縦積み構成

### 5.2 機能要件

#### FR-CHAT-001: チャット履歴表示

| 項目             | 内容                                                                                                                                                              |
| ---------------- | ----------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| **要件**         | ユーザーとAIのメッセージを時系列で表示する                                                                                                                        |
| **優先度**       | Must                                                                                                                                                              |
| **受け入れ基準** | Given: チャット履歴が存在する<br>When: Chatビューが表示される<br>Then: メッセージが送信順に表示され、ユーザーメッセージは右寄せ、AIメッセージは左寄せで表示される |

#### FR-CHAT-002: メッセージ送信

| 項目             | 内容                                                                                                                                           |
| ---------------- | ---------------------------------------------------------------------------------------------------------------------------------------------- |
| **要件**         | テキスト入力フィールドからメッセージを送信する                                                                                                 |
| **優先度**       | Must                                                                                                                                           |
| **受け入れ基準** | Given: テキストが入力されている<br>When: 送信ボタンをクリックまたはEnterキーを押す<br>Then: メッセージが送信され、入力フィールドがクリアされる |

#### FR-CHAT-003: AIレスポンス表示

| 項目             | 内容                                                                                                                            |
| ---------------- | ------------------------------------------------------------------------------------------------------------------------------- |
| **要件**         | AIからのレスポンスをチャット履歴に追加する                                                                                      |
| **優先度**       | Must                                                                                                                            |
| **受け入れ基準** | Given: メッセージが送信された<br>When: AIからレスポンスを受信<br>Then: AIメッセージがチャット履歴に追加され、自動スクロールする |

#### FR-CHAT-004: 送信中アニメーション

| 項目             | 内容                                                                                                             |
| ---------------- | ---------------------------------------------------------------------------------------------------------------- |
| **要件**         | メッセージ送信中は送信メッセージにローディングアニメーションを表示する                                           |
| **優先度**       | Should                                                                                                           |
| **受け入れ基準** | Given: メッセージが送信された<br>When: AIからの応答待ち<br>Then: 送信メッセージにpulseアニメーションが適用される |

#### FR-CHAT-005: 接続ステータス表示

| 項目             | 内容                                                                                                                           |
| ---------------- | ------------------------------------------------------------------------------------------------------------------------------ |
| **要件**         | ヘッダーにRAG接続ステータスを表示する                                                                                          |
| **優先度**       | Must                                                                                                                           |
| **受け入れ基準** | Given: Chatビューが表示される<br>When: RAG接続が確立されている<br>Then: 緑色のパルスドットと「AI Assistant」ラベルが表示される |

#### FR-CHAT-006: 初期メッセージ

| 項目             | 内容                                                                                                                                                 |
| ---------------- | ---------------------------------------------------------------------------------------------------------------------------------------------------- |
| **要件**         | チャット開始時に初期メッセージを表示する                                                                                                             |
| **優先度**       | Should                                                                                                                                               |
| **受け入れ基準** | Given: Chatビューが初めて表示される<br>When: チャット履歴が空<br>Then: 「こんにちは。RAGデータベースと接続済みです。」というAIメッセージが表示される |

#### FR-CHAT-007: モバイル入力フィールド固定

| 項目             | 内容                                                                                                                              |
| ---------------- | --------------------------------------------------------------------------------------------------------------------------------- |
| **要件**         | モバイル表示時、入力フィールドを画面下部に固定する                                                                                |
| **優先度**       | Must                                                                                                                              |
| **受け入れ基準** | Given: ウィンドウ幅 < 768px<br>When: Chatビューが表示される<br>Then: 入力フィールドが画面下部に固定され、App Dockの上に配置される |

---

## 6. Graph ビュー要件

### 6.1 概要

**目的**: ナレッジグラフをCanvas上に可視化する

**レイアウト**: フルスクリーンCanvas

### 6.2 機能要件

#### FR-GRAPH-001: Canvas描画

| 項目             | 内容                                                                                                          |
| ---------------- | ------------------------------------------------------------------------------------------------------------- |
| **要件**         | HTML5 Canvasを使用してグラフを描画する                                                                        |
| **優先度**       | Must                                                                                                          |
| **受け入れ基準** | Given: グラフデータが存在する<br>When: Graphビューが表示される<br>Then: CanvasがViewContainer全体に表示される |

#### FR-GRAPH-002: ノード表示

| 項目       | 内容                           |
| ---------- | ------------------------------ |
| **要件**   | グラフのノードを円形で描画する |
| **優先度** | Must                           |

| ノードタイプ | 色                    | サイズ           |
| ------------ | --------------------- | ---------------- |
| main         | #0a84ff (accent)      | ノードのsize属性 |
| その他       | rgba(255,255,255,0.8) | ノードのsize属性 |

#### FR-GRAPH-003: エッジ表示

| 項目             | 内容                                                                                                                |
| ---------------- | ------------------------------------------------------------------------------------------------------------------- |
| **要件**         | ノード間の接続をラインで描画する                                                                                    |
| **優先度**       | Must                                                                                                                |
| **受け入れ基準** | Given: リンクデータが存在する<br>When: グラフが描画される<br>Then: sourceノードとtargetノード間にラインが描画される |

| プロパティ | 値                    |
| ---------- | --------------------- |
| 色         | rgba(100,100,255,0.2) |
| 幅         | 1px                   |

#### FR-GRAPH-004: アニメーション

| 項目             | 内容                                                                                                                                          |
| ---------------- | --------------------------------------------------------------------------------------------------------------------------------------------- |
| **要件**         | ノードが自動的に移動するアニメーションを実装する                                                                                              |
| **優先度**       | Should                                                                                                                                        |
| **受け入れ基準** | Given: グラフが描画されている<br>When: アニメーションフレームが実行される<br>Then: ノードが速度ベクトルに基づいて移動し、Canvas境界で反転する |

#### FR-GRAPH-005: リサイズ対応

| 項目             | 内容                                                                                                                                 |
| ---------------- | ------------------------------------------------------------------------------------------------------------------------------------ |
| **要件**         | ウィンドウリサイズ時にCanvasサイズを調整する                                                                                         |
| **優先度**       | Must                                                                                                                                 |
| **受け入れ基準** | Given: Graphビューが表示されている<br>When: ウィンドウサイズが変更される<br>Then: Canvasが親コンテナのサイズに合わせてリサイズされる |

#### FR-GRAPH-006: リフレッシュボタン

| 項目             | 内容                                                                                                     |
| ---------------- | -------------------------------------------------------------------------------------------------------- |
| **要件**         | グラフを再生成するリフレッシュボタンを表示する                                                           |
| **優先度**       | Should                                                                                                   |
| **受け入れ基準** | Given: Graphビューが表示されている<br>When: リフレッシュボタンをクリック<br>Then: グラフが再初期化される |

#### FR-GRAPH-007: タイトルオーバーレイ

| 項目             | 内容                                                                                                                 |
| ---------------- | -------------------------------------------------------------------------------------------------------------------- |
| **要件**         | Canvas上に「Graph」タイトルをオーバーレイ表示する                                                                    |
| **優先度**       | Should                                                                                                               |
| **受け入れ基準** | Given: Graphビューが表示される<br>When: 画面がロードされる<br>Then: 左上にドロップシャドウ付きのタイトルが表示される |

---

## 7. Settings ビュー要件

### 7.1 概要

**目的**: ユーザー設定とAPIキー管理を提供する

**レイアウト**: カード形式の設定項目

### 7.2 機能要件

#### FR-SET-001: ユーザープロフィール表示

| 項目             | 内容                                                                                                                                                                |
| ---------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| **要件**         | ユーザーのアバター、名前、メールアドレス、プランを表示する                                                                                                          |
| **優先度**       | Must                                                                                                                                                                |
| **受け入れ基準** | Given: ユーザーデータが存在する<br>When: Settingsビューが表示される<br>Then: プロフィールカードにアバター画像、ユーザー名、メールアドレス、プランバッジが表示される |

#### FR-SET-002: APIキー設定

| 項目             | 内容                                                                                                                                    |
| ---------------- | --------------------------------------------------------------------------------------------------------------------------------------- |
| **要件**         | APIキーの表示と編集を提供する                                                                                                           |
| **優先度**       | Must                                                                                                                                    |
| **受け入れ基準** | Given: Settingsビューが表示される<br>When: APIキーセクションを確認<br>Then: パスワードタイプの入力フィールドにAPIキーがマスク表示される |

#### FR-SET-003: 自動同期トグル

| 項目             | 内容                                                                                                               |
| ---------------- | ------------------------------------------------------------------------------------------------------------------ |
| **要件**         | 自動同期機能のオン/オフを切り替える                                                                                |
| **優先度**       | Should                                                                                                             |
| **受け入れ基準** | Given: Settingsビューが表示される<br>When: Auto-Syncチェックボックスを切り替える<br>Then: 自動同期設定が変更される |

#### FR-SET-004: 保存ボタン

| 項目             | 内容                                                                                                                     |
| ---------------- | ------------------------------------------------------------------------------------------------------------------------ |
| **要件**         | 設定を保存するボタンを提供する                                                                                           |
| **優先度**       | Must                                                                                                                     |
| **受け入れ基準** | Given: 設定が変更されている<br>When: Saveボタンをクリック<br>Then: 設定が保存され、Dynamic Islandに「Saved」と表示される |

---

## 8. Electron固有の要件

### 8.1 メニューバー

#### FR-ELECTRON-001: macOSメニューバー

| 項目       | 内容                                      |
| ---------- | ----------------------------------------- |
| **要件**   | macOS HIGに準拠したメニューバーを実装する |
| **優先度** | Must                                      |

| メニュー         | 項目                                                                              |
| ---------------- | --------------------------------------------------------------------------------- |
| Knowledge Studio | About, Preferences (Cmd+,), Quit (Cmd+Q)                                          |
| File             | New (Cmd+N), Open (Cmd+O), Save (Cmd+S), Close (Cmd+W)                            |
| Edit             | Undo (Cmd+Z), Redo (Cmd+Shift+Z), Cut, Copy, Paste, Select All                    |
| View             | Dashboard (Cmd+1), Editor (Cmd+2), Chat (Cmd+3), Graph (Cmd+4), Toggle Fullscreen |
| Window           | Minimize, Zoom                                                                    |
| Help             | Documentation, Support                                                            |

### 8.2 ウィンドウ管理

#### FR-ELECTRON-002: 最小ウィンドウサイズ

| 項目       | 内容                             |
| ---------- | -------------------------------- |
| **要件**   | ウィンドウの最小サイズを設定する |
| **優先度** | Must                             |

| プロパティ | 値    |
| ---------- | ----- |
| 最小幅     | 800px |
| 最小高さ   | 600px |

#### FR-ELECTRON-003: ウィンドウ状態の永続化

| 項目       | 内容                                                                 |
| ---------- | -------------------------------------------------------------------- |
| **要件**   | ウィンドウの位置とサイズをアプリ終了時に保存し、次回起動時に復元する |
| **優先度** | Should                                                               |

### 8.3 タイトルバー

#### FR-ELECTRON-004: カスタムタイトルバー

| 項目       | 内容                                                                  |
| ---------- | --------------------------------------------------------------------- |
| **要件**   | macOSではネイティブタイトルバーを非表示にし、コンテンツ領域を拡張する |
| **優先度** | Should                                                                |

| プロパティ           | 値               |
| -------------------- | ---------------- |
| titleBarStyle        | hiddenInset      |
| trafficLightPosition | { x: 20, y: 20 } |

---

## 9. レスポンシブ対応

### 9.1 ブレイクポイント

| ブレイクポイント | 幅        | レイアウト変更                           |
| ---------------- | --------- | ---------------------------------------- |
| Mobile           | < 768px   | App Dock下部配置、ドロワーナビゲーション |
| Tablet           | >= 768px  | App Dock左サイドバー、2カラムレイアウト  |
| Desktop          | >= 1024px | フルレイアウト、4カラムグリッド          |

### 9.2 レイアウト変更詳細

#### FR-RESPONSIVE-001: App Dock配置変更

| 条件        | 配置                           |
| ----------- | ------------------------------ |
| 幅 >= 768px | 左サイドバー（80px幅、縦配置） |
| 幅 < 768px  | 画面下部（70px高、横配置）     |

#### FR-RESPONSIVE-002: View Container調整

| 条件        | 調整                          |
| ----------- | ----------------------------- |
| 幅 >= 768px | 角丸24px、左に120pxのマージン |
| 幅 < 768px  | 角丸0、下に100pxのパディング  |

---

## 10. 非機能要件

### 10.1 パフォーマンス

| 要件ID       | 要件               | 基準値              |
| ------------ | ------------------ | ------------------- |
| NFR-PERF-001 | ビュー切り替え     | < 100ms             |
| NFR-PERF-002 | グラフ描画FPS      | >= 30fps            |
| NFR-PERF-003 | 自動保存遅延       | 800ms（デバウンス） |
| NFR-PERF-004 | Dynamic Island表示 | < 50ms              |

### 10.2 アクセシビリティ

| 要件ID       | 要件                     | 基準                             |
| ------------ | ------------------------ | -------------------------------- |
| NFR-A11Y-001 | キーボードナビゲーション | 全機能がキーボードでアクセス可能 |
| NFR-A11Y-002 | コントラスト比           | WCAG 2.1 AA（4.5:1以上）         |
| NFR-A11Y-003 | フォーカス表示           | 可視的なフォーカスインジケータ   |
| NFR-A11Y-004 | スクリーンリーダー       | ARIA属性の適切な使用             |

### 10.3 アニメーション

| 要件ID       | 要件               | 設定                                         |
| ------------ | ------------------ | -------------------------------------------- |
| NFR-ANIM-001 | イージング         | cubic-bezier(0.2, 0.8, 0.2, 1)               |
| NFR-ANIM-002 | ビュー切り替え     | 400ms、scale(0.98) → scale(1)、opacity 0 → 1 |
| NFR-ANIM-003 | Dynamic Island     | 300ms、height/opacity変化                    |
| NFR-ANIM-004 | reduced-motion対応 | prefers-reduced-motionで簡略化               |

---

## 11. 検証チェックリスト

### 11.1 完了条件

- [x] 5つのビュー（Dashboard、Editor、Chat、Graph、Settings）の機能が定義されている
- [x] 各ビューのUI要素とインタラクションが明確化されている
- [x] レスポンシブ対応（ウィンドウサイズ変更時）の挙動が定義されている
- [x] Electron固有の要件（メニューバー、ショートカット）が定義されている

### 11.2 次フェーズへの引き継ぎ

- **T-00-2（状態管理要件定義）**: 各ビューの状態要件を本ドキュメントから抽出
- **T-00-3（IPC通信要件定義）**: ファイル操作、設定保存等のIPC要件を抽出
- **T-01-1（コンポーネント設計）**: UI要素をAtomic Designに分解
- **T-01-2（Design Tokens設計）**: Spatial Design Systemのトークン化

---

## 更新履歴

| バージョン | 日付       | 変更内容 | 担当         |
| ---------- | ---------- | -------- | ------------ |
| 1.0.0      | 2024-12-08 | 初版作成 | @req-analyst |
