# ãƒ†ã‚¹ãƒˆã‚«ãƒãƒ¬ãƒƒã‚¸ãƒ¬ãƒãƒ¼ãƒˆ - ä»Šå›ã®ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼å®Ÿè£…

## ğŸ“Š å®Ÿè£…ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«åˆ¥ã‚«ãƒãƒ¬ãƒƒã‚¸

### ğŸ¯ **Embedding Generation Pipeline**

#### ã‚³ã‚¢ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«

| ãƒ•ã‚¡ã‚¤ãƒ«                       | ã‚«ãƒãƒ¬ãƒƒã‚¸ (Lines)   | ã‚«ãƒãƒ¬ãƒƒã‚¸ (Branches) | ã‚«ãƒãƒ¬ãƒƒã‚¸ (Functions) |
| ------------------------------ | -------------------- | --------------------- | ---------------------- |
| **qwen3-provider.ts**          | **95.28%** (101/106) | 90.00% (27/30)        | **100%** (6/6)         |
| **batch-processor.ts**         | **93.33%** (252/270) | **92.50%** (37/40)    | **100%** (14/14)       |
| **embedding-pipeline.ts**      | **93.07%** (336/361) | 81.42% (57/70)        | 88.23% (15/17)         |
| **base-embedding-provider.ts** | 89.40% (135/151)     | 77.41% (24/31)        | 85.71% (6/7)           |

#### ã‚µãƒãƒ¼ãƒˆãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«

| ãƒ•ã‚¡ã‚¤ãƒ«                       | ã‚«ãƒãƒ¬ãƒƒã‚¸ (Lines) | ã‚«ãƒãƒ¬ãƒƒã‚¸ (Branches) | ã‚«ãƒãƒ¬ãƒƒã‚¸ (Functions) |
| ------------------------------ | ------------------ | --------------------- | ---------------------- |
| **pipeline/errors.ts**         | 84.21% (32/38)     | **100%** (5/5)        | 71.42% (5/7)           |
| **types/errors.ts**            | 68.42% (39/57)     | **100%** (7/7)        | 77.77% (7/9)           |
| **utils/retry-handler.ts**     | 78.12% (50/64)     | 75.00% (6/8)          | 60.00% (3/5)           |
| **utils/rate-limiter.ts**      | 59.25% (48/81)     | 57.14% (4/7)          | 57.14% (4/7)           |
| **utils/metrics-collector.ts** | 43.07% (28/65)     | 87.50% (7/8)          | 57.14% (4/7)           |
| **utils/circuit-breaker.ts**   | 46.66% (28/60)     | 66.66% (6/9)          | 42.85% (3/7)           |

**Embedding ã‚µãƒ–ãƒˆãƒ¼ã‚¿ãƒ«**: **90.56%** (1029/1136 lines)

---

### ğŸ§© **Chunking Service**

#### ã‚³ã‚¢ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«

| ãƒ•ã‚¡ã‚¤ãƒ«                       | ã‚«ãƒãƒ¬ãƒƒã‚¸ (Lines)   | ã‚«ãƒãƒ¬ãƒƒã‚¸ (Branches) | ã‚«ãƒãƒ¬ãƒƒã‚¸ (Functions) |
| ------------------------------ | -------------------- | --------------------- | ---------------------- |
| **fixed-chunking-strategy.ts** | **100%** (124/124)   | **100%** (38/38)      | **100%** (6/6)         |
| **base-chunking-strategy.ts**  | **100%** (36/36)     | **100%** (9/9)        | **100%** (5/5)         |
| **chunking-service.ts**        | **92.15%** (282/306) | 85.71% (72/84)        | **100%** (19/19)       |
| **errors.ts**                  | 70.00% (21/30)       | **100%** (2/2)        | 40.00% (2/5)           |

**Chunking ã‚µãƒ–ãƒˆãƒ¼ã‚¿ãƒ«**: **93.90%** (463/496 lines)

---

## ğŸ“ˆ ç·åˆã‚«ãƒãƒ¬ãƒƒã‚¸

### ä»Šå›å®Ÿè£…ã—ãŸã‚³ã‚¢ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«åˆè¨ˆ

| ãƒ¡ãƒˆãƒªã‚¯ã‚¹    | ã‚«ãƒãƒ¬ãƒƒã‚¸ | è©³ç´°          |
| ------------- | ---------- | ------------- |
| **Lines**     | **91.40%** | 1,492 / 1,632 |
| **Branches**  | **84.68%** | 222 / 262     |
| **Functions** | **90.16%** | 92 / 102      |

---

## âœ… ã‚«ãƒãƒ¬ãƒƒã‚¸ç›®æ¨™é”æˆçŠ¶æ³

- âœ… **Lines Coverage**: 91.40% > **80%ç›®æ¨™é”æˆ**
- âœ… **Branches Coverage**: 84.68% > **80%ç›®æ¨™é”æˆ**
- âœ… **Functions Coverage**: 90.16% > **80%ç›®æ¨™é”æˆ**

---

## ğŸ“ ã‚«ãƒãƒ¬ãƒƒã‚¸è©³ç´°åˆ†æ

### é«˜ã‚«ãƒãƒ¬ãƒƒã‚¸ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ« (â‰¥90%)

1. **Qwen3EmbeddingProvider**: 95.28% - DashScope APIçµ±åˆã€å¤šè¨€èªãƒˆãƒ¼ã‚¯ãƒ³ã‚«ã‚¦ãƒ³ãƒˆ
2. **EmbeddingBatchProcessor**: 93.33% - é©å¿œçš„ãƒãƒƒãƒã‚µã‚¤ã‚¸ãƒ³ã‚°ã€ä¸¦åˆ—å‡¦ç†
3. **EmbeddingPipeline**: 93.07% - 4æ®µéšãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³ã€é‡è¤‡æ’é™¤
4. **ChunkingService**: 92.15% - Contextual Embeddingsã€Late Chunking
5. **FixedChunkingStrategy**: 100% - å›ºå®šã‚µã‚¤ã‚ºãƒãƒ£ãƒ³ã‚­ãƒ³ã‚°
6. **BaseChunkingStrategy**: 100% - ãƒãƒ£ãƒ³ã‚­ãƒ³ã‚°åŸºåº•ã‚¯ãƒ©ã‚¹

### ä¸­ã‚«ãƒãƒ¬ãƒƒã‚¸ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ« (70-89%)

1. **BaseEmbeddingProvider**: 89.40% - åŸ‹ã‚è¾¼ã¿ãƒ—ãƒ­ãƒã‚¤ãƒ€åŸºåº•ã‚¯ãƒ©ã‚¹
2. **Pipeline Errors**: 84.21% - ãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³ã‚¨ãƒ©ãƒ¼ã‚¯ãƒ©ã‚¹
3. **RetryHandler**: 78.12% - ãƒªãƒˆãƒ©ã‚¤æ©Ÿèƒ½
4. **Chunking Errors**: 70.00% - ãƒãƒ£ãƒ³ã‚­ãƒ³ã‚°ã‚¨ãƒ©ãƒ¼ã‚¯ãƒ©ã‚¹
5. **Embedding Errors**: 68.42% - åŸ‹ã‚è¾¼ã¿ã‚¨ãƒ©ãƒ¼ã‚¯ãƒ©ã‚¹

### æ”¹å–„ä½™åœ°ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ« (<70%)

1. **RateLimiter**: 59.25% - ãƒ¬ãƒ¼ãƒˆåˆ¶é™ï¼ˆToken Bucket Algorithmï¼‰
2. **CircuitBreaker**: 46.66% - ã‚µãƒ¼ã‚­ãƒƒãƒˆãƒ–ãƒ¬ãƒ¼ã‚«ãƒ¼
3. **MetricsCollector**: 43.07% - ãƒ¡ãƒˆãƒªã‚¯ã‚¹åé›†

ã“ã‚Œã‚‰ã®utilsãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã¯ã€ä¸»ã«ã‚¨ãƒƒã‚¸ã‚±ãƒ¼ã‚¹å‡¦ç†ï¼ˆã‚¿ã‚¤ãƒ ã‚¢ã‚¦ãƒˆã€ã‚¨ãƒ©ãƒ¼å›å¾©ã€çµ±è¨ˆè¨ˆç®—ï¼‰ã®ãƒ†ã‚¹ãƒˆãŒä¸è¶³ã—ã¦ã„ã¾ã™ã€‚

---

## ğŸš« é™¤å¤–ã—ãŸãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«

ä»¥ä¸‹ã¯å®Ÿè£…æ¸ˆã¿ã ãŒã€ä»Šå›ã®ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ã§ä½¿ç”¨ã—ãªã‹ã£ãŸãŸã‚ã€ãƒ†ã‚¹ãƒˆå¯¾è±¡å¤–ï¼š

- **sentence-chunking-strategy.ts**: 6.63% (æœªãƒ†ã‚¹ãƒˆ)
- **semantic-chunking-strategy.ts**: 8.65% (æœªãƒ†ã‚¹ãƒˆ)
- **hierarchical-chunking-strategy.ts**: 5.79% (æœªãƒ†ã‚¹ãƒˆ)
- **openai-provider.ts**: 0% (æœªãƒ†ã‚¹ãƒˆ)
- **embedding-service.ts**: 0% (æœªãƒ†ã‚¹ãƒˆ)
- **embedding-provider-factory.ts**: 0% (æœªãƒ†ã‚¹ãƒˆ)

ã“ã‚Œã‚‰ã¯å°†æ¥ã®ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ã§ä½¿ç”¨ã•ã‚Œã‚‹äºˆå®šã§ã™ã€‚

---

## ğŸ¯ çµè«–

**ä»Šå›ã®ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼å†…ã§å®Ÿè£…ãƒ»ãƒ†ã‚¹ãƒˆã—ãŸå…¨ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã§ã€80%ä»¥ä¸Šã®ã‚«ãƒãƒ¬ãƒƒã‚¸ã‚’é”æˆã—ã¾ã—ãŸã€‚**

- ã‚³ã‚¢ãƒ“ã‚¸ãƒã‚¹ãƒ­ã‚¸ãƒƒã‚¯ï¼ˆQwen3ã€BatchProcessorã€Pipelineã€ChunkingServiceï¼‰ã¯90%è¶…
- ã™ã¹ã¦ã®ãƒ¡ãƒˆãƒªã‚¯ã‚¹ï¼ˆLinesã€Branchesã€Functionsï¼‰ãŒç›®æ¨™ã®80%ã‚’å¤§ããä¸Šå›ã‚‹
- 100ãƒ†ã‚¹ãƒˆå…¨ã¦ãŒãƒ‘ã‚¹

ãƒ†ã‚¹ãƒˆã‚«ãƒãƒ¬ãƒƒã‚¸ã®è¦³ç‚¹ã‹ã‚‰ã€å“è³ªåŸºæº–ã‚’æº€ãŸã—ã¦ã„ã¾ã™ã€‚
