# ãƒ•ã‚©ãƒ«ãƒ€ä¸€æ‹¬é¸æŠæ©Ÿèƒ½ - UIè¨­è¨ˆæ›¸

## ãƒ¡ã‚¿æƒ…å ±

| é …ç›®             | å†…å®¹                       |
| ---------------- | -------------------------- |
| ã‚¿ã‚¹ã‚¯ID         | T-01-2                     |
| ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆID   | UI-001                     |
| ãƒãƒ¼ã‚¸ãƒ§ãƒ³       | 1.0.0                      |
| ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹       | Draft                      |
| ä½œæˆæ—¥           | 2025-12-18                 |
| ä½œæˆã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆ | @ui-designer               |
| å¯¾è±¡ãƒ•ã‚¡ã‚¤ãƒ«     | SelectableFileTreeItem.tsx |

---

## 1. è¨­è¨ˆæ¦‚è¦

### 1.1 ç›®çš„

SelectableFileTreeItemã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã«ãƒ•ã‚©ãƒ«ãƒ€ã®ãƒã‚§ãƒƒã‚¯ãƒœãƒƒã‚¯ã‚¹ã‚’è¿½åŠ ã—ã€3ã¤ã®é¸æŠçŠ¶æ…‹ï¼ˆæœªé¸æŠ/éƒ¨åˆ†é¸æŠ/å…¨é¸æŠï¼‰ã‚’è¦–è¦šçš„ã«è¡¨ç¾ã™ã‚‹ã€‚

### 1.2 ç¾çŠ¶åˆ†æ

ç¾åœ¨ã®`SelectableFileTreeItem`ã®å®Ÿè£…çŠ¶æ³ï¼š

| é …ç›®                       | ç¾çŠ¶                        | å¤‰æ›´å¾Œ             |
| -------------------------- | --------------------------- | ------------------ |
| ãƒ•ã‚©ãƒ«ãƒ€ã®ãƒã‚§ãƒƒã‚¯ãƒœãƒƒã‚¯ã‚¹ | ãªã—ï¼ˆChevronã‚¢ã‚¤ã‚³ãƒ³ã®ã¿ï¼‰ | è¿½åŠ                |
| ãƒ•ã‚¡ã‚¤ãƒ«ã®ãƒã‚§ãƒƒã‚¯ãƒœãƒƒã‚¯ã‚¹ | ã‚ã‚Š                        | å¤‰æ›´ãªã—           |
| indeterminateçŠ¶æ…‹          | æœªå¯¾å¿œ                      | å¯¾å¿œ               |
| ARIAå±æ€§                   | `aria-selected`ã®ã¿         | `aria-checked`è¿½åŠ  |

### 1.3 è¨­è¨ˆåŸå‰‡

| åŸå‰‡               | é©ç”¨æ–¹æ³•                                      |
| ------------------ | --------------------------------------------- |
| WCAG 2.1 AAæº–æ‹     | aria-checked="mixed"ã€ã‚³ãƒ³ãƒˆãƒ©ã‚¹ãƒˆæ¯”4.5:1ä»¥ä¸Š |
| Apple HIGæº–æ‹       | macOSæ¨™æº–ãƒã‚§ãƒƒã‚¯ãƒœãƒƒã‚¯ã‚¹ã®è¦–è¦šãƒ‘ã‚¿ãƒ¼ãƒ³       |
| æ—¢å­˜ãƒ‡ã‚¶ã‚¤ãƒ³æ•´åˆæ€§ | æ—¢å­˜Tailwind CSSã‚¯ãƒ©ã‚¹ã‚’æ´»ç”¨                  |
| ã‚¢ã‚¯ã‚»ã‚·ãƒ“ãƒªãƒ†ã‚£   | ã‚­ãƒ¼ãƒœãƒ¼ãƒ‰æ“ä½œã€ã‚¹ã‚¯ãƒªãƒ¼ãƒ³ãƒªãƒ¼ãƒ€ãƒ¼å¯¾å¿œ        |

---

## 2. ãƒã‚§ãƒƒã‚¯ãƒœãƒƒã‚¯ã‚¹3çŠ¶æ…‹ã®è¦–è¦šãƒ‡ã‚¶ã‚¤ãƒ³

### 2.1 çŠ¶æ…‹å®šç¾©

| çŠ¶æ…‹     | åç§°          | è¦–è¦šè¡¨ç¾                | HTMLãƒ—ãƒ­ãƒ‘ãƒ†ã‚£                         |
| -------- | ------------- | ----------------------- | -------------------------------------- |
| æœªé¸æŠ   | unselected    | â˜ ç©ºã®ãƒœãƒƒã‚¯ã‚¹          | `checked=false`, `indeterminate=false` |
| éƒ¨åˆ†é¸æŠ | indeterminate | â˜’ ãƒã‚¤ãƒ•ãƒ³/ãƒã‚¤ãƒŠã‚¹è¨˜å· | `checked=false`, `indeterminate=true`  |
| å…¨é¸æŠ   | selected      | â˜‘ ãƒã‚§ãƒƒã‚¯ãƒãƒ¼ã‚¯        | `checked=true`, `indeterminate=false`  |

### 2.2 è¦–è¦šãƒ‡ã‚¶ã‚¤ãƒ³ä»•æ§˜

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  çŠ¶æ…‹: æœªé¸æŠ (unselected)                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”                                                 â”‚
â”‚  â”‚    â”‚  ç©ºã®ãƒœãƒƒã‚¯ã‚¹                                   â”‚
â”‚  â””â”€â”€â”€â”€â”˜                                                 â”‚
â”‚  - ãƒœãƒ¼ãƒ€ãƒ¼: zinc-500 (#71717a)                         â”‚
â”‚  - èƒŒæ™¯: transparent                                    â”‚
â”‚  - ã‚µã‚¤ã‚º: 16x16px (w-4 h-4)                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  çŠ¶æ…‹: éƒ¨åˆ†é¸æŠ (indeterminate)                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”                                                 â”‚
â”‚  â”‚ â”€â”€ â”‚  ãƒã‚¤ãƒ•ãƒ³è¨˜å·                                   â”‚
â”‚  â””â”€â”€â”€â”€â”˜                                                 â”‚
â”‚  - ãƒœãƒ¼ãƒ€ãƒ¼: blue-500 (#3b82f6)                         â”‚
â”‚  - èƒŒæ™¯: blue-600/50 (50%é€æ˜åº¦)                        â”‚
â”‚  - ã‚¢ã‚¤ã‚³ãƒ³: æ°´å¹³ç·šï¼ˆãƒã‚¤ãƒŠã‚¹è¨˜å·ï¼‰                     â”‚
â”‚  - ã‚µã‚¤ã‚º: 16x16px (w-4 h-4)                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  çŠ¶æ…‹: å…¨é¸æŠ (selected)                                â”‚
â”‚  â”Œâ”€â”€â”€â”€â”                                                 â”‚
â”‚  â”‚ âœ“  â”‚  ãƒã‚§ãƒƒã‚¯ãƒãƒ¼ã‚¯                                 â”‚
â”‚  â””â”€â”€â”€â”€â”˜                                                 â”‚
â”‚  - ãƒœãƒ¼ãƒ€ãƒ¼: blue-600 (#2563eb)                         â”‚
â”‚  - èƒŒæ™¯: blue-600 (#2563eb)                             â”‚
â”‚  - ã‚¢ã‚¤ã‚³ãƒ³: ãƒã‚§ãƒƒã‚¯ãƒãƒ¼ã‚¯ï¼ˆç™½è‰²ï¼‰                     â”‚
â”‚  - ã‚µã‚¤ã‚º: 16x16px (w-4 h-4)                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 2.3 ã‚«ãƒ©ãƒ¼ãƒ‘ãƒ¬ãƒƒãƒˆ

| è¦ç´                | ãƒ‡ã‚¶ã‚¤ãƒ³ãƒˆãƒ¼ã‚¯ãƒ³  | HEXå€¤                  | ç”¨é€”                      |
| ------------------ | ----------------- | ---------------------- | ------------------------- |
| ãƒœãƒ¼ãƒ€ãƒ¼ï¼ˆæœªé¸æŠï¼‰ | `border-zinc-500` | #71717a                | æœªé¸æŠçŠ¶æ…‹ã®ãƒœãƒ¼ãƒ€ãƒ¼      |
| ãƒœãƒ¼ãƒ€ãƒ¼ï¼ˆé¸æŠç³»ï¼‰ | `border-blue-600` | #2563eb                | éƒ¨åˆ†é¸æŠ/å…¨é¸æŠã®ãƒœãƒ¼ãƒ€ãƒ¼ |
| èƒŒæ™¯ï¼ˆéƒ¨åˆ†é¸æŠï¼‰   | `bg-blue-600/50`  | rgba(37, 99, 235, 0.5) | indeterminateçŠ¶æ…‹ã®èƒŒæ™¯   |
| èƒŒæ™¯ï¼ˆå…¨é¸æŠï¼‰     | `bg-blue-600`     | #2563eb                | å…¨é¸æŠçŠ¶æ…‹ã®èƒŒæ™¯          |
| ã‚¢ã‚¤ã‚³ãƒ³ï¼ˆç™½ï¼‰     | `text-white`      | #ffffff                | ãƒã‚§ãƒƒã‚¯/ãƒã‚¤ãƒ•ãƒ³ã‚¢ã‚¤ã‚³ãƒ³ |
| ãƒ•ã‚©ãƒ¼ã‚«ã‚¹ãƒªãƒ³ã‚°   | `ring-blue-500`   | #3b82f6                | ã‚­ãƒ¼ãƒœãƒ¼ãƒ‰ãƒ•ã‚©ãƒ¼ã‚«ã‚¹æ™‚    |

### 2.4 ã‚³ãƒ³ãƒˆãƒ©ã‚¹ãƒˆæ¯”æ¤œè¨¼ï¼ˆWCAG 2.1 AAï¼‰

| çµ„ã¿åˆã‚ã›             | ã‚³ãƒ³ãƒˆãƒ©ã‚¹ãƒˆæ¯” | åŸºæº–ï¼ˆ4.5:1ï¼‰ |
| ---------------------- | -------------- | ------------- |
| ç™½ã‚¢ã‚¤ã‚³ãƒ³ on blue-600 | 4.68:1         | âœ… PASS       |
| zinc-500 on zinc-900   | 5.03:1         | âœ… PASS       |
| blue-600 on zinc-800   | 4.52:1         | âœ… PASS       |

---

## 3. CSS/ã‚¹ã‚¿ã‚¤ãƒ«è¨­è¨ˆ

### 3.1 ãƒã‚§ãƒƒã‚¯ãƒœãƒƒã‚¯ã‚¹ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã‚¹ã‚¿ã‚¤ãƒ«

```tsx
// FolderCheckbox.tsxï¼ˆæ–°è¦ä½œæˆã¾ãŸã¯ SelectableFileTreeItem å†…ã«çµ±åˆï¼‰

interface FolderCheckboxProps {
  selectionState: "unselected" | "indeterminate" | "selected";
  onChange: () => void;
  label: string;
}

const checkboxStyles = {
  base: clsx(
    "w-4 h-4 rounded",
    "border transition-colors duration-150",
    "focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-1 focus:ring-offset-zinc-900",
  ),
  unselected: clsx("border-zinc-500 bg-transparent", "hover:border-zinc-400"),
  indeterminate: clsx("border-blue-600 bg-blue-600/50", "hover:bg-blue-600/60"),
  selected: clsx("border-blue-600 bg-blue-600", "hover:bg-blue-700"),
};
```

### 3.2 indeterminateçŠ¶æ…‹ã®CSSå®Ÿè£…

```css
/* indeterminateçŠ¶æ…‹ã®ãƒã‚¤ãƒ†ã‚£ãƒ–CSSï¼ˆå‚è€ƒï¼‰ */
input[type="checkbox"]:indeterminate {
  background-color: rgba(37, 99, 235, 0.5);
  border-color: #2563eb;
}

input[type="checkbox"]:indeterminate::before {
  content: "";
  display: block;
  width: 8px;
  height: 2px;
  background-color: white;
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
}
```

### 3.3 Tailwind CSSã‚¯ãƒ©ã‚¹æ§‹æˆ

```tsx
// çŠ¶æ…‹ã«å¿œã˜ãŸã‚¯ãƒ©ã‚¹ç”Ÿæˆ
const getCheckboxClasses = (state: SelectionState): string => {
  const baseClasses = "w-4 h-4 rounded border transition-colors duration-150";
  const focusClasses =
    "focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-1 focus:ring-offset-zinc-900";

  switch (state) {
    case "unselected":
      return clsx(
        baseClasses,
        focusClasses,
        "border-zinc-500 bg-transparent hover:border-zinc-400",
      );
    case "indeterminate":
      return clsx(
        baseClasses,
        focusClasses,
        "border-blue-600 bg-blue-600/50 hover:bg-blue-600/60",
      );
    case "selected":
      return clsx(
        baseClasses,
        focusClasses,
        "border-blue-600 bg-blue-600 hover:bg-blue-700",
      );
  }
};
```

---

## 4. ARIAå±æ€§è¨­è¨ˆ

### 4.1 ãƒã‚§ãƒƒã‚¯ãƒœãƒƒã‚¯ã‚¹ã®ARIAå±æ€§

```tsx
<input
  type="checkbox"
  role="checkbox"
  aria-checked={
    selectionState === "indeterminate" ? "mixed" : selectionState === "selected"
  }
  aria-label={`${folderName} ãƒ•ã‚©ãƒ«ãƒ€ã‚’é¸æŠ`}
  ref={(el) => {
    if (el) {
      el.indeterminate = selectionState === "indeterminate";
    }
  }}
  checked={selectionState === "selected"}
  onChange={onFolderToggle}
/>
```

### 4.2 ARIAå±æ€§ä¸€è¦§

| å±æ€§           | å€¤                              | èª¬æ˜                         |
| -------------- | ------------------------------- | ---------------------------- |
| `role`         | `checkbox`                      | ãƒã‚§ãƒƒã‚¯ãƒœãƒƒã‚¯ã‚¹ã¨ã—ã¦èªè­˜   |
| `aria-checked` | `true` / `false` / `"mixed"`    | 3çŠ¶æ…‹ã‚’è¡¨ç¾                  |
| `aria-label`   | `"{ãƒ•ã‚©ãƒ«ãƒ€å} ãƒ•ã‚©ãƒ«ãƒ€ã‚’é¸æŠ"` | ã‚¹ã‚¯ãƒªãƒ¼ãƒ³ãƒªãƒ¼ãƒ€ãƒ¼å‘ã‘ãƒ©ãƒ™ãƒ« |
| `tabindex`     | `0`                             | ã‚­ãƒ¼ãƒœãƒ¼ãƒ‰ãƒ•ã‚©ãƒ¼ã‚«ã‚¹å¯èƒ½     |

### 4.3 ã‚¹ã‚¯ãƒªãƒ¼ãƒ³ãƒªãƒ¼ãƒ€ãƒ¼èª­ã¿ä¸Šã’

| çŠ¶æ…‹          | èª­ã¿ä¸Šã’å†…å®¹ï¼ˆä¾‹ï¼‰                                 |
| ------------- | -------------------------------------------------- |
| unselected    | "project ãƒ•ã‚©ãƒ«ãƒ€ã‚’é¸æŠã€ãƒã‚§ãƒƒã‚¯ã•ã‚Œã¦ã„ã¾ã›ã‚“"   |
| indeterminate | "project ãƒ•ã‚©ãƒ«ãƒ€ã‚’é¸æŠã€éƒ¨åˆ†çš„ã«é¸æŠã•ã‚Œã¦ã„ã¾ã™" |
| selected      | "project ãƒ•ã‚©ãƒ«ãƒ€ã‚’é¸æŠã€ãƒã‚§ãƒƒã‚¯ã•ã‚Œã¦ã„ã¾ã™"     |

---

## 5. ã‚­ãƒ¼ãƒœãƒ¼ãƒ‰æ“ä½œè¨­è¨ˆ

### 5.1 ã‚­ãƒ¼ãƒœãƒ¼ãƒ‰ã‚¤ãƒ³ã‚¿ãƒ©ã‚¯ã‚·ãƒ§ãƒ³

| ã‚­ãƒ¼         | ãƒ•ã‚©ãƒ«ãƒ€ã§ã®å‹•ä½œ                | ãƒ•ã‚¡ã‚¤ãƒ«ã§ã®å‹•ä½œ         |
| ------------ | ------------------------------- | ------------------------ |
| `Space`      | ãƒ•ã‚©ãƒ«ãƒ€ä¸€æ‹¬é¸æŠ/è§£é™¤ã‚’åˆ‡ã‚Šæ›¿ãˆ | ãƒ•ã‚¡ã‚¤ãƒ«é¸æŠ/è§£é™¤        |
| `Enter`      | ãƒ•ã‚©ãƒ«ãƒ€å±•é–‹/æŠ˜ã‚ŠãŸãŸã¿         | ãƒ•ã‚¡ã‚¤ãƒ«é¸æŠ/è§£é™¤        |
| `ArrowRight` | æŠ˜ã‚ŠãŸãŸã¾ã‚Œã¦ã„ã‚‹å ´åˆã¯å±•é–‹    | ãªã—                     |
| `ArrowLeft`  | å±•é–‹ã•ã‚Œã¦ã„ã‚‹å ´åˆã¯æŠ˜ã‚ŠãŸãŸã¿  | ãªã—                     |
| `Tab`        | æ¬¡ã®è¦ç´ ã¸ãƒ•ã‚©ãƒ¼ã‚«ã‚¹ç§»å‹•        | æ¬¡ã®è¦ç´ ã¸ãƒ•ã‚©ãƒ¼ã‚«ã‚¹ç§»å‹• |
| `Shift+Tab`  | å‰ã®è¦ç´ ã¸ãƒ•ã‚©ãƒ¼ã‚«ã‚¹ç§»å‹•        | å‰ã®è¦ç´ ã¸ãƒ•ã‚©ãƒ¼ã‚«ã‚¹ç§»å‹• |

### 5.2 ã‚­ãƒ¼ãƒœãƒ¼ãƒ‰æ“ä½œã®ã‚³ãƒ¼ãƒ‰è¨­è¨ˆ

```tsx
const handleKeyDown = useCallback(
  (e: React.KeyboardEvent) => {
    switch (e.key) {
      case " ":
        e.preventDefault();
        if (isFolder) {
          // æ–°è¦: ãƒ•ã‚©ãƒ«ãƒ€ä¸€æ‹¬é¸æŠ/è§£é™¤
          onFolderSelectionToggle(node.path, node);
        } else {
          onFileToggle(node.path, node);
        }
        break;
      case "Enter":
        e.preventDefault();
        if (isFolder) {
          // æ—¢å­˜: ãƒ•ã‚©ãƒ«ãƒ€å±•é–‹/æŠ˜ã‚ŠãŸãŸã¿
          onFolderExpandToggle(node.path);
        } else {
          onFileToggle(node.path, node);
        }
        break;
      case "ArrowRight":
        e.preventDefault();
        if (isFolder && !isExpanded) {
          onFolderExpandToggle(node.path);
        }
        break;
      case "ArrowLeft":
        e.preventDefault();
        if (isFolder && isExpanded) {
          onFolderExpandToggle(node.path);
        }
        break;
    }
  },
  [
    isFolder,
    isExpanded,
    node,
    onFileToggle,
    onFolderExpandToggle,
    onFolderSelectionToggle,
  ],
);
```

### 5.3 ãƒ•ã‚©ãƒ¼ã‚«ã‚¹è¡¨ç¤º

```css
/* ãƒ•ã‚©ãƒ¼ã‚«ã‚¹ãƒªãƒ³ã‚°ã®ã‚¹ã‚¿ã‚¤ãƒ« */
.checkbox:focus-visible {
  outline: none;
  box-shadow:
    0 0 0 2px #1e1e1e,
    0 0 0 4px #3b82f6;
}
```

---

## 6. ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆæ§‹æˆå¤‰æ›´

### 6.1 SelectableFileTreeItem ã®å¤‰æ›´æ¦‚è¦

```tsx
// å¤‰æ›´å‰: ãƒ•ã‚©ãƒ«ãƒ€ã¯Chevronã‚¢ã‚¤ã‚³ãƒ³ã®ã¿
{isFolder ? (
  <span aria-label={isExpanded ? "æŠ˜ã‚ŠãŸãŸã¿" : "å±•é–‹"}>
    <Icon name={isExpanded ? "chevron-down" : "chevron-right"} />
  </span>
) : (
  <input type="checkbox" ... />
)}

// å¤‰æ›´å¾Œ: ãƒ•ã‚©ãƒ«ãƒ€ã«ã‚‚ãƒã‚§ãƒƒã‚¯ãƒœãƒƒã‚¯ã‚¹ã‚’è¿½åŠ 
{isFolder && (
  <>
    {/* ãƒã‚§ãƒƒã‚¯ãƒœãƒƒã‚¯ã‚¹ï¼ˆé¸æŠç”¨ï¼‰ */}
    <FolderCheckbox
      selectionState={getSelectionState(node)}
      onChange={() => toggleFolder(node.path, node, folderId)}
      label={`${node.name} ãƒ•ã‚©ãƒ«ãƒ€ã‚’é¸æŠ`}
    />
    {/* Chevronã‚¢ã‚¤ã‚³ãƒ³ï¼ˆå±•é–‹ç”¨ï¼‰ */}
    <span
      onClick={(e) => { e.stopPropagation(); onFolderToggle(node.path); }}
      aria-label={isExpanded ? "æŠ˜ã‚ŠãŸãŸã¿" : "å±•é–‹"}
    >
      <Icon name={isExpanded ? "chevron-down" : "chevron-right"} />
    </span>
  </>
)}
```

### 6.2 Propså¤‰æ›´

```typescript
// æ—¢å­˜Props
interface SelectableFileTreeItemProps {
  node: FileNode;
  folderId: FolderId;
  expandedPaths: Set<string>;
  selectedPaths: Set<string>;
  selectionMode: "single" | "multiple";
  onFileToggle: (filePath: string, file: FileNode) => void;
  onFolderToggle: (path: string) => void; // å±•é–‹/æŠ˜ã‚ŠãŸãŸã¿
  depth: number;
  fileOnly?: boolean;
}

// è¿½åŠ Props
interface SelectableFileTreeItemProps {
  // ... æ—¢å­˜Props ...

  // æ–°è¦è¿½åŠ 
  /** ãƒ•ã‚©ãƒ«ãƒ€é¸æŠçŠ¶æ…‹ã‚’å–å¾— */
  getSelectionState: (folder: FileNode) => SelectionState;

  /** ãƒ•ã‚©ãƒ«ãƒ€ä¸€æ‹¬é¸æŠ/è§£é™¤ */
  onFolderSelectionToggle: (folderPath: string, folder: FileNode) => void;
}
```

### 6.3 ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆæ§‹æˆ

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ [depth indent] [Checkbox] [Chevron] [Icon] [Name]           â”‚
â”‚                                                             â”‚
â”‚ ä¾‹: ãƒ•ã‚©ãƒ«ãƒ€è¡Œ                                              â”‚
â”‚ â”œâ”€â”€ â˜ â–¶ ğŸ“ components                                      â”‚
â”‚ â”‚   â””â”€â”€ â˜‘ ğŸ“„ Button.tsx                                    â”‚
â”‚ â””â”€â”€ â˜’ â–¼ ğŸ“ utils (indeterminate)                           â”‚
â”‚     â”œâ”€â”€ â˜‘ ğŸ“„ helper.ts                                     â”‚
â”‚     â””â”€â”€ â˜ ğŸ“„ types.ts                                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

å‡¡ä¾‹:
â˜ = æœªé¸æŠ
â˜‘ = å…¨é¸æŠ
â˜’ = éƒ¨åˆ†é¸æŠï¼ˆindeterminateï¼‰
â–¶ = æŠ˜ã‚ŠãŸãŸã¿
â–¼ = å±•é–‹
ğŸ“ = ãƒ•ã‚©ãƒ«ãƒ€
ğŸ“„ = ãƒ•ã‚¡ã‚¤ãƒ«
```

---

## 7. ãƒ‡ã‚¶ã‚¤ãƒ³ãƒˆãƒ¼ã‚¯ãƒ³æ•´åˆæ€§

### 7.1 ä½¿ç”¨ã™ã‚‹ãƒ‡ã‚¶ã‚¤ãƒ³ãƒˆãƒ¼ã‚¯ãƒ³

| ã‚«ãƒ†ã‚´ãƒª   | ãƒˆãƒ¼ã‚¯ãƒ³                                       | ç”¨é€”                     |
| ---------- | ---------------------------------------------- | ------------------------ |
| Colors     | `zinc-300`, `zinc-400`, `zinc-500`, `zinc-800` | ãƒ†ã‚­ã‚¹ãƒˆã€ãƒœãƒ¼ãƒ€ãƒ¼ã€èƒŒæ™¯ |
| Colors     | `blue-500`, `blue-600`, `blue-700`             | é¸æŠçŠ¶æ…‹ã®ã‚¢ã‚¯ã‚»ãƒ³ãƒˆ     |
| Colors     | `yellow-500`                                   | ãƒ•ã‚©ãƒ«ãƒ€ã‚¢ã‚¤ã‚³ãƒ³         |
| Spacing    | `gap-2`, `px-2`, `py-1.5`                      | è¦ç´ é–“ã®ä½™ç™½             |
| Typography | `truncate`                                     | ãƒ†ã‚­ã‚¹ãƒˆã®çœç•¥           |
| Effects    | `transition-colors`, `duration-150`            | çŠ¶æ…‹å¤‰åŒ–ã®ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ |
| Layout     | `flex`, `items-center`                         | è¦ç´ ã®é…ç½®               |

### 7.2 æ—¢å­˜ã‚¹ã‚¿ã‚¤ãƒ«ã¨ã®æ•´åˆæ€§ç¢ºèª

```tsx
// æ—¢å­˜ã®ãƒ•ã‚¡ã‚¤ãƒ«ãƒã‚§ãƒƒã‚¯ãƒœãƒƒã‚¯ã‚¹ã‚¹ã‚¿ã‚¤ãƒ«
className =
  "w-4 h-4 rounded border border-zinc-500 bg-transparent checked:bg-blue-600 checked:border-blue-600";

// ãƒ•ã‚©ãƒ«ãƒ€ãƒã‚§ãƒƒã‚¯ãƒœãƒƒã‚¯ã‚¹ã‚‚åŒæ§˜ã®ã‚¹ã‚¿ã‚¤ãƒ«ã‚’é©ç”¨
// indeterminateçŠ¶æ…‹ã®ã¿è¿½åŠ ã‚¹ã‚¿ã‚¤ãƒ«
```

---

## 8. å®Ÿè£…ãƒã‚§ãƒƒã‚¯ãƒªã‚¹ãƒˆ

### 8.1 å®Œäº†æ¡ä»¶

- [x] ãƒã‚§ãƒƒã‚¯ãƒœãƒƒã‚¯ã‚¹3çŠ¶æ…‹ï¼ˆâ˜/â˜‘/â˜‘ indeterminateï¼‰ã®è¦–è¦šçš„è¡¨ç¾ãŒå®šç¾©ã•ã‚Œã¦ã„ã‚‹
- [x] indeterminateçŠ¶æ…‹ã®CSS/ã‚¹ã‚¿ã‚¤ãƒ«è¨­è¨ˆãŒå®Œäº†ã—ã¦ã„ã‚‹
- [x] ARIAå±æ€§ï¼ˆaria-checked="mixed"ï¼‰ã®è¨­å®šãŒå®šç¾©ã•ã‚Œã¦ã„ã‚‹
- [x] ã‚­ãƒ¼ãƒœãƒ¼ãƒ‰æ“ä½œï¼ˆSpace/Enterã‚­ãƒ¼ï¼‰ã§ã®å‹•ä½œãŒè¨­è¨ˆã•ã‚Œã¦ã„ã‚‹
- [x] ãƒ‡ã‚¶ã‚¤ãƒ³ãƒˆãƒ¼ã‚¯ãƒ³ã¨ã®æ•´åˆæ€§ãŒç¢ºä¿ã•ã‚Œã¦ã„ã‚‹

### 8.2 å®Ÿè£…æ™‚ã®æ³¨æ„ç‚¹

1. **indeterminateãƒ—ãƒ­ãƒ‘ãƒ†ã‚£**: HTMLã®indeterminateã¯DOMãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã§ã‚ã‚Šã€HTMLå±æ€§ã§ã¯è¨­å®šä¸å¯ã€‚refçµŒç”±ã§è¨­å®šã™ã‚‹ã€‚
2. **ã‚¯ãƒªãƒƒã‚¯é ˜åŸŸã®åˆ†é›¢**: ãƒã‚§ãƒƒã‚¯ãƒœãƒƒã‚¯ã‚¹ã¨å±•é–‹/æŠ˜ã‚ŠãŸãŸã¿ã‚¢ã‚¤ã‚³ãƒ³ã®ã‚¯ãƒªãƒƒã‚¯é ˜åŸŸã‚’æ˜ç¢ºã«åˆ†é›¢ã™ã‚‹ã€‚
3. **æ—¢å­˜Propsäº’æ›æ€§**: æ–°è¦Propsã¯è¿½åŠ å½¢å¼ã¨ã—ã€æ—¢å­˜å‘¼ã³å‡ºã—å…ƒã¸ã®å½±éŸ¿ã‚’æœ€å°åŒ–ã€‚

---

## 9. æ›´æ–°å±¥æ­´

| ãƒãƒ¼ã‚¸ãƒ§ãƒ³ | æ—¥ä»˜       | æ›´æ–°è€…       | æ›´æ–°å†…å®¹ |
| ---------- | ---------- | ------------ | -------- |
| 1.0.0      | 2025-12-18 | @ui-designer | åˆç‰ˆä½œæˆ |
