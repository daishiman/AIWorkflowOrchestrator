# UIè¨­è¨ˆæ›¸

## ãƒ¡ã‚¿æƒ…å ±

| é …ç›®       | å†…å®¹           |
| ---------- | -------------- |
| ã‚¿ã‚¹ã‚¯ID   | T-01-4         |
| å‚ç…§å…ƒ     | T-01-1, T-01-2 |
| ä½œæˆæ—¥     | 2025-12-09     |
| ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ | å®Œäº†           |

---

## 1. æ¦‚è¦

### 1.1 ç›®çš„

ã‚¢ã‚«ã‚¦ãƒ³ãƒˆè¨­å®šç”»é¢ã®ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆæ§‹æˆã¨çŠ¶æ…‹ç®¡ç†ã‚’è¨­è¨ˆã™ã‚‹ã€‚

### 1.2 è¨­è¨ˆæ–¹é‡

- **Atomic Design**: atoms â†’ molecules â†’ organisms ã®éšå±¤æ§‹é€ 
- **ã‚¢ã‚¯ã‚»ã‚·ãƒ“ãƒªãƒ†ã‚£**: WCAG 2.1 AAæº–æ‹ 
- **çŠ¶æ…‹ç®¡ç†**: Zustand slice ã«ã‚ˆã‚‹ã‚°ãƒ­ãƒ¼ãƒãƒ«çŠ¶æ…‹ç®¡ç†

---

## 2. ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆéšå±¤

```
AccountSection (organism)
â”œâ”€â”€ ProfileCard
â”‚   â”œâ”€â”€ Avatar (atom)
â”‚   â”œâ”€â”€ UserInfo
â”‚   â”‚   â”œâ”€â”€ DisplayName
â”‚   â”‚   â”œâ”€â”€ Email
â”‚   â”‚   â””â”€â”€ Plan badge
â”‚   â””â”€â”€ EditButton (atom)
â”œâ”€â”€ ProfileEditForm (è¡¨ç¤º/éè¡¨ç¤ºåˆ‡æ›¿)
â”‚   â”œâ”€â”€ TextInput (atom) - displayName
â”‚   â”œâ”€â”€ SaveButton (atom)
â”‚   â””â”€â”€ CancelButton (atom)
â”œâ”€â”€ LinkedProviders
â”‚   â”œâ”€â”€ ProviderCard (molecule) Ã— N
â”‚   â”‚   â”œâ”€â”€ ProviderIcon (atom)
â”‚   â”‚   â”œâ”€â”€ ProviderInfo
â”‚   â”‚   â””â”€â”€ UnlinkButton / LinkButton
â”‚   â””â”€â”€ AddProviderButtons
â””â”€â”€ ErrorDisplay
    â””â”€â”€ ErrorMessage (atom)
```

---

## 3. ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆä»•æ§˜

### 3.1 AccountSection (organism)

**è²¬å‹™**: ã‚¢ã‚«ã‚¦ãƒ³ãƒˆè¨­å®šã®å…¨ä½“ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆã¨çŠ¶æ…‹ç®¡ç†

```typescript
interface AccountSectionProps {
  className?: string;
}
```

**çŠ¶æ…‹**:

- ç·¨é›†ãƒ¢ãƒ¼ãƒ‰ï¼ˆisEditingï¼‰
- ãƒ­ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°çŠ¶æ…‹ï¼ˆisLoadingï¼‰
- ã‚¨ãƒ©ãƒ¼è¡¨ç¤º

### 3.2 Avatar (atom)

**è²¬å‹™**: ã‚¢ãƒã‚¿ãƒ¼ç”»åƒã®è¡¨ç¤º

```typescript
interface AvatarProps {
  src: string | null;
  alt: string;
  size?: "sm" | "md" | "lg";
  fallback?: React.ReactNode;
}
```

**ã‚µã‚¤ã‚º**:

- sm: 32px
- md: 48px
- lg: 80px

### 3.3 ProviderIcon (atom)

**è²¬å‹™**: OAuthãƒ—ãƒ­ãƒã‚¤ãƒ€ãƒ¼ã®ã‚¢ã‚¤ã‚³ãƒ³è¡¨ç¤º

```typescript
interface ProviderIconProps {
  provider: OAuthProvider;
  size?: number;
  className?: string;
}
```

**ã‚¢ã‚¤ã‚³ãƒ³**:

- Google: Google ã‚«ãƒ©ãƒ¼ãƒ­ã‚´
- GitHub: GitHub ãƒ­ã‚´ï¼ˆãƒ€ãƒ¼ã‚¯ãƒ¢ãƒ¼ãƒ‰å¯¾å¿œï¼‰
- Discord: Discord ãƒ­ã‚´

### 3.4 LinkedProviders (molecule)

**è²¬å‹™**: é€£æºæ¸ˆã¿ãƒ—ãƒ­ãƒã‚¤ãƒ€ãƒ¼ã®ä¸€è¦§è¡¨ç¤ºã¨é€£æºæ“ä½œ

```typescript
interface LinkedProvidersProps {
  providers: LinkedProvider[];
  onLink: (provider: OAuthProvider) => void;
  onUnlink: (provider: OAuthProvider) => void;
  isLoading: boolean;
}
```

---

## 4. çŠ¶æ…‹ç®¡ç†è¨­è¨ˆ

### 4.1 authSlice

```typescript
interface AuthSlice {
  // çŠ¶æ…‹
  isAuthenticated: boolean;
  isLoading: boolean;
  authUser: AuthUser | null;
  profile: UserProfile | null;
  linkedProviders: LinkedProvider[];
  isOffline: boolean;
  authError: string | null;

  // ã‚¢ã‚¯ã‚·ãƒ§ãƒ³
  login: (provider: OAuthProvider) => Promise<void>;
  logout: () => Promise<void>;
  updateProfile: (updates: ProfileUpdateFields) => Promise<void>;
  linkProvider: (provider: OAuthProvider) => Promise<void>;
  unlinkProvider: (provider: OAuthProvider) => Promise<void>;
  setAuthError: (error: string | null) => void;
  initializeAuth: () => Promise<void>;
}
```

### 4.2 çŠ¶æ…‹é·ç§»

```mermaid
stateDiagram-v2
    [*] --> checking: ã‚¢ãƒ—ãƒªèµ·å‹•
    checking --> authenticated: ã‚»ãƒƒã‚·ãƒ§ãƒ³æœ‰åŠ¹
    checking --> unauthenticated: ã‚»ãƒƒã‚·ãƒ§ãƒ³ãªã—

    unauthenticated --> authenticating: ãƒ­ã‚°ã‚¤ãƒ³ã‚¯ãƒªãƒƒã‚¯
    authenticating --> authenticated: ãƒ­ã‚°ã‚¤ãƒ³æˆåŠŸ
    authenticating --> unauthenticated: ãƒ­ã‚°ã‚¤ãƒ³å¤±æ•—

    authenticated --> unauthenticated: ãƒ­ã‚°ã‚¢ã‚¦ãƒˆ
    authenticated --> authenticated: ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«æ›´æ–°
```

---

## 5. ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆä»•æ§˜

### 5.1 æœªèªè¨¼çŠ¶æ…‹

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ã‚¢ã‚«ã‚¦ãƒ³ãƒˆ                        [ã‚ªãƒ•ãƒ©ã‚¤ãƒ³] â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                 â”‚
â”‚   ã‚¢ã‚«ã‚¦ãƒ³ãƒˆã‚’é€£æºã—ã¦ãƒ‡ãƒ¼ã‚¿ã‚’åŒæœŸ              â”‚
â”‚                                                 â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚   â”‚ ğŸ”´ Googleã§ç¶šã‘ã‚‹                       â”‚   â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚   â”‚ âš« GitHubã§ç¶šã‘ã‚‹                       â”‚   â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚   â”‚ ğŸ”µ Discordã§ç¶šã‘ã‚‹                      â”‚   â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 5.2 èªè¨¼æ¸ˆã¿çŠ¶æ…‹

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ã‚¢ã‚«ã‚¦ãƒ³ãƒˆ                        [ã‚ªãƒ•ãƒ©ã‚¤ãƒ³] â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                 â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”  Test User              [ç·¨é›†]       â”‚
â”‚   â”‚ ğŸ‘¤  â”‚  test@example.com                    â”‚
â”‚   â””â”€â”€â”€â”€â”€â”˜  free ãƒ—ãƒ©ãƒ³                         â”‚
â”‚                                                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ é€£æºã‚µãƒ¼ãƒ“ã‚¹                                    â”‚
â”‚                                                 â”‚
â”‚   ğŸ”´ Google     test@gmail.com    [ç™»éŒ²æ¸ˆã¿]   â”‚
â”‚   âš« GitHub                        [é€£æºã™ã‚‹]  â”‚
â”‚   ğŸ”µ Discord                       [é€£æºã™ã‚‹]  â”‚
â”‚                                                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                 â”‚
â”‚                              [ãƒ­ã‚°ã‚¢ã‚¦ãƒˆ]       â”‚
â”‚                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 5.3 ç·¨é›†ãƒ¢ãƒ¼ãƒ‰

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«ç·¨é›†                                â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                 â”‚
â”‚   è¡¨ç¤ºå                                        â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚   â”‚ Test User                               â”‚   â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚   3ã€œ30æ–‡å­—                                     â”‚
â”‚                                                 â”‚
â”‚              [ã‚­ãƒ£ãƒ³ã‚»ãƒ«]  [ä¿å­˜]               â”‚
â”‚                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 6. ã‚¢ã‚¯ã‚»ã‚·ãƒ“ãƒªãƒ†ã‚£è¦ä»¶

### 6.1 ARIAå±æ€§

| ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ   | ARIAå±æ€§                               |
| ---------------- | -------------------------------------- |
| AccountSection   | `role="region"` `aria-label`           |
| Avatar           | `role="img"` `alt`                     |
| ErrorMessage     | `role="alert"` `aria-live="assertive"` |
| LoadingIndicator | `role="status"` `aria-live="polite"`   |
| ãƒ­ã‚°ã‚¤ãƒ³ãƒœã‚¿ãƒ³   | `aria-label="ã€‡ã€‡ã§ç¶šã‘ã‚‹"`            |

### 6.2 ã‚­ãƒ¼ãƒœãƒ¼ãƒ‰ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³

- Tab: ãƒ•ã‚©ãƒ¼ã‚«ã‚¹ç§»å‹•
- Enter/Space: ãƒœã‚¿ãƒ³å®Ÿè¡Œ
- Escape: ç·¨é›†ãƒ¢ãƒ¼ãƒ‰çµ‚äº†

### 6.3 ã‚¹ã‚¯ãƒªãƒ¼ãƒ³ãƒªãƒ¼ãƒ€ãƒ¼å¯¾å¿œ

- ãƒ­ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ä¸­: ã€Œèª­ã¿è¾¼ã¿ä¸­ã€ã‚’é€šçŸ¥
- ã‚¨ãƒ©ãƒ¼ç™ºç”Ÿæ™‚: ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’å³åº§ã«é€šçŸ¥
- æˆåŠŸæ™‚: ã€Œä¿å­˜ã—ã¾ã—ãŸã€ã‚’é€šçŸ¥

---

## 7. ã‚¨ãƒ©ãƒ¼è¡¨ç¤º

### 7.1 ã‚¤ãƒ³ãƒ©ã‚¤ãƒ³ã‚¨ãƒ©ãƒ¼

```typescript
interface ErrorDisplayProps {
  error: string | null;
  onDismiss: () => void;
}
```

### 7.2 ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ä¾‹

| ã‚¨ãƒ©ãƒ¼ã‚³ãƒ¼ãƒ‰              | è¡¨ç¤ºãƒ¡ãƒƒã‚»ãƒ¼ã‚¸                      |
| ------------------------- | ----------------------------------- |
| auth/login-failed         | ãƒ­ã‚°ã‚¤ãƒ³ã«å¤±æ•—ã—ã¾ã—ãŸ              |
| auth/network-error        | ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯æ¥ç¶šã‚’ç¢ºèªã—ã¦ãã ã•ã„  |
| profile/validation-failed | è¡¨ç¤ºåã¯3ã€œ30æ–‡å­—ã§å…¥åŠ›ã—ã¦ãã ã•ã„ |

---

## 8. å®Ÿè£…ãƒ•ã‚¡ã‚¤ãƒ«

| æˆæœç‰©         | ãƒ‘ã‚¹                                                             |
| -------------- | ---------------------------------------------------------------- |
| AccountSection | `apps/desktop/src/renderer/components/organisms/AccountSection/` |
| ProviderIcon   | `apps/desktop/src/renderer/components/atoms/ProviderIcon/`       |
| authSlice      | `apps/desktop/src/renderer/store/slices/authSlice.ts`            |
| AuthGuard      | `apps/desktop/src/renderer/components/AuthGuard/`                |
| AuthView       | `apps/desktop/src/renderer/views/AuthView/`                      |

---

## 9. å®Œäº†æ¡ä»¶

- [x] ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆéšå±¤ãŒå®šç¾©ã•ã‚Œã¦ã„ã‚‹
- [x] çŠ¶æ…‹ç®¡ç†ï¼ˆauthSliceï¼‰ã®è¨­è¨ˆãŒå®Œäº†ã—ã¦ã„ã‚‹
- [x] ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆä»•æ§˜ãŒå®šç¾©ã•ã‚Œã¦ã„ã‚‹
- [x] ã‚¢ã‚¯ã‚»ã‚·ãƒ“ãƒªãƒ†ã‚£è¦ä»¶ãŒå®šç¾©ã•ã‚Œã¦ã„ã‚‹
- [x] ã‚¨ãƒ©ãƒ¼è¡¨ç¤ºä»•æ§˜ãŒå®šç¾©ã•ã‚Œã¦ã„ã‚‹
