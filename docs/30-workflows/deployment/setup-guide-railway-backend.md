# Railwayãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ãƒ‡ãƒ—ãƒ­ã‚¤ å®Œå…¨ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—ã‚¬ã‚¤ãƒ‰

## æ¦‚è¦

ã“ã®ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã§ã¯ã€AIWorkflowOrchestratorã®ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ã‚µãƒ¼ãƒ“ã‚¹ï¼ˆNext.js API Routesï¼‰ã®ç’°å¢ƒæ§‹ç¯‰ã‹ã‚‰Railwayã¸ã®ãƒ‡ãƒ—ãƒ­ã‚¤ã¾ã§ã®å®Œå…¨ãªæ‰‹é †ã‚’èª¬æ˜ã—ã¾ã™ã€‚

**æ‰€è¦æ™‚é–“**: ç´„30ã€œ60åˆ†ï¼ˆç’°å¢ƒæ§‹ç¯‰å«ã‚€ï¼‰

**ã‚³ã‚¹ãƒˆ**: $5/æœˆã€œï¼ˆPro Planã€ä½¿ç”¨é‡ãƒ™ãƒ¼ã‚¹èª²é‡‘ï¼‰

---

## ã“ã®ã‚¬ã‚¤ãƒ‰ãŒå¿…è¦ãªã‚±ãƒ¼ã‚¹

### å¿…è¦ãªå ´åˆ âœ…

| ã‚·ãƒŠãƒªã‚ª                 | èª¬æ˜                         |
| ------------------------ | ---------------------------- |
| Webã‚¢ãƒ—ãƒªã‚’å…¬é–‹ã™ã‚‹      | ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰APIãŒå¿…è¦        |
| è¤‡æ•°ãƒ‡ãƒã‚¤ã‚¹ã§ãƒ‡ãƒ¼ã‚¿åŒæœŸ | ã‚µãƒ¼ãƒãƒ¼ã‚µã‚¤ãƒ‰ã§ã®ãƒ‡ãƒ¼ã‚¿ç®¡ç† |
| å¤–éƒ¨ã‚µãƒ¼ãƒ“ã‚¹ã¨ã®é€£æº     | Webhookå—ä¿¡ãªã©              |

### ä¸è¦ãªå ´åˆ âŒ

| ã‚·ãƒŠãƒªã‚ª                   | èª¬æ˜                 |
| -------------------------- | -------------------- |
| ãƒ‡ã‚¹ã‚¯ãƒˆãƒƒãƒ—ã‚¢ãƒ—ãƒªã®ã¿ä½¿ç”¨ | ãƒ­ãƒ¼ã‚«ãƒ«SQLiteã§å®Œçµ |
| ã‚ªãƒ•ãƒ©ã‚¤ãƒ³ç’°å¢ƒã§ä½¿ç”¨       | ã‚µãƒ¼ãƒãƒ¼ä¸è¦         |
| å€‹äººåˆ©ç”¨ã®ã¿               | ãƒ­ãƒ¼ã‚«ãƒ«é–‹ç™ºã§ååˆ†   |

---

## ç’°å¢ƒå¤‰æ•°ã®è¨­å®šå ´æ‰€ã¨è¨­å®šæ–¹æ³•

### ã©ã“ã§ä½•ã‚’è¨­å®šã™ã‚‹ã‹ï¼ˆé‡è¦ï¼‰

| è¨­å®šå ´æ‰€                     | ç”¨é€”           | è¨­å®šã™ã‚‹å¤‰æ•°        |
| ---------------------------- | -------------- | ------------------- |
| **ãƒ­ãƒ¼ã‚«ãƒ«ï¼ˆ`.env.local`ï¼‰** | é–‹ç™ºæ™‚ã®ã¿ä½¿ç”¨ | é–‹ç™ºç”¨ã®å€¤ã™ã¹ã¦    |
| **Railwayï¼ˆVariablesï¼‰**     | æœ¬ç•ªãƒ‡ãƒ—ãƒ­ã‚¤æ™‚ | æœ¬ç•ªç”¨ã®å€¤ã™ã¹ã¦    |
| **GitHub Secrets**           | CI/CDã®ã¿      | `RAILWAY_TOKEN`ã®ã¿ |

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ é‡è¦: ç’°å¢ƒå¤‰æ•°ã®è¨­å®šå ´æ‰€                                      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                             â”‚
â”‚  ãƒ­ãƒ¼ã‚«ãƒ«é–‹ç™º â†’ .env.local ãƒ•ã‚¡ã‚¤ãƒ«                          â”‚
â”‚  æœ¬ç•ªãƒ‡ãƒ—ãƒ­ã‚¤ â†’ Railway ã® Variables ã‚¿ãƒ–                    â”‚
â”‚  CI/CDèªè¨¼   â†’ GitHub Secretsï¼ˆRAILWAY_TOKENã®ã¿ï¼‰          â”‚
â”‚                                                             â”‚
â”‚  â€» GitHub Secretsã«ã¯ã‚¢ãƒ—ãƒªã®ç’°å¢ƒå¤‰æ•°ã¯è¨­å®šã—ãªã„            â”‚
â”‚  â€» ã‚¢ãƒ—ãƒªã®ç’°å¢ƒå¤‰æ•°ã¯ã™ã¹ã¦Railwayã§è¨­å®šã™ã‚‹                 â”‚
â”‚                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹æ§‹æˆï¼ˆTurso + libSQLï¼‰

### çµ±ä¸€ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£

æœ¬ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã§ã¯ **Tursoï¼ˆlibSQLï¼‰** ã‚’æ¡ç”¨ã—ã€ãƒ‡ã‚¹ã‚¯ãƒˆãƒƒãƒ—ã¨ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ã§ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‚’çµ±ä¸€ã—ã¦ã„ã¾ã™ã€‚

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹çµ±ä¸€ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                 â”‚
â”‚   ãƒ‡ã‚¹ã‚¯ãƒˆãƒƒãƒ—ã‚¢ãƒ—ãƒª                                             â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                       â”‚
â”‚   â”‚  SQLiteãƒ•ã‚¡ã‚¤ãƒ«      â”‚ â† ã‚ªãƒ•ãƒ©ã‚¤ãƒ³ã§å‹•ä½œ                    â”‚
â”‚   â”‚  (@libsql/client)   â”‚                                       â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                       â”‚
â”‚              â”‚ åŒæœŸï¼ˆEmbedded Replicasï¼‰                        â”‚
â”‚              â†“                                                  â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”               â”‚
â”‚   â”‚           Turso (ã‚¯ãƒ©ã‚¦ãƒ‰)                   â”‚               â”‚
â”‚   â”‚         libSQLäº’æ›ã‚¨ãƒƒã‚¸DB                   â”‚               â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜               â”‚
â”‚              â†‘              â†‘                                   â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”                           â”‚
â”‚   â”‚ ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰API â”‚   â”‚ Discord Bot â”‚                           â”‚
â”‚   â”‚  (Railway)    â”‚   â”‚             â”‚                           â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                           â”‚
â”‚                                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### ãªãœTursoï¼ˆlibSQLï¼‰ï¼Ÿ

| é …ç›®               | ãƒ¡ãƒªãƒƒãƒˆ                                                                |
| ------------------ | ----------------------------------------------------------------------- |
| **ã‚³ãƒ¼ãƒ‰çµ±ä¸€**     | åŒã˜Drizzleã‚¹ã‚­ãƒ¼ãƒã€åŒã˜ã‚¯ã‚¨ãƒªã‚³ãƒ¼ãƒ‰ã‚’ãƒ‡ã‚¹ã‚¯ãƒˆãƒƒãƒ—ãƒ»ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ã§å…±æœ‰ |
| **ã‚ªãƒ•ãƒ©ã‚¤ãƒ³å¯¾å¿œ** | ãƒ‡ã‚¹ã‚¯ãƒˆãƒƒãƒ—ã¯ãƒ­ãƒ¼ã‚«ãƒ«SQLiteã¨ã—ã¦å‹•ä½œï¼ˆApp Storeè¦ä»¶ã‚’æº€ãŸã™ï¼‰         |
| **è‡ªå‹•åŒæœŸ**       | Embedded Replicasæ©Ÿèƒ½ã§ãƒ­ãƒ¼ã‚«ãƒ«â†”ã‚¯ãƒ©ã‚¦ãƒ‰åŒæœŸ                            |
| **ç„¡æ–™æ **         | 500MBã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ã€10å„„èª­ã¿å–ã‚Š/æœˆ                                        |
| **SQLiteäº’æ›**     | æ—¢å­˜ã®SQLiteçŸ¥è­˜ãŒãã®ã¾ã¾æ´»ç”¨å¯èƒ½                                      |

### ç’°å¢ƒåˆ¥ã®æ¥ç¶šæ–¹æ³•

| ç’°å¢ƒ                       | æ¥ç¶šURL                                   | ç”¨é€”           |
| -------------------------- | ----------------------------------------- | -------------- |
| ãƒ‡ã‚¹ã‚¯ãƒˆãƒƒãƒ—ï¼ˆãƒ­ãƒ¼ã‚«ãƒ«ï¼‰   | `file:./data/app.db`                      | ã‚ªãƒ•ãƒ©ã‚¤ãƒ³å‹•ä½œ |
| ãƒ‡ã‚¹ã‚¯ãƒˆãƒƒãƒ—ï¼ˆåŒæœŸï¼‰       | `libsql://...turso.io` + ãƒ­ãƒ¼ã‚«ãƒ«ãƒ¬ãƒ—ãƒªã‚« | åŒæœŸæ™‚         |
| ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰APIï¼ˆRailwayï¼‰ | `libsql://...turso.io`                    | ã‚¯ãƒ©ã‚¦ãƒ‰DB     |

### ç¾åœ¨ã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆçŠ¶æ³

```
ãƒ‡ã‚¹ã‚¯ãƒˆãƒƒãƒ—ã‚¢ãƒ—ãƒªï¼ˆapps/desktopï¼‰â†’ SQLiteï¼ˆ@libsql/clientã€file:ï¼‰
ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰APIï¼ˆapps/backendï¼‰  â†’ ç¾æ™‚ç‚¹ã§ã¯DBãªã—ï¼ˆãƒ˜ãƒ«ã‚¹ãƒã‚§ãƒƒã‚¯ã®ã¿ï¼‰
                                    â†’ DBå®Ÿè£…æ™‚ã¯Tursoï¼ˆ@libsql/clientï¼‰ã‚’ä½¿ç”¨
```

> **ç¾åœ¨ã®MVP**: ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ã«ã¯ã¾ã ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹æ©Ÿèƒ½ã‚’å®Ÿè£…ã—ã¦ã„ã¾ã›ã‚“ã€‚
> ãƒ˜ãƒ«ã‚¹ãƒã‚§ãƒƒã‚¯APIã®ã¿ã§ã™ã€‚ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ãŒå¿…è¦ã«ãªã£ãŸã‚‰Tursoã‚’è¿½åŠ å®Ÿè£…ã—ã¾ã™ã€‚

---

## ç’°å¢ƒå¤‰æ•°ä¸€è¦§ï¼ˆå…¨è¨­å®šé …ç›®ï¼‰

### MVPï¼ˆæœ€å°æ§‹æˆï¼‰ã§å¿…è¦ãªç’°å¢ƒå¤‰æ•°

**ãƒ­ãƒ¼ã‚«ãƒ«é–‹ç™ºï¼ˆ`.env.local`ï¼‰ã«è¨­å®š:**

| å¤‰æ•°å                    | å€¤            | èª¬æ˜           |
| ------------------------- | ------------- | -------------- |
| `NODE_ENV`                | `development` | é–‹ç™ºãƒ¢ãƒ¼ãƒ‰     |
| `PORT`                    | `3001`        | ã‚µãƒ¼ãƒãƒ¼ãƒãƒ¼ãƒˆ |
| `NEXT_PUBLIC_API_VERSION` | `1.0.0`       | APIãƒãƒ¼ã‚¸ãƒ§ãƒ³  |

**Railwayï¼ˆVariablesï¼‰ã«è¨­å®š:**

| å¤‰æ•°å                    | å€¤           | èª¬æ˜          |
| ------------------------- | ------------ | ------------- |
| `NODE_ENV`                | `production` | æœ¬ç•ªãƒ¢ãƒ¼ãƒ‰    |
| `NEXT_PUBLIC_API_VERSION` | `1.0.0`      | APIãƒãƒ¼ã‚¸ãƒ§ãƒ³ |

> **æ³¨æ„**: `PORT`ã¯RailwayãŒè‡ªå‹•è¨­å®šã™ã‚‹ã®ã§ä¸è¦

---

## ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£é–¢é€£ã®ç’°å¢ƒå¤‰æ•°ï¼ˆè©³ç´°è§£èª¬ï¼‰

### APP_SECRET ã¨ã¯ï¼Ÿ

**ç”¨é€”**: ã‚»ãƒƒã‚·ãƒ§ãƒ³æƒ…å ±ã‚„Cookieã®æš—å·åŒ–ã«ä½¿ç”¨ã™ã‚‹ãƒ©ãƒ³ãƒ€ãƒ ãªæ–‡å­—åˆ—

**ä½•ã‚’è¨­å®šã™ã‚‹ã‹**: è‡ªåˆ†ã§ç”Ÿæˆã—ãŸãƒ©ãƒ³ãƒ€ãƒ ãªæ–‡å­—åˆ—ï¼ˆ32æ–‡å­—ä»¥ä¸Šæ¨å¥¨ï¼‰

**ç”Ÿæˆæ–¹æ³•**:

```bash
# ã‚¿ãƒ¼ãƒŸãƒŠãƒ«ã§å®Ÿè¡Œ
openssl rand -base64 32

# å‡ºåŠ›ä¾‹: K7xB9pQmN3vR2sT8wY6uA4cF1hJ5kL0mO+P/qRsT=
```

**è¨­å®šä¾‹**:

```
APP_SECRET=K7xB9pQmN3vR2sT8wY6uA4cF1hJ5kL0mO+P/qRsT=
```

### JWT_SECRET ã¨ã¯ï¼Ÿ

**ç”¨é€”**: ãƒ¦ãƒ¼ã‚¶ãƒ¼èªè¨¼ãƒˆãƒ¼ã‚¯ãƒ³ï¼ˆJWTï¼‰ã®ç½²åã«ä½¿ç”¨ã™ã‚‹ãƒ©ãƒ³ãƒ€ãƒ ãªæ–‡å­—åˆ—

**ä½•ã‚’è¨­å®šã™ã‚‹ã‹**: `APP_SECRET`ã¨ã¯åˆ¥ã®ã€è‡ªåˆ†ã§ç”Ÿæˆã—ãŸãƒ©ãƒ³ãƒ€ãƒ ãªæ–‡å­—åˆ—

**ç”Ÿæˆæ–¹æ³•**:

```bash
# ã‚¿ãƒ¼ãƒŸãƒŠãƒ«ã§å®Ÿè¡Œï¼ˆAPP_SECRETã¨ã¯åˆ¥ã«ç”Ÿæˆï¼‰
openssl rand -base64 32

# å‡ºåŠ›ä¾‹: X2yZ9aB3cD4eF5gH6iJ7kL8mN0oP1qR2sT3uV4w=
```

**è¨­å®šä¾‹**:

```
JWT_SECRET=X2yZ9aB3cD4eF5gH6iJ7kL8mN0oP1qR2sT3uV4w=
```

### ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£å¤‰æ•°ã®è¨­å®šå ´æ‰€

| å¤‰æ•°         |   ãƒ­ãƒ¼ã‚«ãƒ«   |  Railway  | GitHub |
| ------------ | :----------: | :-------: | :----: |
| `APP_SECRET` | `.env.local` | Variables |   âŒ   |
| `JWT_SECRET` | `.env.local` | Variables |   âŒ   |

> **é‡è¦**: ã“ã‚Œã‚‰ã®å€¤ã¯GitHub Secretsã«ã¯è¨­å®šã—ã¾ã›ã‚“ã€‚Railwayã«ç›´æ¥è¨­å®šã—ã¾ã™ã€‚

### MVPã§ã¯å¿…è¦ï¼Ÿ

**ç¾æ™‚ç‚¹ã§ã¯ä¸è¦ã§ã™ã€‚**

èªè¨¼æ©Ÿèƒ½ã‚’å®Ÿè£…ã™ã‚‹ã¾ã§ã¯è¨­å®šä¸è¦ã€‚ãƒ˜ãƒ«ã‚¹ãƒã‚§ãƒƒã‚¯APIã®ã¿ã®ç¾åœ¨ã®MVPã§ã¯ä½¿ç”¨ã—ã¾ã›ã‚“ã€‚

---

## ç’°å¢ƒå¤‰æ•°ã®è¨­å®šæ‰‹é †ï¼ˆã‚¹ãƒ†ãƒƒãƒ—ãƒã‚¤ã‚¹ãƒ†ãƒƒãƒ—ï¼‰

### ãƒ­ãƒ¼ã‚«ãƒ«é–‹ç™ºç”¨ï¼ˆ.env.localï¼‰

1. `apps/backend` ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã«ç§»å‹•
2. `env.example` ã‚’ `.env.local` ã«ã‚³ãƒ”ãƒ¼
3. ä»¥ä¸‹ã®å†…å®¹ã«ç·¨é›†

```bash
# apps/backend/.env.localï¼ˆMVPæœ€å°æ§‹æˆï¼‰

# åŸºæœ¬è¨­å®š
NODE_ENV=development
PORT=3001
NEXT_PUBLIC_API_VERSION=1.0.0

# ãƒ­ã‚°è¨­å®š
LOG_LEVEL=debug

# ä»¥ä¸‹ã¯èªè¨¼æ©Ÿèƒ½å®Ÿè£…æ™‚ã«è¿½åŠ 
# APP_SECRET=ï¼ˆopenssl rand -base64 32 ã§ç”Ÿæˆã—ãŸå€¤ï¼‰
# JWT_SECRET=ï¼ˆopenssl rand -base64 32 ã§ç”Ÿæˆã—ãŸå€¤ï¼‰
```

### Railwayç”¨ï¼ˆVariablesï¼‰

Railway ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ã§è¨­å®š:

1. ã‚µãƒ¼ãƒ“ã‚¹ã‚«ãƒ¼ãƒ‰ã‚’ã‚¯ãƒªãƒƒã‚¯
2. **Variables** ã‚¿ãƒ–ã‚’ã‚¯ãƒªãƒƒã‚¯
3. ä»¥ä¸‹ã‚’è¿½åŠ :

| Name                      | Value        |
| ------------------------- | ------------ |
| `NODE_ENV`                | `production` |
| `NEXT_PUBLIC_API_VERSION` | `1.0.0`      |

### GitHub Secretsç”¨

GitHub ãƒªãƒã‚¸ãƒˆãƒªã® Settings > Secrets ã§è¨­å®š:

| Name            | ç”¨é€”              | è¨­å®šã™ã‚‹å€¤                |
| --------------- | ----------------- | ------------------------- |
| `RAILWAY_TOKEN` | CI/CDãƒ‡ãƒ—ãƒ­ã‚¤èªè¨¼ | Railwayã§ç”Ÿæˆã—ãŸãƒˆãƒ¼ã‚¯ãƒ³ |

> **ã“ã‚Œã ã‘ã§ã™ï¼** ã‚¢ãƒ—ãƒªã®ç’°å¢ƒå¤‰æ•°ï¼ˆAPP_SECRETãªã©ï¼‰ã¯GitHubã«ã¯è¨­å®šã—ã¾ã›ã‚“ã€‚

---

## Part 1: ãƒ­ãƒ¼ã‚«ãƒ«ç’°å¢ƒæ§‹ç¯‰

### å‰ææ¡ä»¶

- [ ] Node.js 22.x ãŒã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã•ã‚Œã¦ã„ã‚‹
- [ ] pnpm ãŒã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã•ã‚Œã¦ã„ã‚‹
- [ ] ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆãŒã‚¯ãƒ­ãƒ¼ãƒ³ã•ã‚Œã¦ã„ã‚‹

### Step 1.1: ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰æ§‹é€ ã®ç¢ºèª

ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ã¯ `apps/backend` ã«å®Ÿè£…æ¸ˆã¿ã§ã™ï¼š

```
apps/backend/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ app/
â”‚   â”‚   â”œâ”€â”€ api/
â”‚   â”‚   â”‚   â””â”€â”€ health/
â”‚   â”‚   â”‚       â””â”€â”€ route.ts    # ãƒ˜ãƒ«ã‚¹ãƒã‚§ãƒƒã‚¯API
â”‚   â”‚   â”œâ”€â”€ layout.tsx
â”‚   â”‚   â””â”€â”€ page.tsx
â”‚   â””â”€â”€ __tests__/
â”‚       â””â”€â”€ health.test.ts      # ãƒ†ã‚¹ãƒˆã‚³ãƒ¼ãƒ‰
â”œâ”€â”€ package.json
â”œâ”€â”€ tsconfig.json
â”œâ”€â”€ next.config.ts
â”œâ”€â”€ vitest.config.ts
â””â”€â”€ eslint.config.mjs
```

### Step 1.2: ç’°å¢ƒå¤‰æ•°ãƒ•ã‚¡ã‚¤ãƒ«ã®ä½œæˆ

```bash
# ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã‹ã‚‰ã‚³ãƒ”ãƒ¼
cd apps/backend
cp env.example .env.local
```

`.env.local` ã‚’ç·¨é›†ï¼ˆãƒ­ãƒ¼ã‚«ãƒ«é–‹ç™ºç”¨ã®æœ€å°è¨­å®šï¼‰:

```bash
# .env.local
NODE_ENV=development
PORT=3001
NEXT_PUBLIC_API_VERSION=1.0.0
LOG_LEVEL=debug
```

> **æ³¨æ„**: `.env.local` ã¯Gitã«ã‚³ãƒŸãƒƒãƒˆã•ã‚Œã¾ã›ã‚“ï¼ˆ`.gitignore`ã«å«ã¾ã‚Œã¦ã„ã¾ã™ï¼‰

### Step 1.3: ä¾å­˜é–¢ä¿‚ã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«

```bash
# ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆãƒ«ãƒ¼ãƒˆã§å®Ÿè¡Œ
pnpm install
```

### Step 1.4: å…±æœ‰ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã®ãƒ“ãƒ«ãƒ‰

```bash
# sharedãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‚’å…ˆã«ãƒ“ãƒ«ãƒ‰ï¼ˆbackendãŒä¾å­˜ï¼‰
pnpm --filter @repo/shared build
```

### Step 1.5: ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ã®ãƒ“ãƒ«ãƒ‰ç¢ºèª

```bash
# ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ã‚’ãƒ“ãƒ«ãƒ‰
pnpm --filter @repo/backend build
```

**æœŸå¾…ã•ã‚Œã‚‹å‡ºåŠ›**:

```
âœ“ Compiled successfully
âœ“ Generating static pages (5/5)
```

### Step 1.6: ãƒ†ã‚¹ãƒˆå®Ÿè¡Œ

```bash
# ãƒ†ã‚¹ãƒˆã‚’å®Ÿè¡Œ
pnpm --filter @repo/backend test:run
```

**æœŸå¾…ã•ã‚Œã‚‹å‡ºåŠ›**:

```
âœ“ src/__tests__/health.test.ts (5 tests) 6ms
Test Files  1 passed (1)
Tests       5 passed (5)
```

### Step 1.7: ãƒ­ãƒ¼ã‚«ãƒ«é–‹ç™ºã‚µãƒ¼ãƒãƒ¼èµ·å‹•

```bash
# é–‹ç™ºã‚µãƒ¼ãƒãƒ¼èµ·å‹•ï¼ˆãƒãƒ¼ãƒˆ3001ï¼‰
pnpm --filter @repo/backend dev
```

ãƒ–ãƒ©ã‚¦ã‚¶ã§ http://localhost:3001 ã«ã‚¢ã‚¯ã‚»ã‚¹ã—ã¦ç¢ºèªã€‚

ãƒ˜ãƒ«ã‚¹ãƒã‚§ãƒƒã‚¯ç¢ºèª:

```bash
curl http://localhost:3001/api/health
```

**æœŸå¾…ã•ã‚Œã‚‹å¿œç­”**:

```json
{
  "status": "healthy",
  "timestamp": "2025-01-01T00:00:00.000Z",
  "version": "1.0.0",
  "uptime": 123
}
```

---

## Part 2: GitHubãƒªãƒã‚¸ãƒˆãƒªè¨­å®š

### Step 2.1: å¤‰æ›´ã‚’ã‚³ãƒŸãƒƒãƒˆ

```bash
# å¤‰æ›´ã‚’ç¢ºèª
git status

# ã‚¹ãƒ†ãƒ¼ã‚¸ãƒ³ã‚°
git add .

# ã‚³ãƒŸãƒƒãƒˆ
git commit -m "feat(backend): Add Next.js backend with health check API"
```

### Step 2.2: GitHubã«ãƒ—ãƒƒã‚·ãƒ¥

```bash
# ãƒªãƒ¢ãƒ¼ãƒˆã«ãƒ—ãƒƒã‚·ãƒ¥
git push origin main
```

### Step 2.3: GitHub Actionsç¢ºèª

1. GitHubãƒªãƒã‚¸ãƒˆãƒªã‚’é–‹ã
2. **Actions** ã‚¿ãƒ–ã‚’ã‚¯ãƒªãƒƒã‚¯
3. ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ãŒæ­£å¸¸ã«å®Ÿè¡Œã•ã‚Œã¦ã„ã‚‹ã“ã¨ã‚’ç¢ºèª

---

## Part 3: Railwayã‚¢ã‚«ã‚¦ãƒ³ãƒˆä½œæˆ

### Step 3.1: Railwayã‚µã‚¤ãƒˆã«ã‚¢ã‚¯ã‚»ã‚¹

1. ãƒ–ãƒ©ã‚¦ã‚¶ã§ https://railway.app ã‚’é–‹ã
2. ç”»é¢å³ä¸Šã® **Login** ãƒœã‚¿ãƒ³ã‚’ã‚¯ãƒªãƒƒã‚¯

### Step 3.2: GitHubã§ã‚µã‚¤ãƒ³ã‚¢ãƒƒãƒ—

1. **Login with GitHub** ãƒœã‚¿ãƒ³ã‚’ã‚¯ãƒªãƒƒã‚¯
2. GitHubã®èªè¨¼ç”»é¢ãŒè¡¨ç¤ºã•ã‚Œã‚‹
3. **Authorize Railway** ã‚’ã‚¯ãƒªãƒƒã‚¯
4. Railwayãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ã«ãƒªãƒ€ã‚¤ãƒ¬ã‚¯ãƒˆã•ã‚Œã‚‹

### Step 3.3: ãƒ—ãƒ©ãƒ³é¸æŠ

1. ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰å³ä¸Šã®ã‚¢ã‚«ã‚¦ãƒ³ãƒˆã‚¢ã‚¤ã‚³ãƒ³ã‚’ã‚¯ãƒªãƒƒã‚¯
2. **Settings** ã‚’é¸æŠ
3. å·¦ã‚µã‚¤ãƒ‰ãƒãƒ¼ã® **Billing** ã‚’ã‚¯ãƒªãƒƒã‚¯
4. ãƒ—ãƒ©ãƒ³ã‚’é¸æŠï¼š

| ãƒ—ãƒ©ãƒ³    | æ–™é‡‘                 | ç‰¹å¾´                 | æ¨å¥¨ç”¨é€”     |
| --------- | -------------------- | -------------------- | ------------ |
| **Trial** | ç„¡æ–™ï¼ˆ$5ã‚¯ãƒ¬ã‚¸ãƒƒãƒˆï¼‰ | ã‚¯ãƒ¬ã‚¸ãƒƒãƒˆæ¶ˆè²»å¾Œåœæ­¢ | æ¤œè¨¼ãƒ»ãƒ†ã‚¹ãƒˆ |
| **Pro**   | $5/æœˆã€œ + ä½¿ç”¨é‡     | æœ¬ç•ªå‘ã‘æ©Ÿèƒ½         | æœ¬ç•ªé‹ç”¨     |

5. Pro Planã®å ´åˆï¼š
   - **Upgrade to Pro** ã‚’ã‚¯ãƒªãƒƒã‚¯
   - ã‚¯ãƒ¬ã‚¸ãƒƒãƒˆã‚«ãƒ¼ãƒ‰æƒ…å ±ã‚’å…¥åŠ›
   - **Subscribe** ã‚’ã‚¯ãƒªãƒƒã‚¯

---

## Part 4: Railwayãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆä½œæˆ

### Step 4.1: æ–°è¦ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆä½œæˆ

1. Railwayãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ï¼ˆhttps://railway.app/dashboardï¼‰ã‚’é–‹ã
2. **+ New Project** ãƒœã‚¿ãƒ³ã‚’ã‚¯ãƒªãƒƒã‚¯
3. è¡¨ç¤ºã•ã‚Œã‚‹ãƒ¡ãƒ‹ãƒ¥ãƒ¼ã‹ã‚‰ **Deploy from GitHub repo** ã‚’é¸æŠ

### Step 4.2: ãƒªãƒã‚¸ãƒˆãƒªæ¥ç¶š

1. **Configure GitHub App** ã‚’ã‚¯ãƒªãƒƒã‚¯ï¼ˆåˆå›ã®ã¿ï¼‰
2. GitHubã®è¨­å®šç”»é¢ãŒé–‹ã
3. å¯¾è±¡ãƒªãƒã‚¸ãƒˆãƒªã‚’é¸æŠï¼š
   - **Only select repositories** ã‚’é¸æŠ
   - **Select repositories** ãƒ‰ãƒ­ãƒƒãƒ—ãƒ€ã‚¦ãƒ³ã§ `AIWorkflowOrchestrator` ã‚’é¸æŠ
4. **Save** ã‚’ã‚¯ãƒªãƒƒã‚¯
5. Railwayã«æˆ»ã‚Šã€ãƒªãƒã‚¸ãƒˆãƒªä¸€è¦§ã‹ã‚‰ `AIWorkflowOrchestrator` ã‚’ã‚¯ãƒªãƒƒã‚¯

### Step 4.3: ã‚µãƒ¼ãƒ“ã‚¹è¨­å®š

1. ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆãŒä½œæˆã•ã‚Œã€ã‚µãƒ¼ãƒ“ã‚¹ã‚«ãƒ¼ãƒ‰ãŒè¡¨ç¤ºã•ã‚Œã‚‹
2. ã‚µãƒ¼ãƒ“ã‚¹ã‚«ãƒ¼ãƒ‰ã‚’ã‚¯ãƒªãƒƒã‚¯
3. **Settings** ã‚¿ãƒ–ã‚’ã‚¯ãƒªãƒƒã‚¯
4. ä»¥ä¸‹ã‚’è¨­å®šï¼š

#### Root Directoryï¼ˆé‡è¦ï¼šãƒ¢ãƒãƒ¬ãƒè¨­å®šï¼‰

1. **Root Directory** ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã‚’æ¢ã™
2. å…¥åŠ›æ¬„ã« `apps/backend` ã¨å…¥åŠ›
3. è‡ªå‹•ä¿å­˜ã•ã‚Œã‚‹

#### Build Command

1. **Build Command** ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã‚’æ¢ã™
2. ä»¥ä¸‹ã‚’å…¥åŠ›ï¼š

```
pnpm install && pnpm --filter @repo/shared build && pnpm --filter @repo/backend build
```

#### Start Command

1. **Start Command** ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã‚’æ¢ã™
2. ä»¥ä¸‹ã‚’å…¥åŠ›ï¼š

```
pnpm --filter @repo/backend start
```

#### Watch Pathsï¼ˆã‚ªãƒ—ã‚·ãƒ§ãƒ³ï¼‰

1. **Watch Paths** ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã‚’æ¢ã™
2. ä»¥ä¸‹ã‚’è¿½åŠ ï¼š
   - `apps/backend/**`
   - `packages/shared/**`

---

## Part 5: ç’°å¢ƒå¤‰æ•°è¨­å®š

### Step 5.1: ç’°å¢ƒå¤‰æ•°ã‚¿ãƒ–ã‚’é–‹ã

1. ã‚µãƒ¼ãƒ“ã‚¹è¨­å®šç”»é¢ã§ **Variables** ã‚¿ãƒ–ã‚’ã‚¯ãƒªãƒƒã‚¯
2. **+ New Variable** ã‚’ã‚¯ãƒªãƒƒã‚¯

### Step 5.2: å¿…é ˆç’°å¢ƒå¤‰æ•°ã‚’è¿½åŠ 

ä»¥ä¸‹ã®ç’°å¢ƒå¤‰æ•°ã‚’é †ç•ªã«è¿½åŠ ï¼š

#### å¤‰æ•°1: NODE_ENV

| é …ç›®  | å€¤           |
| ----- | ------------ |
| Name  | `NODE_ENV`   |
| Value | `production` |

**Add** ã‚’ã‚¯ãƒªãƒƒã‚¯

#### å¤‰æ•°2: NEXT_PUBLIC_API_VERSION

| é …ç›®  | å€¤                        |
| ----- | ------------------------- |
| Name  | `NEXT_PUBLIC_API_VERSION` |
| Value | `1.0.0`                   |

**Add** ã‚’ã‚¯ãƒªãƒƒã‚¯

### Step 5.3: ã‚·ãƒ¼ã‚¯ãƒ¬ãƒƒãƒˆå¤‰æ•°ã®è¿½åŠ ï¼ˆå¿…è¦ã«å¿œã˜ã¦ï¼‰

æ©Ÿå¯†æƒ…å ±ã¯å€‹åˆ¥ã«è¿½åŠ ï¼š

**ã‚·ãƒ¼ã‚¯ãƒ¬ãƒƒãƒˆç”Ÿæˆæ–¹æ³•**ï¼ˆã‚¿ãƒ¼ãƒŸãƒŠãƒ«ã§å®Ÿè¡Œï¼‰ï¼š

```bash
# 32æ–‡å­—ã®ãƒ©ãƒ³ãƒ€ãƒ æ–‡å­—åˆ—ã‚’ç”Ÿæˆ
openssl rand -base64 32
```

| å¤‰æ•°å               | èª¬æ˜                         | å¿…é ˆ |
| -------------------- | ---------------------------- | ---- |
| `APP_SECRET`         | ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ç§˜å¯†éµ       | â–³    |
| `JWT_SECRET`         | JWTç½²åç”¨ç§˜å¯†éµ              | â–³    |
| `TURSO_DATABASE_URL` | Tursoæ¥ç¶šURLï¼ˆlibsql://...ï¼‰ | â–³    |
| `TURSO_AUTH_TOKEN`   | Tursoèªè¨¼ãƒˆãƒ¼ã‚¯ãƒ³            | â–³    |

---

## Part 6: Tursoãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹è¨­å®šï¼ˆDBä½¿ç”¨æ™‚ï¼‰

> **æ³¨æ„**: ç¾åœ¨ã®MVPã§ã¯ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã¯æœªå®Ÿè£…ã§ã™ã€‚
> ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹æ©Ÿèƒ½ã‚’è¿½åŠ ã™ã‚‹éš›ã«ä»¥ä¸‹ã®æ‰‹é †ã‚’å®Ÿè¡Œã—ã¦ãã ã•ã„ã€‚

### Step 6.1: Turso CLIã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«

```bash
# macOS
brew install tursodatabase/tap/turso

# Windows (PowerShell)
irm https://get.turso.tech/install.ps1 | iex

# Linux
curl -sSfL https://get.turso.tech/install.sh | bash
```

### Step 6.2: Tursoã‚¢ã‚«ã‚¦ãƒ³ãƒˆä½œæˆãƒ»ãƒ­ã‚°ã‚¤ãƒ³

```bash
# ãƒ–ãƒ©ã‚¦ã‚¶ã§ã‚µã‚¤ãƒ³ã‚¢ãƒƒãƒ—/ãƒ­ã‚°ã‚¤ãƒ³
turso auth signup   # æ–°è¦ä½œæˆ
turso auth login    # æ—¢å­˜ã‚¢ã‚«ã‚¦ãƒ³ãƒˆ
```

### Step 6.3: ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ä½œæˆ

```bash
# ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ä½œæˆ
turso db create ai-workflow-orchestrator

# ä½œæˆã•ã‚ŒãŸDBã®æƒ…å ±ã‚’ç¢ºèª
turso db show ai-workflow-orchestrator

# å‡ºåŠ›ä¾‹:
# Name:           ai-workflow-orchestrator
# URL:            libsql://ai-workflow-orchestrator-your-org.turso.io
# Locations:      nrt (primary)
```

### Step 6.4: èªè¨¼ãƒˆãƒ¼ã‚¯ãƒ³ç”Ÿæˆ

```bash
# èªè¨¼ãƒˆãƒ¼ã‚¯ãƒ³ã‚’ç”Ÿæˆ
turso db tokens create ai-workflow-orchestrator

# å‡ºåŠ›ã•ã‚ŒãŸãƒˆãƒ¼ã‚¯ãƒ³ã‚’ã‚³ãƒ”ãƒ¼ï¼ˆä¸€åº¦ã—ã‹è¡¨ç¤ºã•ã‚Œãªã„ï¼‰
```

### Step 6.5: Railwayç’°å¢ƒå¤‰æ•°ã«è¿½åŠ 

Railwayãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ã§ä»¥ä¸‹ã‚’è¿½åŠ ï¼š

| å¤‰æ•°å               | å€¤                                                    |
| -------------------- | ----------------------------------------------------- |
| `TURSO_DATABASE_URL` | `libsql://ai-workflow-orchestrator-your-org.turso.io` |
| `TURSO_AUTH_TOKEN`   | ï¼ˆç”Ÿæˆã—ãŸãƒˆãƒ¼ã‚¯ãƒ³ï¼‰                                  |

### Step 6.6: ãƒ­ãƒ¼ã‚«ãƒ«é–‹ç™ºç”¨ã®è¨­å®š

`.env.local` ã«è¿½åŠ ï¼š

```bash
# Tursoï¼ˆã‚¯ãƒ©ã‚¦ãƒ‰æ¥ç¶šï¼‰
TURSO_DATABASE_URL=libsql://ai-workflow-orchestrator-your-org.turso.io
TURSO_AUTH_TOKEN=your-auth-token

# ã¾ãŸã¯ã€ãƒ­ãƒ¼ã‚«ãƒ«SQLiteãƒ•ã‚¡ã‚¤ãƒ«ï¼ˆã‚ªãƒ•ãƒ©ã‚¤ãƒ³é–‹ç™ºï¼‰
# TURSO_DATABASE_URL=file:./data/local.db
```

---

## Part 7: ãƒ‰ãƒ¡ã‚¤ãƒ³è¨­å®š

### Step 7.1: è‡ªå‹•ç”Ÿæˆãƒ‰ãƒ¡ã‚¤ãƒ³ç¢ºèª

1. ã‚µãƒ¼ãƒ“ã‚¹ã‚«ãƒ¼ãƒ‰ã‚’ã‚¯ãƒªãƒƒã‚¯
2. **Settings** ã‚¿ãƒ–ã‚’ã‚¯ãƒªãƒƒã‚¯
3. **Networking** ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã‚’æ¢ã™
4. **Generate Domain** ã‚’ã‚¯ãƒªãƒƒã‚¯
5. è‡ªå‹•ç”Ÿæˆã•ã‚ŒãŸURLï¼ˆä¾‹: `your-app-production.up.railway.app`ï¼‰ãŒè¡¨ç¤ºã•ã‚Œã‚‹

### Step 7.2: ã‚«ã‚¹ã‚¿ãƒ ãƒ‰ãƒ¡ã‚¤ãƒ³è¨­å®šï¼ˆã‚ªãƒ—ã‚·ãƒ§ãƒ³ï¼‰

1. **+ Custom Domain** ã‚’ã‚¯ãƒªãƒƒã‚¯
2. ã‚«ã‚¹ã‚¿ãƒ ãƒ‰ãƒ¡ã‚¤ãƒ³ã‚’å…¥åŠ›ï¼ˆä¾‹: `api.yourdomain.com`ï¼‰
3. è¡¨ç¤ºã•ã‚Œã‚‹CNAMEãƒ¬ã‚³ãƒ¼ãƒ‰ã‚’DNSã«è¨­å®šï¼š

| ã‚¿ã‚¤ãƒ— | åå‰  | å€¤                        |
| ------ | ----- | ------------------------- |
| CNAME  | `api` | `your-app.up.railway.app` |

4. DNSä¼æ’­å¾Œã€è‡ªå‹•çš„ã«SSLè¨¼æ˜æ›¸ãŒç™ºè¡Œã•ã‚Œã‚‹

---

## Part 8: ãƒ˜ãƒ«ã‚¹ãƒã‚§ãƒƒã‚¯è¨­å®š

### Step 8.1: Railwayå´ã®è¨­å®š

1. ã‚µãƒ¼ãƒ“ã‚¹ã‚«ãƒ¼ãƒ‰ã‚’ã‚¯ãƒªãƒƒã‚¯
2. **Settings** ã‚¿ãƒ–ã‚’ã‚¯ãƒªãƒƒã‚¯
3. **Deploy** ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã‚’æ¢ã™
4. ä»¥ä¸‹ã‚’è¨­å®šï¼š

| è¨­å®šé …ç›®            | å€¤            |
| ------------------- | ------------- |
| Healthcheck Path    | `/api/health` |
| Healthcheck Timeout | `100`         |

---

## Part 9: ãƒ‡ãƒ—ãƒ­ã‚¤å®Ÿè¡Œ

### Step 9.1: è‡ªå‹•ãƒ‡ãƒ—ãƒ­ã‚¤ç¢ºèª

GitHubã«ãƒ—ãƒƒã‚·ãƒ¥ã™ã‚‹ã¨è‡ªå‹•çš„ã«ãƒ‡ãƒ—ãƒ­ã‚¤ãŒé–‹å§‹ã•ã‚Œã¾ã™ã€‚

### Step 9.2: æ‰‹å‹•ãƒ‡ãƒ—ãƒ­ã‚¤ï¼ˆå¿…è¦ã«å¿œã˜ã¦ï¼‰

1. ã‚µãƒ¼ãƒ“ã‚¹ã‚«ãƒ¼ãƒ‰ã‚’ã‚¯ãƒªãƒƒã‚¯
2. **Deployments** ã‚¿ãƒ–ã‚’ã‚¯ãƒªãƒƒã‚¯
3. **Deploy** ãƒœã‚¿ãƒ³ã‚’ã‚¯ãƒªãƒƒã‚¯

### Step 9.3: ãƒ‡ãƒ—ãƒ­ã‚¤çŠ¶æ³ç¢ºèª

1. ãƒ‡ãƒ—ãƒ­ã‚¤ãƒ¡ãƒ³ãƒˆä¸€è¦§ã«æ–°ã—ã„ãƒ‡ãƒ—ãƒ­ã‚¤ãŒè¡¨ç¤ºã•ã‚Œã‚‹
2. ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ã‚’ç¢ºèªï¼š
   - ğŸŸ¡ **Building**: ãƒ“ãƒ«ãƒ‰ä¸­
   - ğŸŸ¡ **Deploying**: ãƒ‡ãƒ—ãƒ­ã‚¤ä¸­
   - ğŸŸ¢ **Success**: æˆåŠŸ
   - ğŸ”´ **Failed**: å¤±æ•—

### Step 9.4: ãƒ­ã‚°ç¢ºèª

1. ãƒ‡ãƒ—ãƒ­ã‚¤ãƒ¡ãƒ³ãƒˆã‚’ã‚¯ãƒªãƒƒã‚¯
2. **Build Logs** ã‚¿ãƒ–ã§ãƒ“ãƒ«ãƒ‰ãƒ­ã‚°ã‚’ç¢ºèª
3. **Deploy Logs** ã‚¿ãƒ–ã§ãƒ©ãƒ³ã‚¿ã‚¤ãƒ ãƒ­ã‚°ã‚’ç¢ºèª

---

## Part 10: ãƒ‡ãƒ—ãƒ­ã‚¤æ–¹æ³•ã®é¸æŠ

### æ¨å¥¨: Railway GitHubé€£æºã«ã‚ˆã‚‹è‡ªå‹•ãƒ‡ãƒ—ãƒ­ã‚¤

**ã“ã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã§ã¯ Railwayå´ã® GitHub Integration ã‚’ä½¿ç”¨ã—ã¾ã™ã€‚**

è©³ç´°ãªè¨­å®šæ‰‹é †ã¯ä»¥ä¸‹ã‚’å‚ç…§:

- **[Railway GitHubé€£æºè¨­å®šã‚¬ã‚¤ãƒ‰](./railway-github-integration-setup.md)** â† æ¨å¥¨

**ãƒ¡ãƒªãƒƒãƒˆ**:

- âœ… è¨­å®šãŒã‚·ãƒ³ãƒ—ãƒ«ï¼ˆGitHub Secretsä¸è¦ï¼‰
- âœ… Railway UIã§ãƒ‡ãƒ—ãƒ­ã‚¤ãƒ­ã‚°ã‚’ä¸€å…ƒç®¡ç†
- âœ… ãƒ­ãƒ¼ãƒ«ãƒãƒƒã‚¯ãŒç°¡å˜
- âœ… GitHub Actionsã¯å“è³ªãƒã‚§ãƒƒã‚¯ï¼ˆCIï¼‰ã®ã¿ã«å°‚å¿µ

---

## Part 11: GitHub Secretsè¨­å®šï¼ˆæ—§æ–¹å¼ãƒ»éæ¨å¥¨ï¼‰

> **æ³¨æ„**: ä»¥ä¸‹ã¯GitHub Actionsã‹ã‚‰Railway CLIã§ç›´æ¥ãƒ‡ãƒ—ãƒ­ã‚¤ã™ã‚‹æ—§æ–¹å¼ã§ã™ã€‚
> ç¾åœ¨ã¯ **Part 10ã®Railway GitHubé€£æº** ã‚’æ¨å¥¨ã—ã¾ã™ã€‚

### RAILWAY_TOKENã¨ã¯ï¼Ÿï¼ˆå‚è€ƒï¼‰

**RAILWAY_TOKEN**ã¯ã€GitHub Actionsã‹ã‚‰Railwayã«ãƒ‡ãƒ—ãƒ­ã‚¤ã™ã‚‹ãŸã‚ã®èªè¨¼ãƒˆãƒ¼ã‚¯ãƒ³ã§ã™ã€‚

#### ãªãœå¿…è¦ãªã®ã‹ï¼Ÿ

GitHub Actionsãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ãŒè‡ªå‹•çš„ã«Railwayã¸ãƒ‡ãƒ—ãƒ­ã‚¤ã™ã‚‹éš›ã€Railway APIã«å¯¾ã—ã¦ã€Œã“ã®ãƒªã‚¯ã‚¨ã‚¹ãƒˆã¯æ­£è¦ã®ã‚‚ã®ã§ã™ã€ã¨è¨¼æ˜ã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚RAILWAY_TOKENã¯ãã®èªè¨¼ã«ä½¿ç”¨ã•ã‚Œã¾ã™ã€‚

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    RAILWAY_TOKENã§èªè¨¼   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  GitHub Actions â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â†’ â”‚    Railway      â”‚
â”‚  (CI/CD)        â”‚                          â”‚    (ãƒ‡ãƒ—ãƒ­ã‚¤)    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â†‘
        â”‚ secrets.RAILWAY_TOKEN ã‚’å‚ç…§
        â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ GitHub Secrets  â”‚ â† å®‰å…¨ã«æš—å·åŒ–ã—ã¦ä¿ç®¡
â”‚ (ãƒªãƒã‚¸ãƒˆãƒªè¨­å®š) â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### GitHub Secretsã¨ã¯ï¼Ÿ

GitHub Secretsã¯ã€APIã‚­ãƒ¼ã‚„ãƒˆãƒ¼ã‚¯ãƒ³ãªã©ã®æ©Ÿå¯†æƒ…å ±ã‚’å®‰å…¨ã«ä¿ç®¡ã™ã‚‹GitHubã®æ©Ÿèƒ½ã§ã™ã€‚

| ç‰¹å¾´                 | èª¬æ˜                                   |
| -------------------- | -------------------------------------- |
| **æš—å·åŒ–**           | ä¿å­˜æ™‚ã«æš—å·åŒ–ã•ã‚Œã€ãƒ­ã‚°ã«å‡ºåŠ›ã•ã‚Œãªã„ |
| **ã‚¢ã‚¯ã‚»ã‚¹åˆ¶é™**     | ãƒªãƒã‚¸ãƒˆãƒªç®¡ç†è€…ã®ã¿è¨­å®šå¯èƒ½           |
| **ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼å°‚ç”¨** | GitHub Actionsã‹ã‚‰ã®ã¿å‚ç…§å¯èƒ½         |
| **ã‚³ãƒ¼ãƒ‰ã«å«ã‚ãªã„** | ã‚½ãƒ¼ã‚¹ã‚³ãƒ¼ãƒ‰ã«ãƒãƒ¼ãƒ‰ã‚³ãƒ¼ãƒ‰ã—ãªã„       |

### Step 10.1: Railway Tokenã‚’å–å¾—

1. https://railway.app ã«ãƒ­ã‚°ã‚¤ãƒ³
2. å³ä¸Šã®ã‚¢ã‚«ã‚¦ãƒ³ãƒˆã‚¢ã‚¤ã‚³ãƒ³ã‚’ã‚¯ãƒªãƒƒã‚¯
3. **Account Settings** ã‚’é¸æŠ
4. å·¦ã‚µã‚¤ãƒ‰ãƒãƒ¼ã® **Tokens** ã‚’ã‚¯ãƒªãƒƒã‚¯
5. **+ Create Token** ã‚’ã‚¯ãƒªãƒƒã‚¯
6. åå‰ã‚’å…¥åŠ›: `GitHub Actions`
7. **Create** ã‚’ã‚¯ãƒªãƒƒã‚¯
8. è¡¨ç¤ºã•ã‚ŒãŸãƒˆãƒ¼ã‚¯ãƒ³ã‚’ã‚³ãƒ”ãƒ¼

> âš ï¸ **é‡è¦**: ãƒˆãƒ¼ã‚¯ãƒ³ã¯**ä¸€åº¦ã—ã‹è¡¨ç¤ºã•ã‚Œã¾ã›ã‚“**ã€‚å¿…ãšã“ã®æ™‚ç‚¹ã§ã‚³ãƒ”ãƒ¼ã—ã¦ãã ã•ã„ã€‚
> ç´›å¤±ã—ãŸå ´åˆã¯ã€å¤ã„ãƒˆãƒ¼ã‚¯ãƒ³ã‚’å‰Šé™¤ã—ã¦æ–°ã—ãä½œæˆã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚

### Step 10.2: GitHubã«ã‚·ãƒ¼ã‚¯ãƒ¬ãƒƒãƒˆè¿½åŠ 

1. GitHubãƒªãƒã‚¸ãƒˆãƒªã‚’é–‹ãï¼ˆhttps://github.com/your-username/AIWorkflowOrchestratorï¼‰
2. **Settings** ã‚¿ãƒ–ã‚’ã‚¯ãƒªãƒƒã‚¯
3. å·¦ã‚µã‚¤ãƒ‰ãƒãƒ¼ã® **Secrets and variables** â†’ **Actions** ã‚’ã‚¯ãƒªãƒƒã‚¯
4. **New repository secret** ã‚’ã‚¯ãƒªãƒƒã‚¯
5. ä»¥ä¸‹ã‚’å…¥åŠ›ï¼š

| é …ç›®   | å€¤                 |
| ------ | ------------------ |
| Name   | `RAILWAY_TOKEN`    |
| Secret | ã‚³ãƒ”ãƒ¼ã—ãŸãƒˆãƒ¼ã‚¯ãƒ³ |

6. **Add secret** ã‚’ã‚¯ãƒªãƒƒã‚¯

### Step 10.3: è¨­å®šã®ç¢ºèª

è¨­å®šå¾Œã€Secretsãƒªã‚¹ãƒˆã« `RAILWAY_TOKEN` ãŒè¡¨ç¤ºã•ã‚Œã¾ã™ï¼ˆå€¤ã¯éè¡¨ç¤ºï¼‰ã€‚

```
Repository secrets
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
RAILWAY_TOKEN    Updated 2 minutes ago
```

### GitHub Actionsã§ã®ä½¿ç”¨æ–¹æ³•

ã“ã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã§ã¯ã€Railway CLIã‚’ä½¿ç”¨ã—ãŸæœ¬æ ¼çš„ãªãƒ‡ãƒ—ãƒ­ã‚¤ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ã‚’å®Ÿè£…ã—ã¦ã„ã¾ã™ã€‚

#### å®Ÿè£…æ¸ˆã¿ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼

`.github/workflows/deploy-backend.yml` ã«ä»¥ä¸‹ã®æ©Ÿèƒ½ã‚’å®Ÿè£…ï¼š

**3æ®µéšãƒ‡ãƒ—ãƒ­ã‚¤ãƒ—ãƒ­ã‚»ã‚¹**:

1. **Validateï¼ˆæ¤œè¨¼ï¼‰**: ãƒ“ãƒ«ãƒ‰ãƒ»ãƒ†ã‚¹ãƒˆãƒ»å‹ãƒã‚§ãƒƒã‚¯ãƒ»Lintã‚’å®Ÿè¡Œ
2. **Deployï¼ˆãƒ‡ãƒ—ãƒ­ã‚¤ï¼‰**: Railway CLIã§ãƒ‡ãƒ—ãƒ­ã‚¤ + ãƒ˜ãƒ«ã‚¹ãƒã‚§ãƒƒã‚¯
3. **Notifyï¼ˆé€šçŸ¥ï¼‰**: ãƒ‡ãƒ—ãƒ­ã‚¤çµæœã‚’é€šçŸ¥

**ä¸»è¦æ©Ÿèƒ½**:

| æ©Ÿèƒ½               | èª¬æ˜                                                       |
| ------------------ | ---------------------------------------------------------- |
| **è‡ªå‹•ãƒˆãƒªã‚¬ãƒ¼**   | `apps/backend/**` ã‚„ `packages/shared/**` ã®å¤‰æ›´ã§è‡ªå‹•å®Ÿè¡Œ |
| **æ‰‹å‹•ãƒˆãƒªã‚¬ãƒ¼**   | GitHub UI ã‹ã‚‰æ‰‹å‹•ã§ãƒ‡ãƒ—ãƒ­ã‚¤å¯èƒ½ï¼ˆ`workflow_dispatch`ï¼‰    |
| **åŒæ™‚å®Ÿè¡Œåˆ¶å¾¡**   | 1ã¤ã®ãƒ‡ãƒ—ãƒ­ã‚¤ã®ã¿å®Ÿè¡Œï¼ˆ`concurrency`ï¼‰                     |
| **ç’°å¢ƒå¤‰æ•°ä¿è­·**   | `RAILWAY_TOKEN` ãªã©ã¯ `***` ã¨ã—ã¦ãƒã‚¹ã‚¯                  |
| **ãƒ˜ãƒ«ã‚¹ãƒã‚§ãƒƒã‚¯** | ãƒ‡ãƒ—ãƒ­ã‚¤å¾Œã« `/api/health` ã§å‹•ä½œç¢ºèª                      |

#### å¿…è¦ãªGitHub Secrets

| Secretå             | ç”¨é€”                   | å–å¾—æ–¹æ³•                                                 |
| -------------------- | ---------------------- | -------------------------------------------------------- |
| `RAILWAY_TOKEN`      | Railwayèªè¨¼ï¼ˆå¿…é ˆï¼‰    | Part 10.1å‚ç…§                                            |
| `RAILWAY_PROJECT_ID` | ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆIDï¼ˆæ¨å¥¨ï¼‰ | Railwayãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ã‹ã‚‰å–å¾—                            |
| `RAILWAY_DOMAIN`     | ãƒ‡ãƒ—ãƒ­ã‚¤URLï¼ˆæ¨å¥¨ï¼‰    | Part 7.1å‚ç…§ï¼ˆä¾‹: `your-app-production.up.railway.app`ï¼‰ |

#### RAILWAY_PROJECT_IDã®å–å¾—æ–¹æ³•

1. Railwayãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ã‚’é–‹ã
2. ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚’é¸æŠ
3. **Settings** â†’ **General**
4. **Project ID** ã‚’ã‚³ãƒ”ãƒ¼

#### ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ã®å®Ÿè¡Œç¢ºèª

1. GitHubãƒªãƒã‚¸ãƒˆãƒª â†’ **Actions** ã‚¿ãƒ–
2. **Deploy Backend to Railway** ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ã‚’é¸æŠ
3. æœ€æ–°ã®å®Ÿè¡Œã‚’ç¢ºèª

**æˆåŠŸæ™‚ã®è¡¨ç¤º**:

```
âœ… Validate Build (2åˆ†30ç§’)
âœ… Deploy to Railway (1åˆ†20ç§’)
âœ… Notify Deployment (5ç§’)
```

#### æ‰‹å‹•ãƒ‡ãƒ—ãƒ­ã‚¤ã®å®Ÿè¡Œæ–¹æ³•

1. **Actions** ã‚¿ãƒ– â†’ **Deploy Backend to Railway**
2. **Run workflow** ãƒ‰ãƒ­ãƒƒãƒ—ãƒ€ã‚¦ãƒ³ â†’ **Run workflow**
3. ãƒ–ãƒ©ãƒ³ãƒã‚’é¸æŠï¼ˆé€šå¸¸ã¯ `main`ï¼‰
4. **Run workflow** ã‚’ã‚¯ãƒªãƒƒã‚¯

> **æ³¨æ„**: `${{ secrets.RAILWAY_TOKEN }}` ã®å½¢å¼ã§å‚ç…§ã—ã¾ã™ã€‚
> ã“ã®å€¤ã¯ãƒ­ã‚°ã«ã¯ `***` ã¨ã—ã¦ãƒã‚¹ã‚¯ã•ã‚Œã€æ¼æ´©ã‚’é˜²ãã¾ã™ã€‚

### ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°

#### ã€ŒAuthentication failedã€ã‚¨ãƒ©ãƒ¼

1. ãƒˆãƒ¼ã‚¯ãƒ³ãŒæ­£ã—ãã‚³ãƒ”ãƒ¼ã•ã‚Œã¦ã„ã‚‹ã‹ç¢ºèª
2. ãƒˆãƒ¼ã‚¯ãƒ³ã®å‰å¾Œã«ä½™åˆ†ãªã‚¹ãƒšãƒ¼ã‚¹ãŒãªã„ã‹ç¢ºèª
3. Railwayã§ãƒˆãƒ¼ã‚¯ãƒ³ãŒæœ‰åŠ¹ã‹ç¢ºèªï¼ˆå‰Šé™¤ã•ã‚Œã¦ã„ãªã„ã‹ï¼‰

#### ã€ŒSecret not foundã€ã‚¨ãƒ©ãƒ¼

1. SecretåãŒ `RAILWAY_TOKEN` ã¨å®Œå…¨ä¸€è‡´ã—ã¦ã„ã‚‹ã‹ç¢ºèªï¼ˆå¤§æ–‡å­—å°æ–‡å­—ã‚’åŒºåˆ¥ï¼‰
2. ãƒªãƒã‚¸ãƒˆãƒªã®Secretsã«è¿½åŠ ã—ãŸã‹ç¢ºèªï¼ˆOrganization Secretsã§ã¯ãªã„ï¼‰

#### ãƒˆãƒ¼ã‚¯ãƒ³ã‚’å†ç”Ÿæˆã—ãŸã„å ´åˆ

1. Railway â†’ Account Settings â†’ Tokens
2. å¤ã„ãƒˆãƒ¼ã‚¯ãƒ³ã‚’ **Delete**
3. æ–°ã—ã„ãƒˆãƒ¼ã‚¯ãƒ³ã‚’ **Create**
4. GitHubã®Secretã‚’æ›´æ–°

---

## Part 11: å‹•ä½œç¢ºèª

### Step 11.1: ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆç¢ºèª

ãƒ–ãƒ©ã‚¦ã‚¶ã¾ãŸã¯curlã§ã‚¢ã‚¯ã‚»ã‚¹ï¼š

```bash
# ãƒ˜ãƒ«ã‚¹ãƒã‚§ãƒƒã‚¯
curl https://your-app-production.up.railway.app/api/health
```

**æœŸå¾…ã™ã‚‹å¿œç­”**:

```json
{
  "status": "healthy",
  "timestamp": "2025-01-01T00:00:00.000Z",
  "version": "1.0.0",
  "uptime": 123
}
```

### Step 11.2: ãƒ­ã‚°ç¢ºèªï¼ˆCLIï¼‰

```bash
# Railway CLIã§ãƒ­ã‚°ç¢ºèªï¼ˆCLIã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«æ¸ˆã¿ã®å ´åˆï¼‰
railway logs
```

---

## Part 12: è¨­å®šå®Œäº†å¾Œã®ãƒ“ãƒ«ãƒ‰ã¨æ¤œè¨¼ï¼ˆã¾ã¨ã‚ï¼‰

ã™ã¹ã¦ã®è¨­å®šãŒå®Œäº†ã—ãŸã‚‰ã€ä»¥ä¸‹ã®æ‰‹é †ã§å‹•ä½œã‚’æ¤œè¨¼ã—ã¾ã™ã€‚

### Step 12.1: ãƒ­ãƒ¼ã‚«ãƒ«ã§ã®å®Œå…¨ãƒ“ãƒ«ãƒ‰ç¢ºèª

```bash
# 1. ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆãƒ«ãƒ¼ãƒˆã«ç§»å‹•
cd /path/to/AIWorkflowOrchestrator

# 2. ã‚¯ãƒªãƒ¼ãƒ³ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ï¼ˆæ¨å¥¨ï¼‰
rm -rf node_modules
pnpm install

# 3. å…±æœ‰ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‚’ãƒ“ãƒ«ãƒ‰
pnpm --filter @repo/shared build

# 4. ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ã‚’ãƒ“ãƒ«ãƒ‰
pnpm --filter @repo/backend build
```

**æœŸå¾…ã•ã‚Œã‚‹å‡ºåŠ›**:

```
âœ“ Compiled successfully
âœ“ Generating static pages
Route (app)                              Size     First Load JS
â”Œ â—‹ /                                    xxx B          xxx kB
â”” â—‹ /api/health                          0 B            xxx kB
```

### Step 12.2: ãƒ†ã‚¹ãƒˆå®Ÿè¡Œã¨ç¢ºèª

```bash
# ã™ã¹ã¦ã®ãƒ†ã‚¹ãƒˆã‚’å®Ÿè¡Œ
pnpm --filter @repo/backend test:run
```

**æœŸå¾…ã•ã‚Œã‚‹å‡ºåŠ›**:

```
 âœ“ src/__tests__/health.test.ts (5 tests) xxxms
   âœ“ should return healthy status
   âœ“ should include version from environment variable
   âœ“ should default version to 1.0.0 if not set
   âœ“ should return valid timestamp in ISO format
   âœ“ should return uptime as a number

 Test Files  1 passed (1)
 Tests       5 passed (5)
```

### Step 12.3: ãƒ­ãƒ¼ã‚«ãƒ«å‹•ä½œç¢ºèª

```bash
# é–‹ç™ºã‚µãƒ¼ãƒãƒ¼ã‚’èµ·å‹•
pnpm --filter @repo/backend dev
```

åˆ¥ã®ã‚¿ãƒ¼ãƒŸãƒŠãƒ«ã§ï¼š

```bash
# ãƒ˜ãƒ«ã‚¹ãƒã‚§ãƒƒã‚¯APIã‚’ãƒ†ã‚¹ãƒˆ
curl -s http://localhost:3001/api/health | jq .
```

**æœŸå¾…ã•ã‚Œã‚‹å¿œç­”**:

```json
{
  "status": "healthy",
  "timestamp": "2025-xx-xxTxx:xx:xx.xxxZ",
  "version": "1.0.0",
  "uptime": 5
}
```

### Step 12.4: Railwayãƒ‡ãƒ—ãƒ­ã‚¤å¾Œã®ç¢ºèª

```bash
# ãƒ‡ãƒ—ãƒ­ã‚¤ã•ã‚ŒãŸAPIã‚’ãƒ†ã‚¹ãƒˆ
curl -s https://your-app-production.up.railway.app/api/health | jq .
```

**æœŸå¾…ã•ã‚Œã‚‹å¿œç­”**: ãƒ­ãƒ¼ã‚«ãƒ«ã¨åŒã˜JSONå½¢å¼

### Step 12.5: å•é¡Œç™ºç”Ÿæ™‚ã®ç¢ºèªã‚³ãƒãƒ³ãƒ‰

```bash
# å‹ãƒã‚§ãƒƒã‚¯
pnpm --filter @repo/backend typecheck

# ãƒªãƒ³ãƒˆ
pnpm --filter @repo/backend lint

# ä¾å­˜é–¢ä¿‚ã®ç¢ºèª
pnpm --filter @repo/backend list

# ãƒ“ãƒ«ãƒ‰ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã‚¯ãƒªã‚¢
rm -rf apps/backend/.next
pnpm --filter @repo/backend build
```

---

## è¨­å®šå®Œäº†ãƒã‚§ãƒƒã‚¯ãƒªã‚¹ãƒˆ

### ãƒ­ãƒ¼ã‚«ãƒ«ç’°å¢ƒ

- [ ] ä¾å­˜é–¢ä¿‚ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ãŸ (`pnpm install`)
- [ ] å…±æœ‰ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‚’ãƒ“ãƒ«ãƒ‰ã—ãŸ (`pnpm --filter @repo/shared build`)
- [ ] ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ã‚’ãƒ“ãƒ«ãƒ‰ã—ãŸ (`pnpm --filter @repo/backend build`)
- [ ] ãƒ†ã‚¹ãƒˆãŒé€šéã—ãŸ (`pnpm --filter @repo/backend test:run`)
- [ ] ãƒ­ãƒ¼ã‚«ãƒ«ã§å‹•ä½œç¢ºèªã—ãŸ (`pnpm --filter @repo/backend dev`)

### GitHub

- [ ] å¤‰æ›´ã‚’ã‚³ãƒŸãƒƒãƒˆãƒ»ãƒ—ãƒƒã‚·ãƒ¥ã—ãŸ
- [ ] GitHub Secretsã« `RAILWAY_TOKEN` ã‚’è¿½åŠ ã—ãŸ

### Railway

- [ ] Railwayã‚¢ã‚«ã‚¦ãƒ³ãƒˆã‚’ä½œæˆã—ãŸ
- [ ] GitHubãƒªãƒã‚¸ãƒˆãƒªã‚’æ¥ç¶šã—ãŸ
- [ ] Root Directoryã‚’ `apps/backend` ã«è¨­å®šã—ãŸ
- [ ] ãƒ“ãƒ«ãƒ‰ã‚³ãƒãƒ³ãƒ‰ã‚’è¨­å®šã—ãŸ
- [ ] ã‚¹ã‚¿ãƒ¼ãƒˆã‚³ãƒãƒ³ãƒ‰ã‚’è¨­å®šã—ãŸ
- [ ] ç’°å¢ƒå¤‰æ•°ã‚’è¨­å®šã—ãŸ
- [ ] ãƒ‰ãƒ¡ã‚¤ãƒ³ã‚’ç”Ÿæˆã—ãŸ
- [ ] ãƒ˜ãƒ«ã‚¹ãƒã‚§ãƒƒã‚¯ã‚’è¨­å®šã—ãŸ
- [ ] ãƒ‡ãƒ—ãƒ­ã‚¤ãŒæˆåŠŸã—ãŸ

---

## ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°

### ã€Œãƒ“ãƒ«ãƒ‰ã«å¤±æ•—ã—ãŸã€

1. **Build Logs** ã‚’ç¢ºèª
2. ã‚ˆãã‚ã‚‹åŸå› ï¼š
   - Root DirectoryãŒæ­£ã—ãè¨­å®šã•ã‚Œã¦ã„ãªã„
   - ä¾å­˜é–¢ä¿‚ã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã‚¨ãƒ©ãƒ¼
   - TypeScriptã‚³ãƒ³ãƒ‘ã‚¤ãƒ«ã‚¨ãƒ©ãƒ¼

**å¯¾å‡¦æ³•**ï¼š

```bash
# ãƒ­ãƒ¼ã‚«ãƒ«ã§ãƒ“ãƒ«ãƒ‰ã‚’ç¢ºèª
pnpm --filter @repo/shared build
pnpm --filter @repo/backend build
```

### ã€Œãƒ‡ãƒ—ãƒ­ã‚¤ã¯æˆåŠŸã—ãŸãŒã‚¢ã‚¯ã‚»ã‚¹ã§ããªã„ã€

1. **Networking** ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã§ãƒ‰ãƒ¡ã‚¤ãƒ³ãŒç”Ÿæˆã•ã‚Œã¦ã„ã‚‹ã‹ç¢ºèª
2. ãƒãƒ¼ãƒˆè¨­å®šã‚’ç¢ºèªï¼ˆNext.jsã¯ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã§3000ç•ªãƒãƒ¼ãƒˆï¼‰
3. ãƒ˜ãƒ«ã‚¹ãƒã‚§ãƒƒã‚¯ãŒå¤±æ•—ã—ã¦ã„ãªã„ã‹ç¢ºèª

### ã€Œãƒ˜ãƒ«ã‚¹ãƒã‚§ãƒƒã‚¯ã«å¤±æ•—ã€

1. Healthcheck PathãŒ `/api/health` ã«ãªã£ã¦ã„ã‚‹ã‹ç¢ºèª
2. ãƒ­ãƒ¼ã‚«ãƒ«ã§ `curl http://localhost:3001/api/health` ãŒå‹•ä½œã™ã‚‹ã‹ç¢ºèª

### ã€Œãƒ¡ãƒ¢ãƒªä¸è¶³ã‚¨ãƒ©ãƒ¼ã€

1. ã‚µãƒ¼ãƒ“ã‚¹ã® **Metrics** ã‚¿ãƒ–ã§ãƒªã‚½ãƒ¼ã‚¹ä½¿ç”¨é‡ã‚’ç¢ºèª
2. **Settings** â†’ **Resources** ã§ãƒ¡ãƒ¢ãƒªä¸Šé™ã‚’èª¿æ•´

---

## Railway CLIï¼ˆã‚ªãƒ—ã‚·ãƒ§ãƒ³ï¼‰

### ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«

```bash
# pnpm
pnpm add -g @railway/cli

# Homebrew (macOS)
brew install railway
```

### ã‚ˆãä½¿ã†ã‚³ãƒãƒ³ãƒ‰

| ã‚³ãƒãƒ³ãƒ‰            | èª¬æ˜                 |
| ------------------- | -------------------- |
| `railway login`     | ãƒ­ã‚°ã‚¤ãƒ³             |
| `railway link`      | ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆé¸æŠ     |
| `railway up`        | æ‰‹å‹•ãƒ‡ãƒ—ãƒ­ã‚¤         |
| `railway logs`      | ãƒ­ã‚°ç¢ºèª             |
| `railway variables` | ç’°å¢ƒå¤‰æ•°ç¢ºèª         |
| `railway open`      | ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ã‚’é–‹ã |

---

## æ–™é‡‘ç›®å®‰

| ãƒªã‚½ãƒ¼ã‚¹     | å˜ä¾¡ï¼ˆ2025å¹´æ™‚ç‚¹ï¼‰   |
| ------------ | -------------------- |
| CPU          | $0.000463/vCPU/åˆ†    |
| ãƒ¡ãƒ¢ãƒª       | $0.000231/GB/åˆ†      |
| ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ | $0.10/GBï¼ˆé€ä¿¡ï¼‰     |
| PostgreSQL   | ä½¿ç”¨ãƒªã‚½ãƒ¼ã‚¹ã«å¿œã˜ã¦ |

**ç›®å®‰**:

- å°è¦æ¨¡ã‚¢ãƒ—ãƒªï¼ˆå¸¸æ™‚ç¨¼åƒï¼‰: $5ã€œ10/æœˆ
- ä¸­è¦æ¨¡ã‚¢ãƒ—ãƒª: $10ã€œ30/æœˆ

---

## æ¬¡ã®ã‚¹ãƒ†ãƒƒãƒ—

| ç›®çš„                       | ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ                                                        |
| -------------------------- | ------------------------------------------------------------------- |
| ãƒ‡ã‚¹ã‚¯ãƒˆãƒƒãƒ—ã‚¢ãƒ—ãƒªã‚’é…å¸ƒ   | [macOSã‚³ãƒ¼ãƒ‰ç½²åã‚¬ã‚¤ãƒ‰](./setup-guide-macos-codesigning.md)         |
| ãƒ­ãƒ¼ã‚«ãƒ«é–‹ç™ºã‚’å§‹ã‚ã‚‹       | [ãƒ­ãƒ¼ã‚«ãƒ«é–‹ç™ºã‚¬ã‚¤ãƒ‰](./setup-guide-local-desktop-development.md)    |
| ãƒªãƒªãƒ¼ã‚¹ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ã‚’ç†è§£ | [Electronãƒ‡ãƒ—ãƒ­ã‚¤ä»•æ§˜](./task-step2-electron-desktop-deployment.md) |

---

## å‚è€ƒãƒªãƒ³ã‚¯

- [Railwayå…¬å¼ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ](https://docs.railway.com/)
- [Railway Quick Start](https://docs.railway.com/quick-start)
- [Monorepoãƒ‡ãƒ—ãƒ­ã‚¤ã‚¬ã‚¤ãƒ‰](https://docs.railway.com/guides/monorepo)
- [PostgreSQLã‚¬ã‚¤ãƒ‰](https://docs.railway.com/guides/postgresql)
- [ç’°å¢ƒå¤‰æ•°ã‚¬ã‚¤ãƒ‰](https://docs.railway.com/guides/variables)
- [Next.jså…¬å¼ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ](https://nextjs.org/docs)
