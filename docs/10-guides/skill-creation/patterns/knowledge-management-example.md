# スキル作成パターン: knowledge-management実例

## 概要

このドキュメントは、skill-librarianエージェントから **knowledge-management** スキルを分離・作成した実例をパターンとして記録したものです。
他のスキル作成時の参考として活用できます。

## 実施情報

- **作成日**: 2025-11-23
- **対象エージェント**: skill-librarian (1849行)
- **作成スキル**: knowledge-management
- **最終行数**: SKILL.md 408行（500行以内 ✓）

---

## 実行したプロセス

### Phase 1: エージェント分析と分離計画

**実行内容**:
1. skill-librarianエージェント(1849行)の全体を読み込み
2. agent_list.mdから必要な5つのスキルを特定:
   - knowledge-management
   - progressive-disclosure
   - documentation-architecture
   - context-optimization
   - best-practices-curation
3. 各スキルの役割と行数目標を決定

**knowledge-managementの役割定義**:
- SECIモデルの適用
- 暗黙知→形式知変換
- 知識キュレーションフレームワーク
- 目標行数: 約350行（SKILL.md本文）

---

### Phase 2: ディレクトリ構造作成

**実行コマンド**:
```bash
mkdir -p .claude/skills/knowledge-management/resources
mkdir -p .claude/skills/knowledge-management/scripts
mkdir -p .claude/skills/knowledge-management/templates
mkdir -p .claude/skills/knowledge-management/assets
```

**結果**:
```
knowledge-management/
├── resources/
├── scripts/
├── templates/
└── assets/
```

---

### Phase 3: SKILL.md作成

**YAML Frontmatter設計**:
```yaml
name: knowledge-management
description: |
  [1-2文の概要]

  専門分野:
  - [領域1]: [詳細]
  - [領域2]: [詳細]

  使用タイミング:
  - [トリガー条件1]
  - [トリガー条件2]

  Use proactively when [条件].
version: 1.0.0
```

**本文構成** (408行):
1. 概要 (約50行)
2. リソース構造 (約30行)
3. いつ使うか (約40行)
4. 前提条件 (約20行)
5. ワークフロー (約100行)
6. リソースへの参照 (約20行)
7. ベストプラクティス (約40行)
8. トラブルシューティング (約50行)
9. 例 (約40行)
10. 関連スキル・メトリクス (約20行)

**重要ポイント**:
- リソース構造セクションを追加（ディレクトリツリーとリソース種別の説明）
- 各Phase で対応するリソースファイルへの参照を明記
- 500行制約を厳守（最終: 408行）

---

### Phase 4: リソースファイル作成

**作成したリソース** (7ファイル):

1. **seci-model-details.md** (349行):
   - SECIサイクルの4モード詳細
   - Claude Codeへの適用指針
   - 実践的なヒント

2. **seci-socialization.md** (357行):
   - 暗黙知収集の方法
   - 収集テクニック（頻度分析、パターン認識）
   - 記録テンプレート

3. **seci-externalization.md** (474行):
   - 暗黙知の言語化テクニック
   - Why分析、パターン抽出、チェックリスト化
   - 言語化の段階と障壁克服

4. **seci-combination.md** (335行):
   - 形式知の統合戦略
   - 矛盾解消、体系化原則
   - Progressive Disclosureとの統合

5. **curation-framework.md** (457行):
   - 収集・評価・統合・更新の4フェーズ
   - 品質メトリクス
   - ツールと自動化

6. **freshness-strategy.md** (460行):
   - 陳腐化の兆候と検出メカニズム
   - 更新戦略と優先順位
   - 更新サイクルの設計

7. **quality-assurance.md** (498行):
   - 品質評価の3軸（完全性・明確性・再現性）
   - 検証プロセス（自己評価→ピアレビュー→実践検証）
   - 継続的品質改善

**行数管理**:
- すべてのリソースが500行以内 ✓
- 最大: quality-assurance.md (498行)
- 最小: seci-combination.md (335行)

---

### Phase 5: スクリプトとテンプレート作成

**スクリプト**: `validate-knowledge.sh` (約160行)
- 必須セクション確認
- ファイルサイズ制約チェック
- プレースホルダー検出
- 陳腐化チェック
- 実行権限付与: `chmod +x`

**テンプレート**: `knowledge-document-template.md` (187行)
- 日本語の知識文書標準テンプレート
- メタデータ、必須セクション、構造を含む
- 即座に使用可能

---

### Phase 6: 統合と登録

**skill_list.md更新**:
```markdown
## ナレッジマネジメント

### knowledge-management
- **ファイル**: `.claude/skills/knowledge-management/SKILL.md`
- **バージョン**: 1.0.0
- **概要**: SECIモデル（野中郁次郎）に基づく...
- **対象エージェント**: @skill-librarian
- **関連スキル**: [4つのスキル]
- **リソース**: [7ファイル + テンプレート + スクリプト]
```

---

## 成功要因

### 設計上の成功要因

1. **明確な役割定義**:
   - SECIモデルに特化
   - 知識管理のフレームワーク提供
   - 他のスキル（progressive-disclosure等）との明確な分離

2. **適切なリソース分割**:
   - SECIの各フェーズごとに独立したリソース
   - 各リソースが500行以内
   - SKILL.mdは目次・概要として機能

3. **実用的なツール提供**:
   - 検証スクリプト: 品質の自動チェック
   - テンプレート: 即座に使える標準フォーマット

### 実装上の成功要因

1. **段階的な作成**:
   - SKILL.md → 主要リソース → 補助リソース → ツール の順
   - 各段階で検証

2. **行数制約の厳守**:
   - 作成中に定期的にwc -lで確認
   - 500行に近づいたら内容を精錬

3. **Progressive Disclosure原則の適用**:
   - SKILL.md: 概要とワークフロー
   - リソース: 詳細な専門知識
   - 明確な参照指示

---

## 再利用可能なパターン

### パターン1: SKILL.md構成

```markdown
---
[YAML Frontmatter]
---

# [スキル名]

## 概要
[2-3段落]

## リソース構造
[ディレクトリツリー + リソース種別説明]

## いつ使うか
[シナリオ1-3]

## 前提条件
[必要な知識・ツール・環境]

## ワークフロー
[Phase 1-4、各Phaseでリソース参照]

## リソースへの参照
[リソースファイルの説明]

## ベストプラクティス
[すべきこと・避けるべきこと]

## トラブルシューティング
[問題1-3]

## 例
[例1-2]

## 関連スキル
[関連スキルのリスト]

## メトリクス
[測定可能な指標]

## 変更履歴
[バージョン履歴テーブル]

## 使用上の注意
[得意なこと・行わないこと・推奨フロー]
```

**セクション別推奨行数**:
- 概要: 30-50行
- リソース構造: 20-30行
- いつ使うか: 30-50行
- 前提条件: 15-25行
- ワークフロー: 80-120行
- ベストプラクティス: 30-50行
- トラブルシューティング: 40-60行
- 例: 30-50行
- その他: 50-80行

**合計**: 350-450行（目標: 400行前後）

---

### パターン2: リソースファイル設計

**命名規則**:
- トピック別: `[topic]-[subtopic].md`
- フェーズ別: `[framework]-[phase].md`
- 機能別: `[function]-[aspect].md`

**構成**:
```markdown
# [リソースタイトル]

## 概要
[このリソースの目的と範囲]

## [セクション1]
[詳細内容]

## [セクション2]
[詳細内容]

## 参考文献
[関連文献]
```

**行数目標**: 300-450行（500行厳守）

---

### パターン3: スクリプト提供

**必要条件**:
- 検証や自動化が有益な場合
- 繰り返し実行される処理がある場合

**必須要素**:
- shebang: `#!/bin/bash`
- エラーハンドリング: `set -e`
- ヘルプメッセージ
- 実行権限: `chmod +x`

**knowledge-managementでの実装**:
```bash
#!/bin/bash
# Knowledge Validation Script

set -e

# カラー出力
# 検証関数群
# メイン処理
```

---

### パターン4: テンプレート提供

**必要条件**:
- ユーザーが同様の文書を作成する場合
- 標準フォーマットが存在する場合

**テンプレート要素**:
- プレースホルダー: `[項目名]`, `YYYY-MM-DD`
- 必須セクション
- コメントによる説明
- 使用例

---

## 学んだ教訓

### 成功したこと

1. **リソース構造セクションの追加**:
   - ディレクトリツリーの視覚化
   - リソース種別の明確な説明
   - リソースの目的と使い方を明記
   - → 発見可能性が大幅向上

2. **各Phaseでのリソース参照**:
   - ワークフローの各Phaseで対応するリソースを明示
   - → ユーザーが必要な時に必要な情報にすぐアクセス可能

3. **実用的なツール提供**:
   - 検証スクリプト: 品質チェックの自動化
   - テンプレート: 即座に使える標準フォーマット
   - → 実践での活用が容易

### 改善の余地

1. **assets/ディレクトリ未使用**:
   - 今回は不要だったが、スキーマ定義やサンプルデータがある場合は活用

2. **スクリプトの言語選択**:
   - Bash（Unix系のみ）でなく、Node.jsやPythonの方がクロスプラットフォーム

---

## 次回への適用

### progressive-disclosure スキル作成時

**予想される構造**:
```
progressive-disclosure/
├── SKILL.md (400行目標)
├── resources/
│   ├── three-layer-model.md          # 3層開示モデル詳細
│   ├── token-efficiency.md           # トークン効率化戦略
│   ├── skill-activation.md           # スキル発動最適化
│   └── metadata-design.md            # メタデータ設計
├── scripts/
│   └── calculate-token-usage.sh      # トークン使用量計算
└── templates/
    └── skill-template.md             # スキルテンプレート
```

**適用するパターン**:
- パターン1: SKILL.md構成（同じセクション構成）
- パターン2: リソースファイル設計（トピック別命名）
- パターン3: スクリプト提供（トークン計算の自動化）
- パターン4: テンプレート提供（スキル作成テンプレート）

### documentation-architecture スキル作成時

**予想される構造**:
```
documentation-architecture/
├── SKILL.md (350行目標)
├── resources/
│   ├── topic-based-splitting.md      # トピック別分割
│   ├── level-based-splitting.md      # レベル別分割
│   ├── hybrid-splitting.md           # ハイブリッド分割
│   └── metadata-optimization.md      # メタデータ最適化
├── scripts/
│   └── analyze-structure.sh          # 構造分析
└── templates/
    └── resource-structure.md         # リソース構造テンプレート
```

---

## チェックリスト（再利用可能）

### Phase 3: SKILL.md作成
- [ ] YAML Frontmatterが完全（name, description, version）
- [ ] descriptionに具体的なトリガー条件が3つ以上
- [ ] リソース構造セクションがある
- [ ] ワークフローが3段階以上
- [ ] 各Phaseでリソース参照が明記されている
- [ ] 例が2つ以上
- [ ] 関連スキルが明記されている
- [ ] 行数が500行以内

### Phase 4: リソース作成
- [ ] 各リソースが独立したトピックを扱う
- [ ] 各リソースが500行以内
- [ ] SKILL.mdから明確に参照されている
- [ ] リソース間の重複がない
- [ ] 独立して理解可能

### Phase 5: ツール作成
- [ ] スクリプトに実行権限（chmod +x）
- [ ] エラーハンドリング（set -e）
- [ ] ヘルプメッセージ
- [ ] カラー出力（可読性向上）

### Phase 6: 検証
- [ ] すべてのファイルが500行以内
- [ ] SKILL.mdが適切な行数（350-450行）
- [ ] リソース参照パスが正確
- [ ] スクリプトが実行可能

---

## メトリクス

### knowledge-management スキル

**ファイル数**: 10
- SKILL.md: 1
- resources/: 7
- scripts/: 1
- templates/: 1

**総行数**: 約3,400行
- SKILL.md: 408行
- リソース合計: 2,930行
- スクリプト: 約160行
- テンプレート: 187行

**トークン見積もり**:
- SKILL.md: 約2,500トークン
- リソース総計: 約18,000トークン
- 総計: 約20,500トークン（目標の<20K範囲内 ✓）

**作成時間**: 約2-3時間（手動での詳細作成含む）

---

## 次回作成への推奨事項

### 効率化のポイント

1. **テンプレートの再利用**:
   - knowledge-managementのSKILL.mdをベースに
   - セクション構成をそのまま活用
   - 内容を対象スキルに合わせて変更

2. **リソース分割の早期判断**:
   - エージェント分析時に主要トピックを特定
   - 各トピックを独立したリソースに
   - 500行制約を常に意識

3. **並行作業**:
   - SKILL.md と 主要リソース1-2個を先に作成
   - 残りのリソースは並行作成可能

### 注意すべき点

1. **行数オーバーの早期検出**:
   - 作成中に定期的に `wc -l` で確認
   - 400行を超えたら内容を精錬
   - 500行に近づいたら分割を検討

2. **重複の排除**:
   - リソース作成前に既存内容を確認
   - 同じ情報を複数箇所に書かない
   - 参照で代替できる場合は参照を使用

3. **Progressive Disclosure原則の徹底**:
   - SKILL.md: 概要と目次
   - リソース: 詳細
   - 明確な参照指示

---

## 次のステップ

このパターンを用いて、残り4つのスキルを作成:

1. **progressive-disclosure** - このパターンを直接適用
2. **documentation-architecture** - 構造設計に特化したバリエーション
3. **context-optimization** - 最適化に特化したバリエーション
4. **best-practices-curation** - キュレーションに特化したバリエーション

**期待される効果**:
- 作成時間の短縮（2-3時間 → 1-2時間）
- 品質の一貫性向上
- 500行制約の遵守率向上
