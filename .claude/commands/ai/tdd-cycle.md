---
description: |
  TDDã‚µã‚¤ã‚¯ãƒ«ï¼ˆRed-Green-Refactorï¼‰ã®å®Ÿè¡Œã‚’è‡ªå‹•åŒ–ã™ã‚‹å°‚é–€ã‚³ãƒãƒ³ãƒ‰ã€‚

  ã‚±ãƒ³ãƒˆãƒ»ãƒ™ãƒƒã‚¯ã®ãƒ†ã‚¹ãƒˆé§†å‹•é–‹ç™ºåŸå‰‡ã«åŸºã¥ãã€ãƒ†ã‚¹ãƒˆãƒ•ã‚¡ãƒ¼ã‚¹ãƒˆæ€è€ƒã§
  å“è³ªã‚’ä½œã‚Šè¾¼ã¿ãªãŒã‚‰æ©Ÿèƒ½å®Ÿè£…ã‚’é€²ã‚ã¾ã™ã€‚unit-testerã¨logic-devã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã‚’
  é€£æºã•ã›ã€Redï¼ˆå¤±æ•—ã™ã‚‹ãƒ†ã‚¹ãƒˆï¼‰â†’ Greenï¼ˆæœ€å°å®Ÿè£…ï¼‰â†’ Refactorï¼ˆæ”¹å–„ï¼‰ã®ã‚µã‚¤ã‚¯ãƒ«ã‚’å®Ÿè¡Œã—ã¾ã™ã€‚

  ğŸ¤– èµ·å‹•ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆ:
  - `.claude/agents/unit-tester.md`: ãƒ†ã‚¹ãƒˆãƒ•ã‚¡ãƒ¼ã‚¹ãƒˆå®Ÿè£…ï¼ˆRedãƒ•ã‚§ãƒ¼ã‚ºï¼‰
  - `.claude/agents/logic-dev.md`: æœ€å°å®Ÿè£…ã¨ãƒªãƒ•ã‚¡ã‚¯ã‚¿ãƒªãƒ³ã‚°ï¼ˆGreen/Refactorãƒ•ã‚§ãƒ¼ã‚ºï¼‰

  ğŸ“š åˆ©ç”¨å¯èƒ½ã‚¹ã‚­ãƒ«ï¼ˆå„ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆãŒå¿…è¦æ™‚ã«å‚ç…§ï¼‰:
  **unit-tester Phase (Red):**
  - tdd-principles: Red-Green-Refactorã‚µã‚¤ã‚¯ãƒ«è©³ç´°
  - test-doubles: Mock/Stub/Spy/Fakeé¸æŠ
  - vitest-advanced: ãƒ†ã‚¹ãƒˆå®Ÿè¡Œã¨ã‚«ãƒãƒ¬ãƒƒã‚¸

  **logic-dev Phase (Green/Refactor):**
  - tdd-red-green-refactor: Greenãƒ•ã‚§ãƒ¼ã‚ºå®Ÿè£…ã€Refactorãƒ•ã‚§ãƒ¼ã‚ºæ”¹å–„
  - clean-code-practices: ãƒªãƒ•ã‚¡ã‚¯ã‚¿ãƒªãƒ³ã‚°æŠ€æ³•
  - refactoring-techniques: ã‚³ãƒ¼ãƒ‰ã‚¹ãƒ¡ãƒ«æ¤œå‡ºã¨ä¿®æ­£

  ğŸ’¡ ä½¿ç”¨ãƒ‘ã‚¿ãƒ¼ãƒ³:
  - æ–°æ©Ÿèƒ½å®Ÿè£…å‰ã®ãƒ†ã‚¹ãƒˆãƒ•ã‚¡ãƒ¼ã‚¹ãƒˆé–‹ç™º
  - è¤‡é›‘ãªãƒ“ã‚¸ãƒã‚¹ãƒ­ã‚¸ãƒƒã‚¯ã®å®Ÿè£…
  - ãƒ¬ã‚¬ã‚·ãƒ¼ã‚³ãƒ¼ãƒ‰æ”¹å–„æ™‚ã®å®‰å…¨ç¶²æ§‹ç¯‰
  - é«˜å“è³ªã‚³ãƒ¼ãƒ‰ã®ä½œã‚Šè¾¼ã¿

  âš™ï¸ ã“ã®ã‚³ãƒãƒ³ãƒ‰ã®è¨­å®š:
  - argument-hint: æ©Ÿèƒ½åï¼ˆå¿…é ˆï¼‰
  - allowed-tools: ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆèµ·å‹•ã¨ãƒ†ã‚¹ãƒˆãƒ»å®Ÿè£…ãƒ•ã‚¡ã‚¤ãƒ«ä½œæˆç”¨
    â€¢ Task: unit-tester, logic-dev ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆèµ·å‹•ç”¨
    â€¢ Read: ä»•æ§˜æ›¸ã€æ—¢å­˜ã‚³ãƒ¼ãƒ‰ç¢ºèªç”¨
    â€¢ Write(__tests__/**/*.test.ts, src/features/**): ãƒ†ã‚¹ãƒˆãƒ»å®Ÿè£…ãƒ•ã‚¡ã‚¤ãƒ«ç”Ÿæˆç”¨ï¼ˆãƒ‘ã‚¹åˆ¶é™ï¼‰
    â€¢ Edit: ãƒ†ã‚¹ãƒˆãƒ»å®Ÿè£…ãƒ•ã‚¡ã‚¤ãƒ«ä¿®æ­£ç”¨
    â€¢ Bash(pnpm test*|vitest*): ãƒ†ã‚¹ãƒˆå®Ÿè¡Œç”¨
    â€¢ Grep: æ—¢å­˜ãƒ‘ã‚¿ãƒ¼ãƒ³æ¤œç´¢ç”¨
  - model: sonnetï¼ˆTDDå®Ÿè·µã‚¿ã‚¹ã‚¯ï¼‰

  ğŸ“Š æˆæœç‰©:
  - `__tests__/[feature-name].test.ts`ï¼ˆãƒ†ã‚¹ãƒˆã‚³ãƒ¼ãƒ‰ï¼‰
  - `src/features/[feature-name]/executor.ts`ï¼ˆå®Ÿè£…ã‚³ãƒ¼ãƒ‰ï¼‰
  - Red-Green-Refactorã‚µã‚¤ã‚¯ãƒ«å®Œäº†æ¸ˆã¿ã‚³ãƒ¼ãƒ‰
  - ã‚«ãƒãƒ¬ãƒƒã‚¸ãƒ¬ãƒãƒ¼ãƒˆï¼ˆ>80%ï¼‰

  ãƒˆãƒªã‚¬ãƒ¼ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰: TDD, test-driven, red green refactor, ãƒ†ã‚¹ãƒˆé§†å‹•
argument-hint: "[feature-name]"
allowed-tools:
  - Task
  - Read
  - Write(__tests__/**/*.test.ts, src/features/**)
  - Edit
  - Bash(pnpm test*|vitest*)
  - Grep
model: opus
---

# TDDã‚µã‚¤ã‚¯ãƒ«å®Ÿè¡Œ

## ç›®çš„

unit-tester ã¨ logic-dev ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã‚’é€£æºã•ã›ã€Red-Green-Refactorã‚µã‚¤ã‚¯ãƒ«ã‚’è‡ªå‹•å®Ÿè¡Œã—ã¾ã™ã€‚

## ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆèµ·å‹•ãƒ•ãƒ­ãƒ¼

### Phase 1: å¼•æ•°æ¤œè¨¼

```markdown
æ©Ÿèƒ½å: "$ARGUMENTS"

å¼•æ•°æœªæŒ‡å®šã®å ´åˆ:
ã‚¨ãƒ©ãƒ¼: ã€Œæ©Ÿèƒ½åã‚’æŒ‡å®šã—ã¦ãã ã•ã„ã€
ä½¿ç”¨ä¾‹: `/ai:tdd-cycle email-notification`
ä½¿ç”¨ä¾‹: `/ai:tdd-cycle user-authentication`
```

### Phase 2: Red - å¤±æ•—ã™ã‚‹ãƒ†ã‚¹ãƒˆä½œæˆ

Task ãƒ„ãƒ¼ãƒ«ã§ `.claude/agents/unit-tester.md` ã‚’èµ·å‹•:

```markdown
ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆ: .claude/agents/unit-tester.md
æ©Ÿèƒ½å: ${æ©Ÿèƒ½å}
ãƒ•ã‚§ãƒ¼ã‚º: Redï¼ˆå¤±æ•—ã™ã‚‹ãƒ†ã‚¹ãƒˆä½œæˆï¼‰

ä¾é ¼å†…å®¹:

- ãƒ†ã‚¹ãƒˆãƒ•ã‚¡ãƒ¼ã‚¹ãƒˆ: å®Ÿè£…å‰ã«ãƒ†ã‚¹ãƒˆã‚’æ›¸ã
- æœŸå¾…ã•ã‚Œã‚‹æŒ¯ã‚‹èˆã„ã®æ˜ç¢ºåŒ–
- Arrange-Act-Assertæ§‹é€ ã®ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹ä½œæˆ
- ãƒ†ã‚¹ãƒˆå®Ÿè¡Œã¨å¤±æ•—ç¢ºèª

å¿…é ˆè¦ä»¶:

1. ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹è¨­è¨ˆï¼ˆæ­£å¸¸ç³»ã€å¢ƒç•Œå€¤ã€ç•°å¸¸ç³»ï¼‰
2. ãƒ†ã‚¹ãƒˆãƒ€ãƒ–ãƒ«é¸æŠï¼ˆMock/Stub/Spy/Fakeï¼‰
3. ãƒ†ã‚¹ãƒˆå®Ÿè£…ï¼ˆ`__tests__/[feature-name].test.ts`ï¼‰
4. ãƒ†ã‚¹ãƒˆå®Ÿè¡Œ: âŒ å¤±æ•—ã‚’ç¢ºèªï¼ˆå®Ÿè£…æœªå®Œäº†ã®ãŸã‚ï¼‰

æœŸå¾…æˆæœç‰©:

- å¤±æ•—ã™ã‚‹ãƒ†ã‚¹ãƒˆã‚³ãƒ¼ãƒ‰
- ãƒ†ã‚¹ãƒˆå®Ÿè¡Œçµæœï¼ˆâŒ FAILï¼‰
```

### Phase 3: Green - æœ€å°å®Ÿè£…

Task ãƒ„ãƒ¼ãƒ«ã§ `.claude/agents/logic-dev.md` ã‚’èµ·å‹•:

```markdown
ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆ: .claude/agents/logic-dev.md
æ©Ÿèƒ½å: ${æ©Ÿèƒ½å}
ãƒ•ã‚§ãƒ¼ã‚º: Greenï¼ˆãƒ†ã‚¹ãƒˆã‚’é€šã™æœ€å°å®Ÿè£…ï¼‰

ä¾é ¼å†…å®¹:

- ãƒ†ã‚¹ãƒˆã‚’é€šã™æœ€å°é™ã®å®Ÿè£…
- ä½™è¨ˆãªæ©Ÿèƒ½è¿½åŠ ã¯ã—ãªã„ï¼ˆYAGNIåŸå‰‡ï¼‰
- ãƒ†ã‚¹ãƒˆå®Ÿè¡Œã¨æˆåŠŸç¢ºèª

å¿…é ˆè¦ä»¶:

1. æœ€å°é™ã®ã‚³ãƒ¼ãƒ‰å®Ÿè£…ï¼ˆ`src/features/[feature-name]/executor.ts`ï¼‰
2. ãƒ†ã‚¹ãƒˆå®Ÿè¡Œ: âœ… æˆåŠŸã‚’ç¢ºèª
3. ã‚«ãƒãƒ¬ãƒƒã‚¸æ¸¬å®šï¼ˆç›®æ¨™>80%ï¼‰

æœŸå¾…æˆæœç‰©:

- ãƒ†ã‚¹ãƒˆã‚’é€šã™å®Ÿè£…ã‚³ãƒ¼ãƒ‰
- ãƒ†ã‚¹ãƒˆå®Ÿè¡Œçµæœï¼ˆâœ… PASSï¼‰
```

### Phase 4: Refactor - ãƒªãƒ•ã‚¡ã‚¯ã‚¿ãƒªãƒ³ã‚°

Task ãƒ„ãƒ¼ãƒ«ã§ `.claude/agents/logic-dev.md` ã‚’èµ·å‹•:

```markdown
ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆ: .claude/agents/logic-dev.md
æ©Ÿèƒ½å: ${æ©Ÿèƒ½å}
ãƒ•ã‚§ãƒ¼ã‚º: Refactorï¼ˆã‚³ãƒ¼ãƒ‰æ”¹å–„ï¼‰

ä¾é ¼å†…å®¹:

- ã‚³ãƒ¼ãƒ‰ã‚¹ãƒ¡ãƒ«æ¤œå‡ºã¨ä¿®æ­£
- ãƒªãƒ•ã‚¡ã‚¯ã‚¿ãƒªãƒ³ã‚°æŠ€æ³•é©ç”¨
- ãƒ†ã‚¹ãƒˆç¶­æŒã—ãŸã¾ã¾æ”¹å–„
- Clean Codeãƒ—ãƒ©ã‚¯ãƒ†ã‚£ã‚¹é©ç”¨

å¿…é ˆè¦ä»¶:

1. ã‚³ãƒ¼ãƒ‰ã‚¹ãƒ¡ãƒ«æ¤œå‡ºï¼ˆLong Methodã€Duplicate Codeç­‰ï¼‰
2. ãƒªãƒ•ã‚¡ã‚¯ã‚¿ãƒªãƒ³ã‚°å®Ÿè¡Œï¼ˆExtract Methodã€Introduce Named Constantç­‰ï¼‰
3. å„å¤‰æ›´å¾Œã®ãƒ†ã‚¹ãƒˆå®Ÿè¡Œ: âœ… æˆåŠŸã‚’ç¶­æŒ
4. ã‚«ãƒãƒ¬ãƒƒã‚¸ç¶­æŒãƒ»å‘ä¸Š

æœŸå¾…æˆæœç‰©:

- ãƒªãƒ•ã‚¡ã‚¯ã‚¿ãƒªãƒ³ã‚°æ¸ˆã¿ã‚³ãƒ¼ãƒ‰
- ã™ã¹ã¦ã®ãƒ†ã‚¹ãƒˆæˆåŠŸï¼ˆâœ… PASSï¼‰
- ã‚«ãƒãƒ¬ãƒƒã‚¸>80%
```

### Phase 5: å®Œäº†å ±å‘Š

- TDDã‚µã‚¤ã‚¯ãƒ«å®Œäº†ç¢ºèª
- æœ€çµ‚ãƒ†ã‚¹ãƒˆå®Ÿè¡Œçµæœ
- ã‚«ãƒãƒ¬ãƒƒã‚¸ãƒ¬ãƒãƒ¼ãƒˆ
- æˆæœç‰©ãƒ•ã‚¡ã‚¤ãƒ«ãƒ‘ã‚¹

## ä½¿ç”¨ä¾‹

### åŸºæœ¬çš„ãªä½¿ç”¨

```bash
/ai:tdd-cycle email-notification
```

### æœŸå¾…ã•ã‚Œã‚‹å‡ºåŠ›

```markdown
âœ… TDDã‚µã‚¤ã‚¯ãƒ«å®Œäº†

ğŸ“ Phase 1 - Red:

- **tests**/email-notification.test.ts ä½œæˆ
- ãƒ†ã‚¹ãƒˆå®Ÿè¡Œ: âŒ FAILï¼ˆæœŸå¾…é€šã‚Šï¼‰

ğŸ“ Phase 2 - Green:

- src/features/email-notification/executor.ts å®Ÿè£…
- ãƒ†ã‚¹ãƒˆå®Ÿè¡Œ: âœ… PASSï¼ˆ15/15ï¼‰

ğŸ“ Phase 3 - Refactor:

- ã‚³ãƒ¼ãƒ‰ã‚¹ãƒ¡ãƒ«ä¿®æ­£: Long Method â†’ Extract Method
- ãƒªãƒ•ã‚¡ã‚¯ã‚¿ãƒªãƒ³ã‚°å®Œäº†
- ãƒ†ã‚¹ãƒˆå®Ÿè¡Œ: âœ… PASSï¼ˆ15/15ï¼‰

ğŸ“Š æœ€çµ‚æˆæœ:

- ã‚«ãƒãƒ¬ãƒƒã‚¸: 85%
- å¾ªç’°çš„è¤‡é›‘åº¦: 8ï¼ˆè‰¯å¥½ï¼‰
- é–¢æ•°å¹³å‡è¡Œæ•°: 18è¡Œï¼ˆè‰¯å¥½ï¼‰
```

## å‚ç…§

- ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆ: `.claude/agents/unit-tester.md`
- ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆ: `.claude/agents/logic-dev.md`
- ã‚¹ã‚­ãƒ«: `.claude/skills/tdd-principles/SKILL.md`
- ã‚¹ã‚­ãƒ«: `.claude/skills/tdd-red-green-refactor/SKILL.md`
- ã‚¹ã‚­ãƒ«: `.claude/skills/refactoring-techniques/SKILL.md`
