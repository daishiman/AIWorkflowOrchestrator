---
description: |
  ãƒ†ã‚¹ãƒˆãƒ‡ãƒ¼ã‚¿ãƒ»ãƒ•ã‚£ã‚¯ã‚¹ãƒãƒ£ã®è‡ªå‹•ä½œæˆã‚’è¡Œã†å°‚é–€ã‚³ãƒãƒ³ãƒ‰ã€‚

  ãƒ¦ãƒ‹ãƒƒãƒˆãƒ†ã‚¹ãƒˆã¨E2Eãƒ†ã‚¹ãƒˆã§ä½¿ç”¨ã™ã‚‹ãƒ†ã‚¹ãƒˆãƒ‡ãƒ¼ã‚¿ã‚’å‹å®‰å…¨ã‹ã¤ä¿å®ˆã—ã‚„ã™ã„å½¢ã§ç”Ÿæˆã—ã¾ã™ã€‚
  ãƒ‡ãƒ¼ã‚¿åˆ†é›¢æˆ¦ç•¥ï¼ˆUUIDã€ã‚¿ã‚¤ãƒ ã‚¹ã‚¿ãƒ³ãƒ—ã€Worker IDï¼‰ã«ã‚ˆã‚Šä¸¦åˆ—å®Ÿè¡Œæ™‚ã®ç«¶åˆã‚’é˜²ãã¾ã™ã€‚

  ğŸ¤– èµ·å‹•ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆ:
  - `.claude/agents/unit-tester.md`: ãƒ¦ãƒ‹ãƒƒãƒˆãƒ†ã‚¹ãƒˆç”¨Fixtureä½œæˆ
  - `.claude/agents/e2e-tester.md`: E2Eãƒ†ã‚¹ãƒˆç”¨Fixtureä½œæˆï¼ˆSeedingã€Teardownæˆ¦ç•¥å«ã‚€ï¼‰

  ğŸ“š åˆ©ç”¨å¯èƒ½ã‚¹ã‚­ãƒ«ï¼ˆå„ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆãŒå¿…è¦æ™‚ã«å‚ç…§ï¼‰:
  **unit-tester:** test-doublesï¼ˆFixture ãƒ‘ã‚¿ãƒ¼ãƒ³ï¼‰
  **e2e-tester:** test-data-managementï¼ˆSeedingæˆ¦ç•¥ã€ãƒ‡ãƒ¼ã‚¿åˆ†é›¢æŠ€è¡“ã€ã‚¯ãƒªãƒ¼ãƒ³ã‚¢ãƒƒãƒ—ãƒ‘ã‚¿ãƒ¼ãƒ³ï¼‰

  ğŸ’¡ ä½¿ç”¨ãƒ‘ã‚¿ãƒ¼ãƒ³:
  - ãƒ†ã‚¹ãƒˆãƒ‡ãƒ¼ã‚¿ã®ä¸€å…ƒç®¡ç†
  - ä¸¦åˆ—å®Ÿè¡Œæ™‚ã®ãƒ‡ãƒ¼ã‚¿ç«¶åˆé˜²æ­¢
  - ãƒ†ã‚¹ãƒˆç’°å¢ƒã®ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—è‡ªå‹•åŒ–
  - å‹å®‰å…¨ãªãƒ†ã‚¹ãƒˆãƒ‡ãƒ¼ã‚¿ç”Ÿæˆ

  âš™ï¸ ã“ã®ã‚³ãƒãƒ³ãƒ‰ã®è¨­å®š:
  - argument-hint: ãƒ•ã‚£ã‚¯ã‚¹ãƒãƒ£ã‚¿ã‚¤ãƒ—ï¼ˆuser/post/productç­‰ã€å¿…é ˆï¼‰
  - allowed-tools: ãƒ•ã‚£ã‚¯ã‚¹ãƒãƒ£ãƒ•ã‚¡ã‚¤ãƒ«ä½œæˆç”¨
    â€¢ Task: unit-tester, e2e-tester ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆèµ·å‹•ç”¨
    â€¢ Read: æ—¢å­˜Fixtureç¢ºèªã€ã‚¹ã‚­ãƒ¼ãƒå‚ç…§ç”¨
    â€¢ Write(tests/fixtures/**/*.ts, src/features/**/__tests__/fixtures/**): Fixtureãƒ•ã‚¡ã‚¤ãƒ«ç”Ÿæˆç”¨ï¼ˆãƒ‘ã‚¹åˆ¶é™ï¼‰
    â€¢ Grep: æ—¢å­˜ãƒ‘ã‚¿ãƒ¼ãƒ³æ¤œç´¢ç”¨
  - model: sonnetï¼ˆãƒ‡ãƒ¼ã‚¿è¨­è¨ˆã‚¿ã‚¹ã‚¯ï¼‰

  ğŸ“Š æˆæœç‰©:
  - `tests/fixtures/[fixture-type].ts`ï¼ˆE2Eãƒ†ã‚¹ãƒˆç”¨ï¼‰
  - `src/features/[æ©Ÿèƒ½å]/__tests__/fixtures/[fixture-type].ts`ï¼ˆãƒ¦ãƒ‹ãƒƒãƒˆãƒ†ã‚¹ãƒˆç”¨ï¼‰
  - å‹å®‰å…¨ãªFixtureé–¢æ•°ï¼ˆTypeScriptå‹æ¨è«–ä»˜ãï¼‰
  - ãƒ‡ãƒ¼ã‚¿åˆ†é›¢æˆ¦ç•¥é©ç”¨æ¸ˆã¿ï¼ˆä¸¦åˆ—å®Ÿè¡Œå¯¾å¿œï¼‰

  ãƒˆãƒªã‚¬ãƒ¼ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰: fixture, test data, seeding, ãƒ†ã‚¹ãƒˆãƒ‡ãƒ¼ã‚¿, ãƒ•ã‚£ã‚¯ã‚¹ãƒãƒ£
argument-hint: "[fixture-type]"
allowed-tools:
  - Task
  - Read
  - Write(tests/fixtures/**/*.ts, src/features/**/__tests__/fixtures/**)
  - Grep
model: opus
---

# ãƒ†ã‚¹ãƒˆãƒ•ã‚£ã‚¯ã‚¹ãƒãƒ£è‡ªå‹•ä½œæˆ

## ç›®çš„

unit-tester ã¨ e2e-tester ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã‚’æ´»ç”¨ã—ã€å‹å®‰å…¨ãªãƒ†ã‚¹ãƒˆãƒ•ã‚£ã‚¯ã‚¹ãƒãƒ£ã‚’è‡ªå‹•ç”Ÿæˆã—ã¾ã™ã€‚

## ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆèµ·å‹•ãƒ•ãƒ­ãƒ¼

### Phase 1: å¼•æ•°æ¤œè¨¼

```markdown
ãƒ•ã‚£ã‚¯ã‚¹ãƒãƒ£ã‚¿ã‚¤ãƒ—: "$ARGUMENTS"

å¼•æ•°æœªæŒ‡å®šã®å ´åˆ:
ã‚¨ãƒ©ãƒ¼: ã€Œãƒ•ã‚£ã‚¯ã‚¹ãƒãƒ£ã‚¿ã‚¤ãƒ—ã‚’æŒ‡å®šã—ã¦ãã ã•ã„ã€
ä½¿ç”¨ä¾‹: `/ai:create-test-fixtures user`
ä½¿ç”¨ä¾‹: `/ai:create-test-fixtures product`
ä½¿ç”¨ä¾‹: `/ai:create-test-fixtures workflow`

ã‚µãƒãƒ¼ãƒˆã‚¿ã‚¤ãƒ—: user, post, product, workflow, comment, orderç­‰
```

### Phase 2: ã‚¹ã‚­ãƒ¼ãƒç¢ºèª

```markdown
ãƒ•ã‚£ã‚¯ã‚¹ãƒãƒ£ã‚¿ã‚¤ãƒ—ã«å¯¾å¿œã™ã‚‹ã‚¹ã‚­ãƒ¼ãƒã‚’ç¢ºèª:

- Zodã‚¹ã‚­ãƒ¼ãƒ: `src/features/[æ©Ÿèƒ½å]/schema.ts`
- ã‚¨ãƒ³ãƒ†ã‚£ãƒ†ã‚£å®šç¾©: `src/shared/core/entities/`
- DB ã‚¹ã‚­ãƒ¼ãƒ: `src/shared/infrastructure/database/schema.ts`

ã‚¹ã‚­ãƒ¼ãƒæœªå®šç¾©ã®å ´åˆ:
ã‚¨ãƒ©ãƒ¼: ã€Œã‚¹ã‚­ãƒ¼ãƒãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“ã€‚å…ˆã«ã‚¹ã‚­ãƒ¼ãƒã‚’å®šç¾©ã—ã¦ãã ã•ã„ã€
```

### Phase 3-A: ãƒ¦ãƒ‹ãƒƒãƒˆãƒ†ã‚¹ãƒˆç”¨Fixtureä½œæˆ

Task ãƒ„ãƒ¼ãƒ«ã§ `.claude/agents/unit-tester.md` ã‚’èµ·å‹•:

```markdown
ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆ: .claude/agents/unit-tester.md
ãƒ•ã‚£ã‚¯ã‚¹ãƒãƒ£ã‚¿ã‚¤ãƒ—: ${ãƒ•ã‚£ã‚¯ã‚¹ãƒãƒ£ã‚¿ã‚¤ãƒ—}

ä¾é ¼å†…å®¹:

- ãƒ¦ãƒ‹ãƒƒãƒˆãƒ†ã‚¹ãƒˆç”¨Fixtureé–¢æ•°ã®ä½œæˆ
- å‹å®‰å…¨ãªãƒ‡ãƒ¼ã‚¿ç”Ÿæˆï¼ˆTypeScriptå‹æ¨è«–ï¼‰
- ãƒ†ã‚¹ãƒˆãƒ€ãƒ–ãƒ«ãƒ‘ã‚¿ãƒ¼ãƒ³ã®é©ç”¨
- ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆå€¤ã¨éƒ¨åˆ†çš„ã‚ªãƒ¼ãƒãƒ¼ãƒ©ã‚¤ãƒ‰å¯¾å¿œ

å¿…é ˆè¦ä»¶:

1. Fixtureãƒ•ã‚¡ã‚¤ãƒ«ä½œæˆ: `src/features/[æ©Ÿèƒ½å]/__tests__/fixtures/${ãƒ•ã‚£ã‚¯ã‚¹ãƒãƒ£ã‚¿ã‚¤ãƒ—}.ts`
2. å‹å®‰å…¨ãªãƒ•ã‚¡ã‚¯ãƒˆãƒªé–¢æ•°å®Ÿè£…
3. ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆå€¤è¨­å®šï¼ˆæ­£å¸¸ç³»ãƒ‡ãƒ¼ã‚¿ï¼‰
4. éƒ¨åˆ†çš„ã‚ªãƒ¼ãƒãƒ¼ãƒ©ã‚¤ãƒ‰å¯¾å¿œï¼ˆPartial<T>ï¼‰

æœŸå¾…æˆæœç‰©:

- ãƒ¦ãƒ‹ãƒƒãƒˆãƒ†ã‚¹ãƒˆç”¨Fixtureé–¢æ•°
- TypeScriptå‹æ¨è«–ä»˜ã
```

### Phase 3-B: E2Eãƒ†ã‚¹ãƒˆç”¨Fixtureä½œæˆ

Task ãƒ„ãƒ¼ãƒ«ã§ `.claude/agents/e2e-tester.md` ã‚’èµ·å‹•:

```markdown
ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆ: .claude/agents/e2e-tester.md
ãƒ•ã‚£ã‚¯ã‚¹ãƒãƒ£ã‚¿ã‚¤ãƒ—: ${ãƒ•ã‚£ã‚¯ã‚¹ãƒãƒ£ã‚¿ã‚¤ãƒ—}

ä¾é ¼å†…å®¹:

- E2Eãƒ†ã‚¹ãƒˆç”¨Fixtureã¨seedingæˆ¦ç•¥ã®ä½œæˆ
- ãƒ‡ãƒ¼ã‚¿åˆ†é›¢æˆ¦ç•¥é©ç”¨ï¼ˆUUIDã€ã‚¿ã‚¤ãƒ ã‚¹ã‚¿ãƒ³ãƒ—ã€Worker IDï¼‰
- ã‚¯ãƒªãƒ¼ãƒ³ã‚¢ãƒƒãƒ—æˆ¦ç•¥å®Ÿè£…ï¼ˆTeardownï¼‰
- ä¸¦åˆ—å®Ÿè¡Œå¯¾å¿œ

å¿…é ˆè¦ä»¶:

1. Fixtureãƒ•ã‚¡ã‚¤ãƒ«ä½œæˆ: `tests/fixtures/${ãƒ•ã‚£ã‚¯ã‚¹ãƒãƒ£ã‚¿ã‚¤ãƒ—}.ts`
2. Seedingæˆ¦ç•¥å®Ÿè£…ï¼ˆAPIã€DBã€Fixtureï¼‰
3. ãƒ‡ãƒ¼ã‚¿åˆ†é›¢æˆ¦ç•¥é©ç”¨ï¼ˆä¸¦åˆ—å®Ÿè¡Œæ™‚ã®ç«¶åˆé˜²æ­¢ï¼‰
4. Teardownãƒ•ãƒƒã‚¯å®Ÿè£…ï¼ˆãƒ†ã‚¹ãƒˆå¾Œã®ã‚¯ãƒªãƒ¼ãƒ³ã‚¢ãƒƒãƒ—ï¼‰

æœŸå¾…æˆæœç‰©:

- E2Eãƒ†ã‚¹ãƒˆç”¨Fixtureé–¢æ•°
- Seeding/Teardownã‚¹ã‚¯ãƒªãƒ—ãƒˆ
- ä¸¦åˆ—å®Ÿè¡Œå¯¾å¿œæ¸ˆã¿
```

### Phase 4: å®Œäº†å ±å‘Š

- ä½œæˆãƒ•ã‚¡ã‚¤ãƒ«ãƒ‘ã‚¹ç¢ºèª
- Fixtureä½¿ç”¨ä¾‹ã®æä¾›
- å‹å®‰å…¨æ€§ç¢ºèª

## ä½¿ç”¨ä¾‹

### åŸºæœ¬çš„ãªä½¿ç”¨

```bash
/ai:create-test-fixtures user
```

### æœŸå¾…ã•ã‚Œã‚‹å‡ºåŠ›

```markdown
âœ… ãƒ†ã‚¹ãƒˆãƒ•ã‚£ã‚¯ã‚¹ãƒãƒ£ä½œæˆå®Œäº†

ğŸ“ ãƒ¦ãƒ‹ãƒƒãƒˆãƒ†ã‚¹ãƒˆç”¨:

- src/features/user-management/**tests**/fixtures/user.ts
- å‹å®‰å…¨ãªãƒ•ã‚¡ã‚¯ãƒˆãƒªé–¢æ•°: createUserFixture()

ğŸ“ E2Eãƒ†ã‚¹ãƒˆç”¨:

- tests/fixtures/user.ts
- Seedingé–¢æ•°: seedUser()
- Teardowné–¢æ•°: cleanupUsers()

ğŸ“– ä½¿ç”¨ä¾‹:

// ãƒ¦ãƒ‹ãƒƒãƒˆãƒ†ã‚¹ãƒˆ
import { createUserFixture } from './**tests**/fixtures/user';

const user = createUserFixture({
email: 'test@example.com',
role: 'admin'
});

// E2Eãƒ†ã‚¹ãƒˆ
import { seedUser, cleanupUsers } from './fixtures/user';

test.afterEach(async () => {
await cleanupUsers();
});

test('user login', async () => {
const user = await seedUser({ email: 'test@example.com' });
// ...
});
```

## å‚ç…§

- ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆ: `.claude/agents/unit-tester.md`
- ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆ: `.claude/agents/e2e-tester.md`
- ã‚¹ã‚­ãƒ«: `.claude/skills/test-doubles/SKILL.md`
- ã‚¹ã‚­ãƒ«: `.claude/skills/test-data-management/SKILL.md`
