---
description: |
  ç›£è¦–ãƒ»ã‚¢ãƒ©ãƒ¼ãƒˆã‚·ã‚¹ãƒ†ãƒ ã®è¨­è¨ˆã¨è¨­å®šã€‚
  SLO/SLIå®šç¾©ã€ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰æ§‹ç¯‰ã€ã‚¢ãƒ©ãƒ¼ãƒˆãƒ«ãƒ¼ãƒ«è¨­å®šã‚’å«ã‚€åŒ…æ‹¬çš„ãªç›£è¦–åŸºç›¤ã‚’æ§‹ç¯‰ã—ã¾ã™ã€‚

  ğŸ¤– èµ·å‹•ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆ:
  - `.claude/agents/sre-observer.md`: ãƒ­ã‚®ãƒ³ã‚°ãƒ»ç›£è¦–è¨­è¨ˆå°‚é–€ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆ

  ğŸ“š åˆ©ç”¨å¯èƒ½ã‚¹ã‚­ãƒ«ï¼ˆsre-observerã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆãŒå¿…è¦æ™‚ã«å‚ç…§ï¼‰:
  **Phase 2ï¼ˆSLO/SLIè¨­è¨ˆæ™‚ï¼‰:** slo-sli-designï¼ˆå¿…é ˆï¼‰
  **Phase 4ï¼ˆã‚¢ãƒ©ãƒ¼ãƒˆè¨­è¨ˆæ™‚ï¼‰:** alert-designï¼ˆå¿…é ˆï¼‰, slo-sli-design
  **è£œåŠ©ã‚¹ã‚­ãƒ«:** observability-pillars, distributed-tracing

  âš™ï¸ ã“ã®ã‚³ãƒãƒ³ãƒ‰ã®è¨­å®š:
  - argument-hint: ã‚µãƒ¼ãƒ“ã‚¹åï¼ˆã‚ªãƒ—ã‚·ãƒ§ãƒ³ï¼‰
  - allowed-tools: ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆèµ·å‹•ã¨ç›£è¦–è¨­å®šç”¨
    â€¢ Task: sre-observerã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆèµ·å‹•
    â€¢ Read: ã‚½ãƒ¼ã‚¹ã‚³ãƒ¼ãƒ‰ã€æ—¢å­˜è¨­å®š
    â€¢ Write(config/monitoring.*|docs/observability/**): ç›£è¦–è¨­å®šã€ãƒ©ãƒ³ãƒ–ãƒƒã‚¯
    â€¢ Grep: ãƒ¡ãƒˆãƒªã‚¯ã‚¹è¨˜éŒ²ç®‡æ‰€ç¢ºèª
  - model: sonnetï¼ˆç›£è¦–è¨­è¨ˆãƒ»è¨­å®šã‚¿ã‚¹ã‚¯ï¼‰

  ãƒˆãƒªã‚¬ãƒ¼ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰: monitoring, alert, slo, sli, dashboard, observability
argument-hint: "[service-name]"
allowed-tools: [Task, Read, Write(config/monitoring.*|docs/observability/**), Grep]
model: sonnet
---

# ç›£è¦–ãƒ»ã‚¢ãƒ©ãƒ¼ãƒˆè¨­å®šã‚³ãƒãƒ³ãƒ‰

ã‚ãªãŸã¯ `/ai:setup-monitoring` ã‚³ãƒãƒ³ãƒ‰ã‚’å®Ÿè¡Œã—ã¾ã™ã€‚

## ç›®çš„

SREåŸå‰‡ã«åŸºã¥ãç›£è¦–ãƒ»ã‚¢ãƒ©ãƒ¼ãƒˆã‚·ã‚¹ãƒ†ãƒ ã‚’è¨­è¨ˆã—ã€
SLO/SLIå®šç¾©ã€ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ã€ã‚¢ãƒ©ãƒ¼ãƒˆãƒ«ãƒ¼ãƒ«ã‚’å«ã‚€åŒ…æ‹¬çš„ãªå¯è¦³æ¸¬æ€§åŸºç›¤ã‚’æ§‹ç¯‰ã—ã¾ã™ã€‚

## å®Ÿè¡Œãƒ•ãƒ­ãƒ¼

### Phase 1: ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆèµ·å‹•æº–å‚™

**ãƒ¦ãƒ¼ã‚¶ãƒ¼å¼•æ•°ã®å‡¦ç†:**
- `$1` (service-name): ç›£è¦–å¯¾è±¡ã‚µãƒ¼ãƒ“ã‚¹åï¼ˆã‚ªãƒ—ã‚·ãƒ§ãƒ³ã€ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ: ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆåï¼‰

**ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆåé›†:**
```bash
# ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆåå–å¾—
cat package.json | grep '"name"'

# æ—¢å­˜ãƒ¡ãƒˆãƒªã‚¯ã‚¹ç¢ºèª
grep -r "metric\|measure" src/

# master_system_design.md å‚ç…§
cat docs/00-requirements/master_system_design.md | grep -A 20 "workflows"
```

### Phase 2: @sre-observer ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆèµ·å‹•

```typescript
@sre-observer ã‚’èµ·å‹•ã—ã€ä»¥ä¸‹ã‚’ä¾é ¼:

**ã‚¿ã‚¹ã‚¯**: ç›£è¦–ãƒ»ã‚¢ãƒ©ãƒ¼ãƒˆã‚·ã‚¹ãƒ†ãƒ ã®è¨­è¨ˆã¨è¨­å®š
**ãƒ•ã‚©ãƒ¼ã‚«ã‚¹**: slo-sli-design, alert-designã‚¹ã‚­ãƒ«ã‚’ä¸­å¿ƒã«æ´»ç”¨

**å…¥åŠ›æƒ…å ±**:
- ã‚µãƒ¼ãƒ“ã‚¹å: $SERVICE_NAME
- ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆ: master_system_design.md
- æ—¢å­˜ãƒ¡ãƒˆãƒªã‚¯ã‚¹: grepçµæœ

**æœŸå¾…æˆæœç‰©**:
1. **SLO/SLIå®šç¾©** (`docs/observability/slo-sli.md`):
   - ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼æˆåŠŸç‡SLI: æˆåŠŸ/total workflows
   - ãƒ¬ã‚¤ãƒ†ãƒ³ã‚·SLI: p95ãƒ¬ã‚¹ãƒãƒ³ã‚¹ã‚¿ã‚¤ãƒ  < 30ç§’
   - å¯ç”¨æ€§SLI: uptime > 99.9%
   - ã‚¨ãƒ©ãƒ¼ãƒã‚¸ã‚§ãƒƒãƒˆç®¡ç†ãƒãƒªã‚·ãƒ¼

2. **ã‚¢ãƒ©ãƒ¼ãƒˆãƒ«ãƒ¼ãƒ«** (`config/monitoring.alerts.yaml`):
   ```yaml
   alerts:
     - name: workflow_failure_rate_high
       condition: failure_rate > 5%
       severity: critical
       notification: discord_webhook

     - name: response_time_p95_slow
       condition: p95_latency > 30s
       severity: warning
       notification: email

     - name: error_budget_depleted
       condition: error_budget < 10%
       severity: critical
   ```

3. **ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰è¨­è¨ˆ** (`docs/observability/dashboard-design.md`):
   - ã‚´ãƒ¼ãƒ«ãƒ‡ãƒ³ã‚·ã‚°ãƒŠãƒ«ï¼ˆLatency, Traffic, Errors, Saturationï¼‰
   - ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼æˆåŠŸç‡ãƒ»å¤±æ•—ç‡
   - ã‚¨ãƒ©ãƒ¼ãƒã‚¸ã‚§ãƒƒãƒˆæ¶ˆè²»çŠ¶æ³
   - ã‚·ã‚¹ãƒ†ãƒ ãƒªã‚½ãƒ¼ã‚¹ä½¿ç”¨ç‡

4. **ãƒ©ãƒ³ãƒ–ãƒƒã‚¯** (`docs/observability/runbook.md`):
   - ã‚¢ãƒ©ãƒ¼ãƒˆå¯¾å¿œæ‰‹é †
   - ã‚¨ã‚¹ã‚«ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ãƒ•ãƒ­ãƒ¼
   - ã‚ˆãã‚ã‚‹å•é¡Œã¨è§£æ±ºç­–

**è¨­è¨ˆè¦ä»¶**:
- Alert Fatigueå›é¿ï¼ˆèª¤æ¤œçŸ¥ < 5%ï¼‰
- ã™ã¹ã¦ã®ã‚¢ãƒ©ãƒ¼ãƒˆãŒã‚¢ã‚¯ã‚·ãƒ§ãƒ³å¯èƒ½
- SLOãƒ™ãƒ¼ã‚¹ã®ã‚¢ãƒ©ãƒ¼ãƒˆè¨­è¨ˆ
- ãƒ¦ãƒ¼ã‚¶ãƒ¼ä½“é¨“ã‚’åæ˜ ã™ã‚‹SLI
```

### Phase 3: å®Œäº†å ±å‘Š

ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã‹ã‚‰ã®æˆæœç‰©ã‚’å—ã‘å–ã‚Šã€ãƒ¦ãƒ¼ã‚¶ãƒ¼ã«ä»¥ä¸‹ã‚’å ±å‘Š:
- âœ… å®šç¾©ã•ã‚ŒãŸSLI/SLOä¸€è¦§
- ğŸ“Š ã‚¢ãƒ©ãƒ¼ãƒˆãƒ«ãƒ¼ãƒ«æ•°
  - Critical: Xä»¶
  - Warning: Xä»¶
  - Info: Xä»¶
- ğŸ¯ ã‚¨ãƒ©ãƒ¼ãƒã‚¸ã‚§ãƒƒãƒˆè¨­å®š
- ğŸ“– ãƒ©ãƒ³ãƒ–ãƒƒã‚¯ãƒšãƒ¼ã‚¸æ•°
- ğŸ’¡ æ¨å¥¨ã•ã‚Œã‚‹æ¬¡ã®ã‚¹ãƒ†ãƒƒãƒ—ï¼ˆå®Ÿè£…ãƒ»çµ±åˆç­‰ï¼‰

## æ³¨æ„äº‹é …

- ã“ã®ã‚³ãƒãƒ³ãƒ‰ã¯ç›£è¦–è¨­è¨ˆã®ã¿ã‚’è¡Œã„ã€è©³ç´°ã¯ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã«å§”è­²
- å®Ÿéš›ã®ãƒ¢ãƒ‹ã‚¿ãƒªãƒ³ã‚°ãƒ„ãƒ¼ãƒ«çµ±åˆã¯åˆ¥é€”å®Ÿæ–½
- SLO/SLIã¯ãƒ“ã‚¸ãƒã‚¹è¦ä»¶ã«å¿œã˜ã¦èª¿æ•´ãŒå¿…è¦
