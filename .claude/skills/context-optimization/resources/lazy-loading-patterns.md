# 遅延読み込みパターン

## 原則

全リソースの事前ロード禁止。必要な時に必要な情報のみをロードする。

## 実装パターン

### パターン1: インデックス駆動

**SKILL.mdの構成**:
```markdown
## リソースへの参照

トピック別の詳細情報:
- スキーマ設計: `resources/schema-design.md`
- インデックス戦略: `resources/indexing.md`
- クエリ最適化: `resources/query-optimization.md`

必要なトピックを選択して参照してください。
```

**エージェントの動作**:
- タスクに応じて1つのリソースのみ参照
- 他のリソースは読み込まない

**削減効果**: 75%

### パターン2: Phase駆動

**SKILL.mdの構成**:
```markdown
## ワークフロー

### Phase 1: 分析
[基本ガイダンス]
詳細: `resources/analysis.md`

### Phase 2: 設計
[基本ガイダンス]
詳細: `resources/design.md`
```

**エージェントの動作**:
- 現在のPhaseのリソースのみ参照
- 次のPhaseに進んでから次のリソースを参照

**削減効果**: 67%

## トークン削減効果

**従来（全ロード）**:
```
すべてのリソースを読み込み: 12,000トークン
```

**遅延読み込み**:
```
必要なリソースのみ: 3,000トークン
削減率: 75%
```

## ベストプラクティス

1. **SKILL.mdに明確な参照**: どのリソースに何があるか明示
2. **各リソースの独立性**: 単独で理解可能に
3. **参照タイミングの指示**: いつ参照すべきかガイダンス
