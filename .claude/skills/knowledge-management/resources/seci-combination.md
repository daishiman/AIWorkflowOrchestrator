# Combination（連結化）詳細ガイド

## 概要

Combination（連結化）は、複数の形式知を組み合わせて新しい知識体系を構築するプロセスです。
既存の文書、書籍、ドキュメントなどの形式知を統合し、より包括的で実用的な知識を創造します。

## Combinationの本質

### 形式知同士の相互作用

**プロセス**:

```
形式知A + 形式知B + 形式知C
→ 統合・再編成・関連付け
→ 新しい知識体系D
```

**例**:

```
形式知A: 公式ドキュメント（技術仕様）
形式知B: 書籍（理論的背景）
形式知C: チームのガイドライン（実践経験）

→ 統合: 理論に裏付けられた実践的ガイド
```

### 単純な集約との違い

**単純な集約**（避けるべき）:

```
文書A + 文書B + 文書C
→ ただのリスト（関連性なし）
```

**Combination**（目指すべき）:

```
文書A + 文書B + 文書C
→ 体系的な知識（階層構造、関連性明示、矛盾解消）
```

---

## 統合戦略

### 戦略1: 階層的統合

**原則**: 概要から詳細へ段階的に深化する構造

**適用**:

```
レベル1: 概要（SKILL.md）
├─ レベル2: 基本（resources/basics.md）
├─ レベル3: 応用（resources/advanced.md）
└─ レベル4: 専門（resources/expert.md）

各レベルで:
- 前のレベルの知識を前提とする
- より詳細な情報を提供
- より複雑なケースに対応
```

**判断基準**:

- [ ] 各レベルが明確に区別されているか？
- [ ] レベル間の参照が適切か？
- [ ] 初心者が段階的に学習できるか？

**例**:

```markdown
# SKILL.md（レベル1）

## 概要

RESTful API設計の基本原則...

詳細は以下を参照:

- 基本設計: resources/basics.md
- 高度なパターン: resources/advanced.md

# resources/basics.md（レベル2）

## 基本的なRESTful設計

リソース指向、HTTPメソッドの適切な使用...

# resources/advanced.md（レベル3）

## 高度なRESTful設計

HATEOAS、バージョニング戦略...
```

---

### 戦略2: トピック別統合

**原則**: 独立したトピックごとに情報を組織化

**適用**:

```
共通テーマ: データベース設計

トピック1: スキーマ設計（resources/schema-design.md）
トピック2: クエリ最適化（resources/query-optimization.md）
トピック3: トランザクション管理（resources/transaction-management.md）

各トピック:
- 独立して理解可能
- 他トピックへの参照は明示的
- 相互依存を最小化
```

**判断基準**:

- [ ] 各トピックが独立しているか？
- [ ] トピック間の重複がないか？
- [ ] 関連性が明示されているか？

---

### 戦略3: 情報源別統合

**原則**: 異なる情報源の強みを活かして統合

**情報源の特性**:

**公式ドキュメント**:

- 強み: 正確性、標準的な実装方法
- 弱み: 理論的背景の説明不足、実践例が少ない

**書籍**:

- 強み: 理論的背景、体系的説明
- 弱み: 最新情報でない可能性、抽象的

**チームの実践**:

- 強み: プロジェクト固有の適用例、実践的
- 弱み: 普遍性に欠ける可能性、主観的

**統合パターン**:

```markdown
## [トピック名]

### 標準的な実装（公式ドキュメントベース）

[正確な仕様と基本的な使い方]

### 理論的背景（書籍ベース）

[なぜこの方法が推奨されるか、設計原則]

### 実践的な適用（チームの経験ベース）

[プロジェクト固有の考慮事項、よくある問題と対処]

### 統合的ガイドライン

[上記3つを統合した、理論と実践の両立]
```

---

## 矛盾の解消

### 矛盾のタイプ

**タイプ1: 情報源間の矛盾**

```
ドキュメントA: "Xパターンを推奨"
ドキュメントB: "Yパターンを推奨"
```

**解消方法**:

1. **コンテキストの明確化**:

   ```
   - Xパターン: 小規模プロジェクト向け
   - Yパターン: 大規模プロジェクト向け

   判断基準: プロジェクトの規模
   ```

2. **信頼性の評価**:

   ```
   - ドキュメントAの信頼性: [評価]
   - ドキュメントBの信頼性: [評価]
   - 採用: より信頼性の高い方
   ```

3. **両立の検討**:
   ```
   - 両方が有効なケースを特定
   - 使い分けの基準を定義
   ```

**タイプ2: バージョン間の矛盾**

```
古いバージョン: "componentDidMountを使用"
新しいバージョン: "useEffectを使用"
```

**解消方法**:

1. **最新バージョンを優先**
2. **移行ガイドを提供**
3. **バージョン依存を明示**

---

## 体系化の原則

### 原則1: モジュラリティ

**定義**: 知識を独立したモジュールとして組織化

**方法**:

- 各モジュール（スキル、リソース）が単一のトピックに集中
- モジュール間の依存を最小化
- 明示的な参照で連携

**判断基準**:

- [ ] 各モジュールが独立して理解可能か？
- [ ] 依存関係が明確か？
- [ ] 変更時の影響範囲が限定的か？

### 原則2: 階層性

**定義**: 知識を階層構造で組織化

**方法**:

```
抽象度の高い知識（上位）
└─ 抽象度の中程度の知識（中位）
   └─ 抽象度の低い知識（下位）

例:
設計原則（抽象度高）
└─ 設計パターン（抽象度中）
   └─ 実装例（抽象度低）
```

### 原則3: トレーサビリティ

**定義**: 知識間の関連性を追跡可能にする

**方法**:

```markdown
## 関連知識

- **前提**: [この知識を理解するために必要]
- **応用**: [この知識を応用した発展]
- **関連**: [併せて参照すべき知識]
- **対比**: [比較すべき代替的知識]
```

---

## Progressive Disclosureとの統合

### 3層への知識配置

**レベル1: メタデータ（常時ロード）**

```yaml
name: database-design
description: データベース設計の包括的ガイド...
```

- 目的: スキル選択の判断材料
- 内容: 概要、トリガー条件

**レベル2: SKILL.md本文（必要時ロード）**

```markdown
## 概要

データベース設計の基本原則...

## ワークフロー

Phase 1: 要件分析...

詳細は以下を参照:

- 正規化: resources/normalization.md
- インデックス設計: resources/indexing.md
```

- 目的: タスク実行に必要な知識
- 内容: 概要、ワークフロー、基本的なベストプラクティス

**レベル3: リソース（参照時ロード）**

```markdown
# resources/normalization.md

## 正規化の詳細理論

第1正規形、第2正規形...
```

- 目的: 深い専門知識
- 内容: 詳細な理論、高度な例、トラブルシューティング

---

## 統合時の品質チェック

### チェックリスト

**構造的品質**:

- [ ] 階層構造が論理的である
- [ ] モジュール分割が適切である
- [ ] 500行制約が守られている

**内容的品質**:

- [ ] 重複が排除されている
- [ ] 矛盾が解消されている
- [ ] 情報源が明示されている

**関連性の品質**:

- [ ] 関連知識への参照が明確である
- [ ] トレーサビリティが確保されている
- [ ] 参照パスが正確である

---

## ツールと自動化

### 重複検出

**スクリプト**: `scripts/detect-duplication.sh`

```bash
# キーワードベースの重複検出
# 概念的重複の警告
```

### 矛盾検出

**スクリプト**: `scripts/check-consistency.sh`

```bash
# 同じトピックで異なる推奨がないか確認
```

### 関連性検証

**スクリプト**: `scripts/validate-references.sh`

```bash
# 参照パスの有効性確認
# 壊れたリンクの検出
```

---

## 参考文献

- **『知識創造企業』** 野中郁次郎・竹内弘高著
  - 第3章: Combinationモードの詳細

- **『Documenting Software Architectures』** Paul Clements他著
  - 知識の体系的組織化の方法
