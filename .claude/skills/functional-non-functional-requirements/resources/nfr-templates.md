# 非機能要件テンプレート集

## 概要

このテンプレート集は、よく使用される非機能要件の定義フォーマットを提供します。
具体的な数値を埋めるだけで、測定可能な非機能要件を作成できます。

## 基本テンプレート

```markdown
## NFR-XXX: [カテゴリ] - [要件名]

**指標**: [測定対象]
**目標値**: [具体的な数値・基準]
**測定方法**: [どうやって測定するか]
**測定頻度**: [いつ測定するか]
**重要度**: Critical / High / Medium / Low
**根拠**: [なぜこの目標値か]
**検証環境**: [テスト環境 / 本番環境]

**関連要件**: [関連するFR/NFR]
**備考**: [補足情報]
```

## カテゴリ別テンプレート

### パフォーマンス

#### 応答時間

```markdown
## NFR-001: パフォーマンス - API応答時間

**指標**: APIエンドポイントの応答時間
**目標値**:
- 平均: [100ms] 以内
- 95パーセンタイル: [200ms] 以内
- 99パーセンタイル: [500ms] 以内
- 最大: [1000ms] 以内

**測定方法**: APMツール（DataDog/New Relic）による計測
**測定頻度**: リアルタイム（1分間隔で集計）
**重要度**: High
**根拠**: ユーザー体験調査で200ms超過で離脱率が上昇

**対象API**:
- [ ] /api/search: 200ms以内
- [ ] /api/users: 100ms以内
- [ ] /api/reports: 500ms以内（大量データ処理）

**関連要件**: FR-010（検索機能）
```

#### スループット

```markdown
## NFR-002: パフォーマンス - スループット

**指標**: 単位時間あたりの処理リクエスト数
**目標値**:
- 通常時: [500] リクエスト/秒
- ピーク時: [2000] リクエスト/秒
- バースト: [5000] リクエスト/秒（10秒間）

**測定方法**: 負荷テストツール（k6/JMeter）による計測
**測定頻度**: リリース前、月次パフォーマンステスト
**重要度**: High
**根拠**: 予想ピークユーザー数×平均リクエスト数から算出

**備考**: オートスケーリングにより15分以内にスケールアウト
```

### セキュリティ

#### 認証

```markdown
## NFR-010: セキュリティ - 認証

**指標**: 認証の安全性と利便性
**目標値**:
- 認証方式: [OAuth 2.0 / OIDC]
- パスワードポリシー:
  - 最小文字数: [8]文字
  - 必須文字種: [大文字、小文字、数字]
  - 禁止: 過去[5]回のパスワード再利用
- MFA: [管理者必須 / 全ユーザー推奨]
- セッション:
  - 有効期限: [30]分（アクティビティで延長）
  - 同時セッション: [1]（新しいセッションで古いものを無効化）

**測定方法**: セキュリティ監査、ペネトレーションテスト
**測定頻度**: 四半期ごとのセキュリティレビュー
**重要度**: Critical
**根拠**: 業界標準（OWASP）、コンプライアンス要件

**関連要件**: FR-001（ログイン機能）
```

#### 暗号化

```markdown
## NFR-011: セキュリティ - データ暗号化

**指標**: データの保護レベル
**目標値**:
- 通信暗号化: [TLS 1.3]以上
- 保存時暗号化:
  - 個人情報: [AES-256]
  - パスワード: [bcrypt]（コスト係数[12]以上）
  - APIキー: [SHA-256ハッシュ]
- 鍵管理: [AWS KMS / HashiCorp Vault]

**測定方法**: SSL Labs、セキュリティスキャン
**測定頻度**: 月次スキャン、リリース前検証
**重要度**: Critical
**根拠**: 個人情報保護法、PCI DSS準拠

**対象データ**:
- 氏名、住所、電話番号: 暗号化必須
- メールアドレス: 暗号化必須
- クレジットカード: トークナイゼーション
```

### 可用性

```markdown
## NFR-020: 可用性 - SLA

**指標**: サービス稼働率
**目標値**:
- 稼働率: [99.9]%（月間ダウンタイム[43]分以内）
- 計画停止: 月[1]回、[4]時間以内
- 計画停止通知: [72]時間前

**測定方法**: 外部監視サービス（Pingdom/StatusCake）
**測定頻度**: リアルタイム（1分間隔）
**重要度**: High
**根拠**: SLA契約、ビジネス要件

**除外時間**:
- 計画メンテナンス（事前通知済み）
- 不可抗力（自然災害等）

**SLA違反時の対応**:
- 月間稼働率99.9%未満: サービスクレジット[10]%
- 月間稼働率99.0%未満: サービスクレジット[25]%
```

#### 障害復旧

```markdown
## NFR-021: 可用性 - 障害復旧

**指標**: 障害からの復旧能力
**目標値**:
- RTO（目標復旧時間）: [1]時間
- RPO（目標復旧時点）: [15]分（最大データ損失）
- MTTR（平均復旧時間）: [30]分

**測定方法**: 障害復旧訓練、実障害の記録
**測定頻度**: 四半期ごとのDR訓練
**重要度**: High
**根拠**: ビジネス継続性要件

**復旧手順**:
1. 自動フェイルオーバー: [30]秒以内
2. データ復旧: 最新バックアップから[15]分以内
3. 完全復旧: [1]時間以内

**バックアップ**:
- 頻度: [15]分ごとの増分、[24]時間ごとの完全
- 保持期間: [30]日
- 保存先: [別リージョン / 別クラウド]
```

### ユーザビリティ

```markdown
## NFR-030: ユーザビリティ - アクセシビリティ

**指標**: 障害者のアクセス性
**目標値**:
- 準拠基準: [WCAG 2.1 AA]
- スクリーンリーダー: [NVDA / VoiceOver]対応
- キーボード操作: 全機能利用可能
- コントラスト比: [4.5:1]以上

**測定方法**:
- 自動チェック: axe-core、Lighthouse
- 手動チェック: スクリーンリーダーテスト

**測定頻度**: 各リリース前、四半期監査
**重要度**: Medium
**根拠**: 障害者差別解消法、企業ポリシー

**チェック項目**:
- [ ] 画像に代替テキスト
- [ ] フォームにラベル
- [ ] 色のみに依存しない情報伝達
- [ ] キーボードフォーカスの可視化
```

#### レスポンシブ対応

```markdown
## NFR-031: ユーザビリティ - レスポンシブ対応

**指標**: 複数デバイスでの表示品質
**目標値**:
- 対応画面幅: [320px] 〜 [2560px]
- ブレークポイント:
  - モバイル: [320px] 〜 [767px]
  - タブレット: [768px] 〜 [1023px]
  - デスクトップ: [1024px] 〜
- タッチターゲット: 最小[44px] × [44px]

**測定方法**: 実機テスト、ブラウザ開発者ツール
**測定頻度**: 各リリース前
**重要度**: High
**根拠**: ユーザー利用デバイス調査（モバイル60%）

**対応デバイス**:
- [ ] iPhone SE (375px)
- [ ] iPhone 14 Pro (393px)
- [ ] iPad (768px)
- [ ] MacBook (1440px)
```

### 互換性

```markdown
## NFR-040: 互換性 - ブラウザ対応

**指標**: 対応ブラウザとバージョン
**目標値**:
| ブラウザ | 最小バージョン | シェア基準 |
|---------|--------------|----------|
| Chrome | [90]+ | 1%以上 |
| Firefox | [88]+ | 1%以上 |
| Safari | [14]+ | 1%以上 |
| Edge | [90]+ | 1%以上 |

**測定方法**:
- 自動テスト: Playwright/Selenium
- 手動テスト: BrowserStack

**測定頻度**: 各リリース前
**重要度**: High
**根拠**: アクセス解析データ（直近3ヶ月）

**非対応**:
- Internet Explorer（すべてのバージョン）
- 上記最小バージョン未満

**備考**: シェア1%未満になったブラウザは四半期ごとに見直し
```

### 保守性

```markdown
## NFR-050: 保守性 - コード品質

**指標**: コードの品質と保守しやすさ
**目標値**:
- テストカバレッジ: [80]%以上
- 静的解析エラー: [0]件
- 技術的負債: SonarQube基準で[A]ランク
- ドキュメントカバレッジ: public API [100]%

**測定方法**:
- SonarQube / CodeClimate
- Jest / Pytest（カバレッジ）

**測定頻度**: 各プルリクエスト、日次レポート
**重要度**: Medium
**根拠**: 長期保守コストの削減

**コーディング規約**:
- ESLint/Prettier設定に準拠
- TypeScript strict mode有効
```

## 使用方法

1. 該当するカテゴリのテンプレートをコピー
2. `[ ]` 内の値を実際の要件に置き換え
3. 不要な項目は削除
4. 追加が必要な項目は追記
5. ステークホルダーとレビュー

## チェックリスト

- [ ] すべての目標値が具体的な数値か？
- [ ] 測定方法が明確か？
- [ ] 根拠が記載されているか？
- [ ] 重要度が設定されているか？
- [ ] 関連する機能要件とリンクしているか？
