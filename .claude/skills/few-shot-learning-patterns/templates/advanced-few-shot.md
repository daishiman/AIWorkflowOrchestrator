# 高度なFew-Shotテンプレート

## 概要

複雑なタスクや高精度が求められる場面向けの
高度なFew-Shotパターンテンプレート集。

## テンプレート1: Chain-of-Thought Few-Shot

思考プロセスを含めた例示で、推論の質を向上させます。

```markdown
# タスク説明

[複雑な問題を段階的に解いてください]

# 出力形式

1. 思考プロセスを示す
2. 最終的な回答を明示

# 例

例1:
問題: [問題文1]

思考プロセス:

1. [ステップ1の考え]
2. [ステップ2の考え]
3. [ステップ3の考え]

回答: [最終回答1]

例2:
問題: [問題文2]

思考プロセス:

1. [ステップ1の考え]
2. [ステップ2の考え]

回答: [最終回答2]

# 実際のタスク

問題: {{input}}

思考プロセス:
```

### 使用例

```markdown
# タスク説明

数学の文章題を段階的に解いてください。

# 出力形式

1. 与えられた情報を整理
2. 解法のステップを示す
3. 最終回答を明示

# 例

例1:
問題: リンゴが5個あります。3人で均等に分けると、
一人何個もらえて、何個余りますか？

思考プロセス:

1. 与えられた情報: リンゴ5個、3人で分ける
2. 割り算を実行: 5 ÷ 3 = 1 余り 2
3. 検算: 1 × 3 + 2 = 5 ✓

回答: 一人1個もらえて、2個余る

例2:
問題: 時速60kmで走る車が、180km先の目的地に
着くまでにかかる時間は？

思考プロセス:

1. 与えられた情報: 速度60km/h、距離180km
2. 時間 = 距離 ÷ 速度
3. 計算: 180 ÷ 60 = 3

回答: 3時間

# 実際のタスク

問題: 1個150円のりんごを4個と、1個200円のみかんを3個買いました。
1000円札を出すと、おつりはいくらですか？

思考プロセス:
```

## テンプレート2: 複合条件分岐

複数の条件に基づく分類・処理を示すテンプレート。

```markdown
# タスク説明

[入力を複数の条件に基づいて処理してください]

# 判定ロジック

条件A かつ 条件B → 結果1
条件A かつ 非条件B → 結果2
非条件A → 結果3

# 例

例1（条件A＋条件B）:
入力: [入力例1]
判定:

- 条件Aチェック: [該当/非該当] 理由: [理由]
- 条件Bチェック: [該当/非該当] 理由: [理由]
  結果: 結果1

例2（条件Aのみ）:
入力: [入力例2]
判定:

- 条件Aチェック: 該当 理由: [理由]
- 条件Bチェック: 非該当 理由: [理由]
  結果: 結果2

例3（条件A非該当）:
入力: [入力例3]
判定:

- 条件Aチェック: 非該当 理由: [理由]
  結果: 結果3

# 実際のタスク

入力: {{input}}
判定:
```

### 使用例

```markdown
# タスク説明

カスタマーサポートのチケットを優先度と担当部署に振り分けてください。

# 判定ロジック

技術的問題 かつ 緊急 → 高優先・技術チーム
技術的問題 かつ 非緊急 → 通常・技術チーム
非技術的問題 かつ 緊急 → 高優先・カスタマーサクセス
非技術的問題 かつ 非緊急 → 通常・カスタマーサクセス

# 例

例1（技術的＋緊急）:
入力: システムが完全にダウンしてサービスが使えません。至急対応お願いします。
判定:

- 技術的問題: 該当 理由: システムダウン
- 緊急性: 該当 理由: サービス停止状態
  結果: { "priority": "high", "team": "technical" }

例2（技術的＋非緊急）:
入力: 設定画面のUIが少し使いにくいです。改善を検討してください。
判定:

- 技術的問題: 該当 理由: UI/UXの問題
- 緊急性: 非該当 理由: 機能自体は動作
  結果: { "priority": "normal", "team": "technical" }

例3（非技術的＋緊急）:
入力: 請求金額が間違っています。今日中に修正してください。
判定:

- 技術的問題: 非該当 理由: 請求・事務処理
- 緊急性: 該当 理由: 期限付きの要求
  結果: { "priority": "high", "team": "customer_success" }

# 実際のタスク

入力: パスワードを忘れてしまいました。リセット方法を教えてください。
判定:
```

## テンプレート3: エラーハンドリング付き

エッジケースやエラー処理を含むテンプレート。

```markdown
# タスク説明

[入力を処理してください。無効な入力にはエラーを返してください]

# 出力形式

成功時: { "success": true, "result": [結果] }
失敗時: { "success": false, "error": "[エラー理由]" }

# 例（正常ケース）

例1:
入力: [有効な入力1]
出力: { "success": true, "result": [結果1] }

例2:
入力: [有効な入力2]
出力: { "success": true, "result": [結果2] }

# 例（エラーケース）

例3:
入力: [無効な入力1]
出力: { "success": false, "error": "[エラー理由1]" }

例4:
入力: [無効な入力2]
出力: { "success": false, "error": "[エラー理由2]" }

# 実際のタスク

入力: {{input}}
出力:
```

### 使用例

```markdown
# タスク説明

日本の電話番号を正規化してください。無効な形式にはエラーを返してください。

# 出力形式

成功時: { "success": true, "result": "0X0-XXXX-XXXX" }
失敗時: { "success": false, "error": "[エラー理由]" }

# 例（正常ケース）

例1:
入力: 090-1234-5678
出力: { "success": true, "result": "090-1234-5678" }

例2:
入力: 09012345678
出力: { "success": true, "result": "090-1234-5678" }

例3:
入力: +81 90 1234 5678
出力: { "success": true, "result": "090-1234-5678" }

# 例（エラーケース）

例4:
入力: 123-4567
出力: { "success": false, "error": "桁数が不足しています" }

例5:
入力: abc-defg-hijk
出力: { "success": false, "error": "数字以外の文字が含まれています" }

# 実際のタスク

入力: 080（9876）5432
出力:
```

## テンプレート4: 多段階処理

複数の処理ステップを順番に実行するテンプレート。

```markdown
# タスク説明

[入力を以下のステップで処理してください]

# 処理ステップ

1. [ステップ1の説明]
2. [ステップ2の説明]
3. [ステップ3の説明]

# 例

例1:
入力: [入力例1]

ステップ1: [ステップ1の出力]
ステップ2: [ステップ2の出力]
ステップ3: [ステップ3の出力]

最終結果: [最終出力1]

例2:
入力: [入力例2]

ステップ1: [ステップ1の出力]
ステップ2: [ステップ2の出力]
ステップ3: [ステップ3の出力]

最終結果: [最終出力2]

# 実際のタスク

入力: {{input}}

ステップ1:
```

### 使用例

```markdown
# タスク説明

テキストを以下のステップで処理して分析してください。

# 処理ステップ

1. テキストのクリーニング（記号除去、正規化）
2. キーワード抽出（重要語を3-5個）
3. 感情分析（ポジティブ/ネガティブ/中立）
4. 要約（1文）

# 例

例1:
入力: 「この製品は!!!本当に素晴らしいです😊 使いやすくて、価格も手頃。家族全員で愛用しています。」

ステップ1（クリーニング）: この製品は本当に素晴らしいです。使いやすくて、価格も手頃。家族全員で愛用しています。
ステップ2（キーワード）: ["製品", "素晴らしい", "使いやすい", "価格", "家族"]
ステップ3（感情）: ポジティブ（信頼度: 0.95）
ステップ4（要約）: 使いやすさと価格に満足し、家族で愛用している製品レビュー

最終結果:
{
"cleaned_text": "この製品は本当に素晴らしいです...",
"keywords": ["製品", "素晴らしい", "使いやすい", "価格", "家族"],
"sentiment": { "label": "positive", "confidence": 0.95 },
"summary": "使いやすさと価格に満足し、家族で愛用している製品レビュー"
}

# 実際のタスク

入力: 「配送が遅れた上に、商品に傷がありました（怒）返品手続きも面倒で、もう二度と利用しません...」

ステップ1（クリーニング）:
```

## テンプレート5: 比較・選択

複数の選択肢から最適なものを選ぶテンプレート。

```markdown
# タスク説明

[入力を分析し、最適な選択肢を推奨してください]

# 選択肢

- 選択肢A: [説明]
- 選択肢B: [説明]
- 選択肢C: [説明]

# 評価基準

1. [基準1]
2. [基準2]
3. [基準3]

# 例

例1:
入力: [状況説明1]

分析:

- 選択肢A: [評価] スコア: X/10
- 選択肢B: [評価] スコア: Y/10
- 選択肢C: [評価] スコア: Z/10

推奨: [最高スコアの選択肢]
理由: [推奨理由]

例2:
入力: [状況説明2]

分析:

- 選択肢A: [評価] スコア: X/10
- 選択肢B: [評価] スコア: Y/10
- 選択肢C: [評価] スコア: Z/10

推奨: [最高スコアの選択肢]
理由: [推奨理由]

# 実際のタスク

入力: {{input}}

分析:
```

## テンプレート6: 信頼度付き出力

各出力に信頼度スコアを付与するテンプレート。

```markdown
# タスク説明

[タスクを実行し、各結果に信頼度を付けてください]

# 信頼度レベル

- 高 (0.8-1.0): 確実な情報
- 中 (0.5-0.8): 推測を含む
- 低 (0.0-0.5): 不確実

# 出力形式

{
"result": "[結果]",
"confidence": [0.0-1.0],
"reasoning": "[判断理由]"
}

# 例

例1（高信頼度）:
入力: [明確な入力1]
出力:
{
"result": "[結果]",
"confidence": 0.95,
"reasoning": "入力に明示的な情報あり"
}

例2（中信頼度）:
入力: [やや曖昧な入力]
出力:
{
"result": "[結果]",
"confidence": 0.70,
"reasoning": "一部推測を含む"
}

例3（低信頼度）:
入力: [曖昧な入力]
出力:
{
"result": "[結果]",
"confidence": 0.40,
"reasoning": "情報が不足しており推測に依存"
}

# 実際のタスク

入力: {{input}}
出力:
```

## 組み合わせガイド

| シナリオ           | 推奨テンプレート       |
| ------------------ | ---------------------- |
| 複雑な推論         | Chain-of-Thought       |
| 条件分岐処理       | 複合条件分岐           |
| 入力バリデーション | エラーハンドリング付き |
| パイプライン処理   | 多段階処理             |
| 意思決定支援       | 比較・選択             |
| 不確実性の表現     | 信頼度付き出力         |
