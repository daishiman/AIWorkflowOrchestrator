# デプロイチェックリスト

## プロンプトデプロイ前チェックリスト

### 1. コード品質

```markdown
## コード品質チェック

### 必須項目
- [ ] すべてのテストがパス
- [ ] コードレビュー承認済み（2名以上）
- [ ] Lint/フォーマットチェックパス
- [ ] セキュリティスキャン完了

### 推奨項目
- [ ] カバレッジ目標達成（80%以上）
- [ ] パフォーマンステスト実施
- [ ] アクセシビリティチェック（該当する場合）
```

---

### 2. ドキュメント

```markdown
## ドキュメントチェック

### 必須項目
- [ ] CHANGELOG更新済み
- [ ] バージョン番号更新済み
- [ ] APIドキュメント更新済み（スキーマ変更時）

### MAJOR変更時の追加項目
- [ ] マイグレーションガイド作成
- [ ] 非推奨機能の告知
- [ ] リリースノート作成

### 推奨項目
- [ ] READMEの更新
- [ ] 使用例の追加/更新
- [ ] FAQの更新
```

---

### 3. テスト確認

```markdown
## テスト確認チェック

### 必須項目
- [ ] 単体テストパス
- [ ] 統合テストパス
- [ ] 回帰テストパス

### ステージング環境
- [ ] スモークテストパス
- [ ] A/Bテスト実施（該当する場合）
- [ ] 負荷テスト確認

### エッジケース
- [ ] 空入力のハンドリング確認
- [ ] 長文入力のハンドリング確認
- [ ] 特殊文字のハンドリング確認
- [ ] 多言語入力の確認（該当する場合）
```

---

### 4. ロールバック準備

```markdown
## ロールバック準備チェック

### 必須項目
- [ ] 前バージョンが利用可能
- [ ] ロールバック手順の確認
- [ ] ロールバック実行権限の確認

### 推奨項目
- [ ] ロールバック訓練実施済み（過去3ヶ月以内）
- [ ] フォールバック設定の確認
- [ ] データバックアップの確認
```

---

### 5. モニタリング

```markdown
## モニタリング設定チェック

### 必須項目
- [ ] メトリクス収集設定済み
  - [ ] エラー率
  - [ ] レイテンシ（p50, p95, p99）
  - [ ] スループット
- [ ] アラート設定済み
  - [ ] エラー率閾値
  - [ ] レイテンシ閾値

### 推奨項目
- [ ] ダッシュボード準備
- [ ] ログ出力レベル確認
- [ ] トレーシング設定確認
```

---

### 6. コミュニケーション

```markdown
## コミュニケーションチェック

### 必須項目
- [ ] 関係者への事前通知
- [ ] オンコール担当者の確認
- [ ] エスカレーション経路の確認

### 推奨項目
- [ ] ステータスページの準備
- [ ] ユーザー向け告知の準備（大規模変更時）
- [ ] サポートチームへの情報共有
```

---

## デプロイ中チェックリスト

```markdown
## デプロイ実行チェック

### Canaryフェーズ（5%）
- [ ] デプロイ完了確認
- [ ] ヘルスチェックパス
- [ ] エラー率確認（< 1%）
- [ ] レイテンシ確認（p95 < 目標値）

### 拡大フェーズ（25%, 50%）
- [ ] メトリクス安定確認
- [ ] ユーザーフィードバック確認
- [ ] ログエラーなし

### 完全ロールアウト（100%）
- [ ] すべてのメトリクス正常
- [ ] アラート発火なし
- [ ] 前バージョンの待機状態確認
```

---

## デプロイ後チェックリスト

```markdown
## デプロイ後確認チェック

### 即時確認（5分以内）
- [ ] ヘルスチェック正常
- [ ] エラー率が閾値以下
- [ ] レイテンシが許容範囲内

### 短期確認（1時間以内）
- [ ] ユーザーからの報告なし
- [ ] ログにエラーなし
- [ ] メトリクスの異常傾向なし

### 中期確認（24時間以内）
- [ ] 全体的な安定性確認
- [ ] パフォーマンストレンド確認
- [ ] ユーザーフィードバック集計

### 長期確認（1週間以内）
- [ ] A/Bテスト結果の分析
- [ ] 改善効果の測定
- [ ] 次回改善点の特定
```

---

## 緊急時対応チェックリスト

```markdown
## 緊急時チェック

### 問題検知時
- [ ] 影響範囲の特定
- [ ] 重大度の判定
- [ ] 関係者への通知

### ロールバック判断
- [ ] エラー率 > 5%
- [ ] P95レイテンシ > 閾値の2倍
- [ ] ユーザー苦情 > 10件

### ロールバック実行
- [ ] ロールバックコマンド実行
- [ ] 切り替え完了確認
- [ ] メトリクス改善確認

### 事後対応
- [ ] インシデントチケット作成
- [ ] ステークホルダーへの報告
- [ ] ポストモーテム予定設定
```

---

## チェックリストのカスタマイズ

```yaml
# deployment-config.yaml

checklist_customization:
  mandatory_items:
    - code_review
    - tests_pass
    - changelog_updated
    - rollback_available

  optional_items:
    - load_test
    - accessibility_check
    - user_notification

  skip_conditions:
    patch_release:
      - migration_guide
      - user_notification
    hotfix:
      - load_test
      - a_b_test
```

---

## 署名セクション

```markdown
## デプロイ承認

### デプロイ担当者
- 名前: ________________
- 日時: ________________
- 署名: ________________

### レビュアー
- 名前: ________________
- 日時: ________________
- 署名: ________________

### 承認者
- 名前: ________________
- 日時: ________________
- 署名: ________________

---

## デプロイ結果

- [ ] 成功
- [ ] ロールバック実施
- [ ] 部分的な問題あり

### コメント
_______________________
_______________________
_______________________
```
