# 変更ログテンプレート

## CHANGELOG フォーマット

```markdown
# Changelog

このファイルはプロンプトの変更履歴を記録します。
フォーマットは [Keep a Changelog](https://keepachangelog.com/) に準拠しています。

## [Unreleased]

### Added
- 新機能や新しい動作

### Changed
- 既存機能の変更

### Deprecated
- 将来削除予定の機能

### Removed
- 削除された機能

### Fixed
- バグ修正

### Security
- セキュリティ関連の修正

---

## [2.0.0] - 2025-04-01

### Changed
- 出力スキーマを新形式に変更（破壊的変更）
  - `result` フィールドを `data.result` に移動
  - `confidence` フィールドを追加

### Migration
移行ガイド: docs/migration-v2.md

---

## [1.1.0] - 2025-03-15

### Added
- 感情分析に基づく応答トーン調整機能
- 新しいFew-Shot例を5件追加

### Changed
- デフォルトTemperatureを0.7から0.5に変更

---

## [1.0.1] - 2025-03-01

### Fixed
- 数値データのハルシネーション問題を修正
- 引用形式の不一致を修正

---

## [1.0.0] - 2025-02-01

### Added
- 初期リリース
- 基本的な質問応答機能
- JSON形式の出力サポート
```

---

## 変更エントリの書き方

### 良い例

```markdown
### Added
- 感情分析に基づく応答トーン調整機能
  - 顧客の感情（positive/negative/neutral）を検出
  - 感情に応じた言葉遣いを自動選択
  - Issue: #123

### Changed
- 出力スキーマの `result` フィールドを `data.result` に移動
  - 理由: ネストされたデータ構造への統一
  - 影響: すべてのAPIクライアントで更新が必要
  - Migration: docs/migration-v2.md を参照
```

### 悪い例

```markdown
### Changed
- 色々更新した
- バグを修正

### Added
- 新機能
```

---

## リリースノートテンプレート

```markdown
# リリースノート: v1.1.0

## ハイライト

このリリースでは、感情分析機能を追加し、
顧客対応の品質を向上させました。

## 新機能

### 感情分析トーン調整

顧客の感情を自動検出し、
適切なトーンで応答するようになりました。

**使用例**:
- 怒っている顧客 → より丁寧で共感的な応答
- 満足している顧客 → フレンドリーな応答

## 変更点

### Temperature調整

デフォルトのTemperatureを0.7から0.5に変更しました。
これにより、応答の一貫性が向上しました。

## 互換性

このリリースは v1.0.x と後方互換性があります。
既存の統合への影響はありません。

## アップグレード手順

1. 新バージョンをデプロイ
2. 感情分析機能はデフォルトで有効
3. 無効にする場合: `emotion_analysis: false` を設定

## 既知の問題

- 非常に長いテキスト（5000文字以上）で感情検出精度が低下する場合があります

## 次回予定

v1.2.0 では多言語サポートを追加予定です。
```

---

## バージョン比較テンプレート

```markdown
# バージョン比較: v1.0.0 → v1.1.0

## 概要

| 項目 | v1.0.0 | v1.1.0 |
|------|--------|--------|
| リリース日 | 2025-02-01 | 2025-03-15 |
| 変更タイプ | - | MINOR |
| 後方互換性 | - | あり |

## 機能比較

| 機能 | v1.0.0 | v1.1.0 |
|------|--------|--------|
| 基本Q&A | ✅ | ✅ |
| JSON出力 | ✅ | ✅ |
| 感情分析 | ❌ | ✅ |
| Few-Shot例 | 3件 | 8件 |

## パラメータ変更

| パラメータ | v1.0.0 | v1.1.0 | 理由 |
|-----------|--------|--------|------|
| Temperature | 0.7 | 0.5 | 一貫性向上 |
| Max Tokens | 500 | 500 | 変更なし |

## 出力スキーマ変更

```diff
 {
   "answer": "string",
-  "confidence": "high" | "medium" | "low"
+  "confidence": "high" | "medium" | "low",
+  "emotion": "positive" | "negative" | "neutral"
 }
```

## マイグレーション

このバージョンへのアップグレードに特別な対応は不要です。
新しい `emotion` フィールドはオプショナルで、
既存のクライアントは無視できます。
```

---

## 非推奨機能の告知テンプレート

```markdown
# 非推奨告知: legacy_output_format

## 概要

`legacy_output_format` オプションは v2.0.0 で非推奨となり、
v3.0.0 で削除されます。

## タイムライン

| バージョン | 日付 | 状態 |
|-----------|------|------|
| v1.5.0 | 2025-03-01 | 導入 |
| v2.0.0 | 2025-04-01 | 非推奨（警告表示） |
| v2.5.0 | 2025-06-01 | 非推奨（エラーログ） |
| v3.0.0 | 2025-08-01 | 削除 |

## 影響

この機能を使用している場合、以下の対応が必要です:

### 移行手順

1. 現在の使用状況を確認
2. 新しい出力形式に対応
3. `legacy_output_format` オプションを削除

### 新旧形式の比較

**旧形式（非推奨）**:
\`\`\`json
{ "result": "answer text" }
\`\`\`

**新形式（推奨）**:
\`\`\`json
{
  "data": {
    "answer": "answer text",
    "metadata": {}
  }
}
\`\`\`

## サポート

移行に関するご質問は #prompt-support チャネルまで。
```
