# Green Phase（グリーンフェーズ）

## 概要

Greenフェーズは、TDDサイクルの2番目のステップです。
失敗しているテストを通すための最小限のコードを実装します。

## 目的

- テストを通す最小限の実装を行う
- 過剰な実装を避ける（YAGNI）
- 動作するコードを素早く得る

## 手順

### Step 1: 最小限の実装を考える

テストを通すために必要な最小限のコードを考える。

**質問**:

- テストを通すために絶対に必要なコードは何か？
- 省略できる部分はないか？
- 「とりあえず動く」コードは何か？

### Step 2: 実装

最小限のコードを書く。

**マインドセット**:

- 「汚くても良い」
- 「後でリファクタリングする」
- 「今はテストを通すことだけに集中」

### Step 3: テスト実行と成功確認

テストを実行し、グリーンになることを確認する。

**確認事項**:

- テストが通るか？
- 他のテストが壊れていないか？
- 実装が過剰でないか？

## 最小限の実装とは

### ハードコード

最初は具体的な値をハードコードしても良い。

**例**:
テストが「2 + 2 = 4」を期待する場合、最初は`return 4`でも良い。
次のテストで汎用化を進める。

### 段階的な一般化

テストが増えるにつれて、実装を一般化していく。

**プロセス**:

1. ハードコード（最初のテスト）
2. 変数化（2番目のテスト）
3. ロジック化（3番目以降のテスト）

## 避けるべきこと

### 過剰な実装

**問題**: テストが要求する以上の機能を実装

**影響**:

- 不要なコードが増える
- テストされていないコードが生まれる
- 将来の変更が困難になる

**対処**: テストが通る最小限だけを実装

### 設計を考えすぎる

**問題**: Greenフェーズで完璧な設計を目指す

**影響**:

- 時間がかかる
- 過剰な抽象化
- TDDのリズムが崩れる

**対処**: 設計はRefactorフェーズで行う

### 複数のテストを一度に通す

**問題**: 複数のテストを同時に通そうとする

**影響**:

- どの変更がどのテストを通したか不明確
- デバッグが困難

**対処**: 一度に一つのテストだけを通す

## チェックリスト

### 実装前

- [ ] テストが失敗していることを確認したか？
- [ ] 最小限の実装が何かを考えたか？

### 実装後

- [ ] テストが通るか？
- [ ] 他のテストが壊れていないか？
- [ ] 過剰な実装をしていないか？
- [ ] Refactorフェーズに進む準備ができたか？

## Greenフェーズの心構え

### 「とりあえず動く」を優先

- 完璧を求めない
- 動くコードを素早く得る
- 改善はRefactorフェーズで

### 小さなステップ

- 一度に大きな変更をしない
- 確実に動く状態を維持
- 問題が起きたらすぐに戻る

### テストへの信頼

- テストが通れば実装は正しい
- テストが仕様書
- テストを信頼してリファクタリングへ
