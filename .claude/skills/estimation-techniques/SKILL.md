---
name: estimation-techniques
description: |
    ストーリーポイント、プランニングポーカー、相対見積もりの実践手法。
    Mike Cohnの見積もり理論を基盤として、予測可能性と柔軟性を両立する
    アジャイル見積もりを実現します。

  📚 リソース参照:
  このスキルにはリソースファイルがありません。

  Use proactively when implementing estimation-techniques patterns or solving related problems.
version: 1.1.0
---

# 見積もり技法スキル

## 概要

相対見積もりとチーム合意形成により、不確実性を管理しながら
予測可能な計画を策定する手法を体系化します。

## いつ使うか

- スプリント計画での容量見積もり
- リリース計画での期間予測
- バックログリファインメント
- 新規プロジェクトの規模把握
- リスク評価と不確実性の定量化

## コア概念

### 相対見積もりの原理

#### なぜ相対見積もりか

1. **人間の認知特性** - 絶対値より相対値の判断が正確
2. **コンテキスト非依存** - チームや技術に関わらず適用可能
3. **学習曲線の吸収** - スキル向上を自動的に反映
4. **議論の焦点化** - 時間でなく複雑度に集中

#### ストーリーポイントの性質

- **複雑度** - 技術的な難しさ
- **作業量** - タスクの多さ
- **不確実性** - 未知の要素
- **リスク** - 失敗の可能性

### フィボナッチ数列の活用

```
推奨スケール: 1, 2, 3, 5, 8, 13, 21, 40, 100

理由:
- 自然な不確実性の増大を表現
- 過度に細かい議論を防止
- 大きな数値での精度低下を許容
```

### ベロシティの概念

```
ベロシティ = 完了ストーリーポイント / スプリント

用途:
- キャパシティ計画
- リリース日予測
- 改善効果の測定
```

## プランニングポーカー

### 実施プロセス

#### Step 1: 準備

```
必要なもの:
- ストーリーカード
- 見積もりカード（各メンバー）
- タイマー
- 基準ストーリー
```

#### Step 2: 基準設定

```
基準ストーリーの選定:
- 中程度の複雑度（3-5ポイント）
- チーム全員が理解
- 実装経験がある
- 典型的な作業
```

#### Step 3: 見積もり実施

```
1. ストーリーの説明（2分）
2. 質疑応答（3分）
3. 各自で見積もり
4. 同時に開示
5. 最大最小の説明（2分）
6. 再見積もり（必要時）
7. 合意形成
```

#### Step 4: 記録と学習

```
記録事項:
- 最終見積もり値
- 議論のポイント
- 仮定と前提条件
- リスクと依存関係
```

### ファシリテーションテクニック

#### アンカリング防止

```
対策:
- 同時開示の徹底
- 事前議論の制限
- 独立思考の促進
```

#### 議論の活性化

```
質問例:
- 「なぜその数値を選びましたか？」
- 「どんなリスクを考慮しましたか？」
- 「類似の経験はありますか？」
- 「分割可能な部分はありますか？」
```

#### 時間管理

```
タイムボックス:
- 1ストーリー: 最大10分
- 議論: 5分以内
- 1セッション: 2時間以内
```

## 見積もり手法バリエーション

### T-Shirt Sizing

```
サイズ: XS, S, M, L, XL, XXL

用途:
- 初期の概算見積もり
- 大量アイテムの分類
- 非技術者との対話

変換例:
XS=1, S=2, M=5, L=8, XL=13, XXL=21
```

### アフィニティ推定

```
プロセス:
1. 全ストーリーを壁に貼る
2. 相対的なサイズで並べ替え
3. グループに分類
4. 各グループにポイント割当
```

### 三点見積もり

```
楽観値 (O): 最良ケース
最可能値 (M): 最も可能性が高い
悲観値 (P): 最悪ケース

期待値 = (O + 4M + P) / 6
標準偏差 = (P - O) / 6
```

### バケットシステム

```
バケット: 1, 2, 3, 5, 8, 13, 20, 40, 100

プロセス:
1. バケットを用意
2. ストーリーを読み上げ
3. 適切なバケットに投入
4. 最後に全体調整
```

## 不確実性の管理

### Cone of Uncertainty

```
プロジェクトフェーズ別の見積もり精度:

初期構想: ×0.25 ~ ×4
要件定義: ×0.5 ~ ×2
設計完了: ×0.67 ~ ×1.5
実装開始: ×0.8 ~ ×1.25
完了間近: ×0.95 ~ ×1.05
```

### バッファ戦略

```
プロジェクトバッファ = √(Σ(各タスクの分散))

配置:
- フィーチャーバッファ: 20-30%
- リリースバッファ: 30-50%
- 緊急対応バッファ: 10-20%
```

### リスク調整

```
リスクレベル別の係数:
- 低リスク: ×1.1
- 中リスク: ×1.3
- 高リスク: ×1.5
- 未知の領域: ×2.0
```

## ベロシティ活用

### 計測と追跡

```
初期ベロシティ推定:
- 理想時間の60-70%
- 過去プロジェクトの参照
- 最初の3スプリント平均

安定化の判断:
- 変動係数 < 20%
- 3スプリント連続で±10%以内
```

### 予測と計画

```
リリース予測:
残ストーリーポイント / 平均ベロシティ = 必要スプリント数

信頼区間:
- 楽観的: 最大ベロシティ使用
- 現実的: 平均ベロシティ使用
- 悲観的: 最小ベロシティ使用
```

### 改善指標

```
ベロシティトレンド分析:
- 上昇傾向: プロセス改善の成果
- 横ばい: 安定した生産性
- 下降傾向: 阻害要因の調査必要
- 大幅変動: 見積もり精度の問題
```

## よくある課題と対策

### 課題 1: 見積もりの肥大化

```
症状: 時間とともに同じ作業の見積もりが増大
対策:
- 定期的な基準ストーリーの見直し
- 実績との比較分析
- レトロスペクティブでの振り返り
```

### 課題 2: 個人差の大きさ

```
症状: チーム内で見積もりが大きく異なる
対策:
- ペアプログラミングによる知識共有
- 見積もり根拠の明確化
- スキルマトリクスの活用
```

### 課題 3: 技術的負債の無視

```
症状: リファクタリングやテストを含めない
対策:
- Definition of Doneに含める
- 別途技術的負債ストーリー作成
- 見積もりチェックリスト活用
```

### 課題 4: TDD 工数の未考慮

```
症状: テストファースト開発の時間的オーバーヘッドを見積もりに含めない
対策:
- TDD 工数係数を適用
- テストカバレッジ目標を Definition of Done に含める
- 学習曲線を初期ベロシティに反映
```

## TDD 対応の見積もり（Test-Driven Development）

### TDD 工数係数

プロジェクトが TDD を採用している場合、以下の係数を適用:

```
TDD 未経験チーム:
- 初期ベロシティ × 0.6-0.7（学習曲線による生産性低下）
- スプリント2-3で0.8-0.9に改善
- スプリント5以降で1.0に到達

TDD 経験チーム:
- 初期ベロシティ × 0.85-0.9（テストファースト工数）
- スプリント2以降で0.95-1.0に改善

TDD 成熟チーム:
- 初期ベロシティ × 0.95-1.0（効率化済み）
- 長期的には1.0-1.1（品質向上による手戻り削減）
```

### テストカバレッジ目標の反映

見積もり時に以下のカバレッジ目標を考慮:

```
ユニットテスト（必須）:
- 全体: 60%以上
- 重要ロジック（Executor等）: 80%以上
- エラーハンドリング: 100%

統合テスト:
- 主要フロー: 100%
- API エンドポイント: 80%以上

E2E テスト:
- クリティカルパス: 100%
- 補助フロー: 50%以上
```

### Definition of Done（TDD プロジェクト版）

ストーリーを「完了」とみなす基準:

- [ ] 機能要件を満たすコードが実装されている
- [ ] **ユニットテストが先に書かれている**（Red-Green-Refactor）
- [ ] **ユニットテストカバレッジ ≥ 60%**（重要ロジックは ≥ 80%）
- [ ] すべてのテストがパスしている
- [ ] 型チェック（TypeScript strict）がパスしている
- [ ] ESLint エラーがゼロである
- [ ] コードレビューが完了している
- [ ] ドキュメントが更新されている

## 見積もりチェックリスト

### ストーリーレベル

- [ ] 要件は明確に理解されているか
- [ ] 受け入れ基準が定義されているか
- [ ] 技術的アプローチが合意されているか
- [ ] 依存関係が特定されているか
- [ ] **テスト戦略が考慮されているか**（TDD: テストファースト）
- [ ] **ユニットテストの見積もりが含まれているか**（カバレッジ60%以上目標）
- [ ] **統合テストの見積もりが含まれているか**（主要フロー）
- [ ] **E2Eテスト（クリティカルパス）の見積もりが含まれているか**

### チームレベル

- [ ] 必要なスキルを持つメンバーがいるか
- [ ] 過去の類似経験があるか
- [ ] 必要なツール/環境は準備可能か
- [ ] 外部依存は解決可能か

### プロジェクトレベル

- [ ] 全体のリリース計画と整合するか
- [ ] リスクは許容範囲内か
- [ ] バッファは適切に配置されているか
- [ ] ステークホルダーの期待と一致するか

## メトリクスとレポート

### 見積もり精度

```
精度 = 実績 / 見積もり

目標範囲: 0.8 ~ 1.2
改善が必要: < 0.5 or > 2.0
```

### 予測可能性

```
標準偏差 / 平均 = 変動係数

優秀: < 10%
良好: 10-20%
改善必要: > 30%
```

### チーム成熟度

```
指標:
- 見積もり時間の短縮
- 合意までの回数減少
- 精度の向上
- ベロシティの安定化
```

## ツールとテンプレート

### 見積もりワークシート

```
| ストーリー | 複雑度 | 作業量 | 不確実性 | リスク | 合計 |
|-----------|-------|-------|---------|-------|------|
| ログイン   | 2     | 1     | 1       | 1     | 3    |
| 検索機能   | 3     | 3     | 2       | 2     | 8    |
```

### ベロシティトラッカー

```
| Sprint | 計画 | 完了 | 追加 | 削除 | ベロシティ |
|--------|-----|------|-----|------|----------|
| 1      | 21  | 18   | 3   | 0    | 18       |
| 2      | 20  | 22   | 0   | 2    | 22       |
| 3      | 21  | 21   | 2   | 2    | 21       |
```

## 関連スキル

- `agile-project-management` - スプリント計画
- `user-story-mapping` - ストーリー作成
- `prioritization-frameworks` - 優先順位付け
- `metrics-tracking` - 実績測定


## 変更履歴

### v1.1.0 (2025-11-28)
- **master_system_design.md 準拠対応**:
  - TDD 対応の見積もりセクション追加（TDD 工数係数）
  - テストカバレッジ目標の反映（全体60%、重要ロジック80%）
  - Definition of Done（TDD プロジェクト版）の追加
  - 見積もりチェックリストにテスト項目を追加
- **改善**: 課題4「TDD 工数の未考慮」を追加
- **準拠**: Test-Driven Development 原則、テストピラミッド、カバレッジ目標

### v1.0.0 (2025-11-27)
- 初版作成
- ストーリーポイント、プランニングポーカー、ベロシティ管理の基本手法を体系化

