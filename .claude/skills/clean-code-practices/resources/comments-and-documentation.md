# コメントとドキュメンテーション

## 概要

コメントは、コードで表現できないことを補足するものです。
しかし、最良のコメントは「書かない」コメントです。
コード自体が意図を表現する「自己文書化コード」を目指します。

## 自己文書化コード

### 原則

コメントを書く前に、コードで意図を表現できないかを考えます。

**変換例**:

- コメント → より良い命名
- コメント → 関数の抽出
- コメント → 変数の導入

### 判断基準

- 名前だけで何をするか分かるか？
- 構造が処理の流れを表しているか？
- 型が意図を表現しているか？

## 良いコメント

### 法的情報

著作権やライセンス情報。

**例**: `// Copyright (c) 2025 Company. All rights reserved.`

### 意図の説明

「なぜ」そうしたかを説明。

**適用条件**:

- 非自明な設計判断
- 性能上の理由
- 外部制約への対応

### 警告

重要な注意事項。

**例**:

- `// 注意: この順序は重要です`
- `// このメソッドはスレッドセーフではありません`

### TODO

一時的なマーカー（後で対処すべきこと）。

**ルール**:

- 担当者と期限を含める
- 定期的に清掃する
- 長期間放置しない

### 公開APIのドキュメント

公開インターフェースの使用方法。

**含めるべき内容**:

- 目的と機能
- パラメータの説明
- 戻り値の説明
- 例外/エラーの説明
- 使用例

## 悪いコメント

### 冗長なコメント

コードを読めば分かることの繰り返し。

**例**:

```
// ユーザーを取得する
function getUser() { ... }
```

### 誤解を招くコメント

コードと一致しない説明。

**原因**:

- コメントを更新し忘れ
- 不正確な理解

### コメントアウトされたコード

削除すべきなのに残っているコード。

**対処**: バージョン管理を信頼して削除

### 変更履歴

ファイル内の変更ログ。

**対処**: バージョン管理システムを使用

### 帰属表示コメント

誰が書いたかのマーカー。

**対処**: バージョン管理システムを使用

### 位置マーカー

セクションの区切り。

**例**: `// ======= Private Methods =======`

**対処**: 多くの場合不要、クラスを分割すべきサイン

## JSDoc/TSDocの使い方

### 公開API

外部から使用されるインターフェースには文書化が有効。

### 複雑なロジック

非自明なアルゴリズムや制約の説明。

### 避けるべきケース

- プライベートメソッド（実装詳細）
- 自明なゲッター/セッター
- コードで明らかなこと

## チェックリスト

### コメント作成前

- [ ] コードで表現できないか？
- [ ] より良い命名で代替できないか？
- [ ] 関数を抽出して名前を付けられないか？

### コメント作成後

- [ ] コードと一致しているか？
- [ ] 必要最小限の情報か？
- [ ] 将来も正確さを維持できるか？

### コードレビュー時

- [ ] 冗長なコメントがないか？
- [ ] コメントアウトされたコードがないか？
- [ ] 誤解を招くコメントがないか？
