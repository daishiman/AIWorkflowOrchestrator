# アクター識別ガイド

## 概要

アクターはユースケースを開始または参加するシステム外部のエンティティです。
適切なアクター識別は、システムの境界と責任を明確にするために不可欠です。

## アクターの種類

### 1. プライマリアクター（Primary Actor）

**定義**: ユースケースを開始し、目標達成を求めるアクター

**特徴**:

- ユースケースの主な受益者
- システムに要求を送る
- 目標達成のためにシステムを利用

**例**:

- 顧客: 商品を購入したい
- 管理者: ユーザーを管理したい
- 開発者: APIを利用したい

### 2. セカンダリアクター（Secondary Actor）

**定義**: ユースケースの実行をサポートするアクター

**特徴**:

- システムからサービスを提供される
- ユースケース完了に必要な情報を提供
- 通知を受け取る

**例**:

- 決済ゲートウェイ: 支払いを処理
- メールサービス: 通知を送信
- 外部認証サービス: ユーザーを認証

### 3. システムアクター

**定義**: 自動的にユースケースを開始するシステム

**特徴**:

- 人間ではない
- スケジュールまたはイベントでトリガー
- 時間ベースの処理

**例**:

- スケジューラー: 定期バッチ処理を開始
- 監視システム: アラートを発行
- 外部システム: データを同期

## アクター識別プロセス

### Step 1: ステークホルダーの列挙

**質問**:

- このシステムを使うのは誰か？
- このシステムの情報を必要とするのは誰か？
- このシステムに情報を提供するのは誰か？
- このシステムを保守するのは誰か？

**出力**: 潜在的アクターのリスト

### Step 2: ロールの特定

**質問**:

- 同じ人が異なるロールを持つか？
- 異なる人が同じロールを持つか？
- ロールは排他的か、重複するか？

**出力**: ロールベースのアクターリスト

### Step 3: 外部システムの特定

**質問**:

- どの外部システムと連携するか？
- どのサービスを呼び出すか？
- どのシステムから呼び出されるか？

**出力**: システムアクターのリスト

### Step 4: アクターの統合と分離

**統合基準**:

- 同じゴールを持つアクターは統合
- 同じ権限を持つアクターは統合

**分離基準**:

- 異なる権限を持つアクターは分離
- 異なるユースケースを開始するアクターは分離

## アクター定義テンプレート

```markdown
## アクター: [アクター名]

**種類**: プライマリ / セカンダリ / システム
**説明**: [1-2文の説明]
**代表的な人物/システム**: [具体例]

**目標**:

- [目標1]
- [目標2]

**関連ユースケース**:

- [UC-XXX] [ユースケース名]
- [UC-XXX] [ユースケース名]

**特性**:

- 技術レベル: 高 / 中 / 低
- 使用頻度: 毎日 / 週次 / 月次
- 優先度: 高 / 中 / 低
```

## アクター階層（継承）

```
        ユーザー
         /    \
        /      \
    一般ユーザー  管理者
                   \
                    \
                 スーパー管理者
```

**継承ルール**:

- 子アクターは親アクターのすべてのユースケースを実行可能
- 子アクターは追加のユースケースを持つ
- 抽象アクターは直接システムを使用しない

## アクター識別チェックリスト

### 人間アクター

- [ ] エンドユーザーは特定されているか？
- [ ] 管理者/運用担当者は特定されているか？
- [ ] ゲストユーザーは考慮されているか？
- [ ] サポート担当者は特定されているか？

### システムアクター

- [ ] 外部APIは特定されているか？
- [ ] バッチ処理のトリガーは特定されているか？
- [ ] 連携システムは特定されているか？
- [ ] 監視/アラートシステムは特定されているか？

### アクター属性

- [ ] 各アクターに目標が定義されているか？
- [ ] アクター間の階層関係は明確か？
- [ ] アクターの権限レベルは定義されているか？

## よくある間違い

### 1. アクターの粒度が細かすぎる

**間違い**: 「20代男性」「30代女性」を別アクターにする
**正解**: ロールが同じなら「一般ユーザー」として統合

### 2. システムコンポーネントをアクターにする

**間違い**: 「データベース」「ログシステム」をアクターにする
**正解**: システム内部コンポーネントはアクターではない

### 3. アクターとロールの混同

**間違い**: 「鈴木さん」「田中さん」をアクターにする
**正解**: 「管理者」というロールでまとめる

### 4. セカンダリアクターの見落とし

**間違い**: 人間アクターだけを考慮
**正解**: 外部システム、サービスも含める

## 例: ECサイトのアクター

### プライマリアクター

| アクター     | 説明             | 主な目標             |
| ------------ | ---------------- | -------------------- |
| ゲスト       | 未登録ユーザー   | 商品を閲覧、会員登録 |
| 会員         | 登録済みユーザー | 商品を購入           |
| 出品者       | 商品を販売       | 商品を出品・管理     |
| サイト管理者 | 運営担当         | サイト全体を管理     |

### セカンダリアクター

| アクター       | 説明          | 提供サービス   |
| -------------- | ------------- | -------------- |
| 決済サービス   | 外部決済API   | 支払い処理     |
| 配送サービス   | 外部配送API   | 配送手配・追跡 |
| メールサービス | 外部メールAPI | 通知送信       |

### システムアクター

| アクター             | 説明         | トリガー   |
| -------------------- | ------------ | ---------- |
| バッチスケジューラー | 定期処理     | 時間ベース |
| 在庫監視システム     | アラート発行 | 在庫閾値   |
