# DEEP原則ガイド

## 概要

DEEP原則は、健全なプロダクトバックログを維持するための4つの重要原則です。
Roman PichlerとMike Cohnが提唱したこのフレームワークは、アジャイル開発における
バックログ品質の標準として広く採用されています。

## DEEP原則の4要素

### D - Detailed appropriately（適切に詳細化）

**原則**: バックログアイテムは、実装時期に応じて適切なレベルで詳細化する

**詳細化のレベル**:

```
Now（次1-2スプリント）:
├─ 完全に詳細化: 100%
├─ 受け入れ基準: すべて定義済み
├─ 技術的考慮事項: 明確化済み
├─ 依存関係: 解決済み
├─ 見積もり: ストーリーポイント確定
└─ Definition of Ready: すべて満たす

Next（2-4スプリント先）:
├─ 概要レベル: 60-80%
├─ ユーザー価値: 明確
├─ 大まかな受け入れ基準: あり
├─ 見積もり: T-Shirtサイズ（S/M/L/XL）
└─ 詳細化の優先度: 次回リファインメントで対応

Later（それ以降）:
├─ アイデアレベル: 20-40%
├─ タイトルと簡単な説明のみ
├─ ビジネス価値の大まかな理解
└─ 見積もり: 相対的なサイズ感のみ
```

**実践例**:

```markdown
## Now（次スプリント）- 完全詳細化

US-001: ユーザー登録機能

As a 新規ユーザー
I want to メールアドレスとパスワードでアカウント登録
So that サービスを利用開始できる

受け入れ基準:

- [ ] Given 登録ページにアクセス When メールアドレスとパスワードを入力 Then 登録確認メールが送信される
- [ ] Given 登録確認メール受信 When 確認リンクをクリック Then アカウントが有効化される
- [ ] Given 既存メールアドレス When 同じメールで登録試行 Then エラーメッセージが表示される

技術的考慮事項:

- パスワード: bcrypt、cost factor=12
- メール送信: SendGrid
- バリデーション: Joi
- データベース: users テーブル

依存関係: なし
見積もり: 5ストーリーポイント
```

```markdown
## Next（3スプリント先）- 概要レベル

US-010: ソーシャルログイン

概要: GoogleとFacebookアカウントでのログインをサポート

価値: 登録の摩擦を減らし、コンバージョン率を向上

大まかな受け入れ基準:

- Googleアカウントでログイン可能
- Facebookアカウントでログイン可能
- 既存アカウントとの紐付けが可能

見積もり: L（大規模）
```

```markdown
## Later（6ヶ月後）- アイデアレベル

Epic-005: マルチテナント対応

アイデア: 複数組織を一つのインスタンスで管理

価値: 運用コスト削減、スケーラビリティ向上

サイズ感: XL（非常に大規模）
```

---

### E - Emergent（創発的）

**原則**: バックログは静的ではなく、継続的に進化・変化する

**創発的な変化の種類**:

1. **新規追加**: 新しいアイデア、市場変化、顧客フィードバック
2. **更新**: 学習による理解の深化、技術的発見
3. **削除**: 陳腐化、優先度低下、不要化
4. **再優先順位付け**: ビジネス環境の変化、戦略変更

**創発的バックログの管理**:

```markdown
## 週次バックログレビュー

新規追加:

- [ ] 市場調査からの新機能アイデア（5件）
- [ ] 顧客フィードバックからの改善要望（3件）
- [ ] 技術的負債の新規発見（2件）

更新:

- [ ] US-012: PoC完了により実現可能性が明確化 → 詳細化レベルをNext→Nowに移行
- [ ] US-015: 技術調査により工数が2倍と判明 → 見積もり更新、分割検討

削除:

- [ ] US-020: 競合が同機能をリリース、差別化困難 → アーカイブ
- [ ] Epic-003: 戦略転換により不要 → アーカイブ

再優先順位付け:

- [ ] US-008: 顧客要望が急増 → 優先度を上げる
- [ ] US-011: 代替手段が見つかった → 優先度を下げる
```

**創発を促進する活動**:

```
定期的なバックログリファインメント:
├─ 頻度: 週1-2回
├─ 時間: スプリント容量の10%
├─ 参加者: PO、開発チーム、ステークホルダー
├─ 活動: 詳細化、見積もり、優先順位調整
└─ 成果物: 次2スプリント分のReadyアイテム

スプリントレビュー:
├─ デモ後のフィードバック収集
├─ 学習の反映
├─ 新規アイテムの追加
└─ 既存アイテムの更新

四半期プランニング:
├─ ロードマップの見直し
├─ エピックの追加・削除
├─ 戦略との整合性確認
└─ 大規模な優先順位調整
```

---

### E - Estimated（見積もり済み）

**原則**: すべてのバックログアイテムは適切な粒度で見積もりされている

**見積もり手法の選択**:

```
エピックレベル（大規模）:
├─ 手法: T-Shirtサイズ（XS/S/M/L/XL/XXL）
├─ 目的: 相対的なサイズ感の把握
├─ 精度: ±100%
└─ 更新頻度: 四半期ごと

ストーリーレベル（中規模）:
├─ 手法: ストーリーポイント（フィボナッチ: 1, 2, 3, 5, 8, 13）
├─ 目的: スプリント計画、ベロシティ測定
├─ 精度: ±50%
└─ 更新頻度: リファインメントごと

タスクレベル（小規模）:
├─ 手法: 時間（0.5h, 1h, 2h, 4h, 8h）
├─ 目的: 日次計画、進捗管理
├─ 精度: ±25%
└─ 更新頻度: スプリント計画、デイリースクラム
```

**プランニングポーカーの実践**:

```markdown
## セッション例: US-015の見積もり

ストーリー: パスワードリセット機能

1. 説明（2分）:
   PO: メールでリセットリンクを送信、トークン検証、新パスワード設定

2. 質問（3分）:
   Dev: メール送信は既存インフラ使用？ → Yes
   Dev: トークンの有効期限は？ → 24時間
   Dev: 二要素認証との統合は？ → No、別ストーリー

3. 見積もり（1分）:
   - Dev A: 5pt
   - Dev B: 3pt
   - Dev C: 8pt
   - Dev D: 5pt

4. 議論（3分）:
   Dev C: メール テンプレート作成を含めた → 分離すべき
   Dev B: トークン生成はライブラリ使用 → 3pt妥当

5. 再見積もり（1分）:
   - 全員: 3pt

6. 合意:
   ストーリーポイント: 3
   サブタスク: メールテンプレート作成（別ストーリー化）
```

**見積もりの精度向上**:

```
ベロシティ追跡:
├─ スプリント1: 18pt → 実績16pt（達成率89%）
├─ スプリント2: 20pt → 実績18pt（達成率90%）
├─ スプリント3: 18pt → 実績17pt（達成率94%）
└─ 平均ベロシティ: 17pt ± 1pt

見積もり精度の改善:
├─ 過去の類似ストーリーを参照
├─ 実績データとの比較
├─ 見積もりと実績の差異分析
└─ チーム内での見積もり基準の統一
```

---

### P - Prioritized（優先順位付け）

**原則**: バックログアイテムは明確な優先順位で並んでいる

**優先順位付けのフレームワーク**:

```
1. ビジネス価値:
   ├─ ROI（投資対効果）
   ├─ 顧客満足度への影響
   ├─ 競争優位性
   └─ 戦略目標との整合性

2. リスク削減:
   ├─ 技術的不確実性の解消
   ├─ 市場検証
   ├─ 依存関係の早期解決
   └─ 学習機会

3. 緊急性:
   ├─ 法的要件、コンプライアンス
   ├─ 契約上の義務
   ├─ 競合対応
   └─ 市場タイミング

4. 実現可能性:
   ├─ 技術的難易度
   ├─ リソース要件
   ├─ 依存関係
   └─ リスクレベル
```

**WSJF（Weighted Shortest Job First）による優先順位付け**:

```
WSJF = (ビジネス価値 + 時間的価値 + リスク削減) / ジョブサイズ

例:
US-001:
├─ ビジネス価値: 8
├─ 時間的価値: 5（早期リリースが重要）
├─ リスク削減: 3
├─ ジョブサイズ: 5pt
└─ WSJF: (8+5+3)/5 = 3.2

US-002:
├─ ビジネス価値: 5
├─ 時間的価値: 3
├─ リスク削減: 8（技術的不確実性高い）
├─ ジョブサイズ: 3pt
└─ WSJF: (5+3+8)/3 = 5.3

優先順位: US-002 > US-001（WSJFが高い方が優先）
```

**優先順位の可視化**:

```markdown
## 現在のバックログ順序

TOP（Must Do - 次スプリント）:

1. US-002: ユーザー認証（WSJF: 5.3）
2. US-001: ユーザー登録（WSJF: 3.2）
3. US-005: プロフィール編集（WSJF: 2.8）

MID（Should Do - 2-3スプリント）: 4. US-008: 通知機能（WSJF: 2.3）5. US-010: ソーシャルログイン（WSJF: 2.0）6. US-012: ダッシュボード（WSJF: 1.8）

LOW（Could Do - 4スプリント以降）: 7. US-015: テーマカスタマイズ（WSJF: 1.2）8. US-018: 多言語対応（WSJF: 1.0）
```

---

## DEEP原則の実践チェックリスト

### 週次バックログヘルスチェック

```markdown
□ Detailed appropriately:

- [ ] 次2スプリント分が100%詳細化されている
- [ ] 3-4スプリント先が60-80%詳細化されている
- [ ] それ以降はアイデアレベルでOK

□ Emergent:

- [ ] 新規アイテムが追加された（先週から+X件）
- [ ] 陳腐化したアイテムが削除された（-X件）
- [ ] 学習に基づいてアイテムが更新された

□ Estimated:

- [ ] 次2スプリント分が見積もり済み
- [ ] 見積もりと実績の差異を分析した
- [ ] ベロシティが安定している（±10%以内）

□ Prioritized:

- [ ] バックログが価値順に並んでいる
- [ ] 優先順位の変更理由が明確
- [ ] ステークホルダーと優先順位を合意
```

---

## まとめ

DEEP原則は、バックログの健全性を保つための実践的なガイドラインです。

**重要なポイント**:

1. **適切な詳細化**: 実装時期に応じた粒度で詳細化
2. **継続的な進化**: 静的ではなく、学習と変化を受け入れる
3. **全体の見積もり**: すべてのアイテムが適切に見積もられている
4. **明確な優先順位**: 価値に基づいた明確な並び順

**成功の鍵**:

- 週次リファインメントの徹底
- チーム全体での見積もり
- データに基づく優先順位付け
- 継続的な改善と調整
