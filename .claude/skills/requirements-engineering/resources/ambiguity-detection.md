# 曖昧性検出パターンと除去技法

## 概要

曖昧性は要件定義における最大のリスクです。
このガイドでは、曖昧な表現を検出し、具体的・測定可能な要件に変換する方法を提供します。

## 曖昧性の5つのパターン

### 1. 量的曖昧性

**検出キーワード**:

- 「多い」「少ない」
- 「速い」「遅い」
- 「大きい」「小さい」
- 「頻繁に」「たまに」
- 「長い」「短い」

**除去方法**: 具体的な数値と単位に変換

**例**:
| 曖昧な表現 | 具体化後 |
|-----------|---------|
| 高速な応答 | 応答時間200ms以内（95パーセンタイル） |
| 多くのユーザー | 同時接続1000ユーザー以上 |
| 大容量ファイル | 最大100MBまでのファイル |
| 頻繁に更新 | 1分間隔で自動更新 |

### 2. 質的曖昧性

**検出キーワード**:

- 「使いやすい」「分かりやすい」
- 「適切に」「正しく」
- 「十分な」「良い」
- 「ユーザーフレンドリー」
- 「高品質な」

**除去方法**: 測定可能な基準に変換

**例**:
| 曖昧な表現 | 具体化後 |
|-----------|---------|
| 使いやすいUI | 3クリック以内で目的の操作が完了 |
| 分かりやすいエラー | エラーメッセージに原因と解決策を含む |
| 適切な権限 | 管理者/編集者/閲覧者の3段階ロール |
| 高品質な画像 | 解像度1920x1080以上、JPEG品質80%以上 |

### 3. 範囲の曖昧性

**検出キーワード**:

- 「など」「等」
- 「その他」
- 「いくつかの」
- 「主な」
- 「〜を含む」

**除去方法**: 完全な列挙またはパターンの明示

**例**:
| 曖昧な表現 | 具体化後 |
|-----------|---------|
| 画像ファイルなど | .jpg, .png, .gif, .webp（最大10MB） |
| いくつかのSNS | Twitter, Facebook, Googleの3種類 |
| 主なブラウザ | Chrome 90+, Firefox 88+, Safari 14+, Edge 90+ |
| 日本語等 | 日本語、英語（将来的に中国語追加予定） |

### 4. 条件の曖昧性

**検出キーワード**:

- 「場合によって」「必要に応じて」
- 「状況次第で」
- 「適宜」
- 「時々」
- 「可能であれば」

**除去方法**: 具体的な条件の列挙

**例**:
| 曖昧な表現 | 具体化後 |
|-----------|---------|
| 必要に応じてログ出力 | エラー発生時、応答時間>1s時、メモリ使用率>80%時 |
| 場合によってキャッシュ | GET APIのみ、TTL=5分、最大100MB |
| 適宜通知 | ステータス変更時、エラー発生時、コメント追加時 |

### 5. 主体の曖昧性

**検出キーワード**:

- 「システムは」（どのコンポーネント？）
- 「ユーザーは」（どのユーザー？）
- 「管理者は」（どの権限レベル？）

**除去方法**: 具体的なアクターの特定

**例**:
| 曖昧な表現 | 具体化後 |
|-----------|---------|
| ユーザーは削除できる | 管理者ロールのユーザーのみ削除可能 |
| システムが処理 | バックエンドAPIサーバーが非同期処理 |
| 管理者が設定 | スーパー管理者のみシステム設定を変更可能 |

## 明確化の質問テクニック

### 量的曖昧性への質問

- 「『高速』とは具体的に何秒以内ですか？」
- 「『多くの』とは何件以上を想定していますか？」
- 「『頻繁に』とはどのくらいの頻度ですか？」

### 質的曖昧性への質問

- 「『使いやすい』とはどういう状態ですか？」
- 「それをどうやって測定しますか？」
- 「何をもって『適切』と判断しますか？」

### 範囲の曖昧性への質問

- 「『など』には他に何が含まれますか？」
- 「すべてを列挙していただけますか？」
- 「将来的に追加される可能性はありますか？」

### 条件の曖昧性への質問

- 「『場合によって』とはどのような条件ですか？」
- 「すべての条件を教えていただけますか？」
- 「条件の優先順位はありますか？」

### 主体の曖昧性への質問

- 「どのユーザーを指していますか？」
- 「権限レベルは何種類ありますか？」
- 「どのコンポーネントが担当しますか？」

## 曖昧性チェックリスト

### 要件レビュー時の確認項目

- [ ] 定性的な形容詞が定量化されているか？
- [ ] 「など」「等」が除去され完全に列挙されているか？
- [ ] 条件が具体的に列挙されているか？
- [ ] すべての用語が明確に定義されているか？
- [ ] 主体（誰が/何が）が明確か？
- [ ] 測定方法が定義されているか？

## 自動検出パターン（正規表現）

```javascript
const ambiguityPatterns = [
  // 量的曖昧性
  /高速|速い|遅い|多い|少ない|大きい|小さい|長い|短い|頻繁/,
  // 質的曖昧性
  /適切|正しく|十分|良い|悪い|使いやすい|分かりやすい/,
  // 範囲の曖昧性
  /など|等|その他|いくつか|主な|を含む/,
  // 条件の曖昧性
  /場合によって|必要に応じて|状況次第|適宜|時々|可能であれば/,
];
```
